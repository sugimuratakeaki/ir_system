{% extends "base.html" %}

{% block title %}æˆ¦ç•¥ç®¡ç†ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰{% endblock %}
{% block page_icon %}ğŸ¯{% endblock %}
{% block page_title %}æˆ¦ç•¥ç®¡ç†ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰{% endblock %}
{% block breadcrumb_current %}æˆ¦ç•¥ç®¡ç†{% endblock %}

{% block extra_css %}
<style>
    /* ãƒ¡ã‚¤ãƒ³ã‚³ãƒ³ãƒ†ãƒŠ */
    .strategy-dashboard {
        background: var(--gray-50);
        min-height: calc(100vh - var(--header-height));
        padding: var(--space-lg);
    }
    
    /* ãƒ˜ãƒƒãƒ€ãƒ¼ã‚»ã‚¯ã‚·ãƒ§ãƒ³ */
    .dashboard-header {
        background: white;
        border-radius: var(--border-radius-xl);
        padding: var(--space-xl);
        margin-bottom: var(--space-xl);
        box-shadow: var(--shadow-sm);
    }
    
    .header-content {
        display: flex;
        justify-content: space-between;
        align-items: center;
        flex-wrap: wrap;
        gap: var(--space-lg);
    }
    
    .header-info h1 {
        font-size: var(--text-2xl);
        font-weight: var(--font-bold);
        color: var(--gray-900);
        margin: 0 0 var(--space-sm) 0;
        display: flex;
        align-items: center;
        gap: var(--space-sm);
    }
    
    .header-info p {
        color: var(--gray-600);
        font-size: var(--text-base);
        margin: 0;
    }
    
    .header-actions {
        display: flex;
        gap: var(--space-sm);
    }
    
    /* ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ãƒœã‚¿ãƒ³ */
    .action-button {
        display: flex;
        align-items: center;
        gap: var(--space-xs);
        padding: var(--space-sm) var(--space-md);
        background: white;
        color: var(--gray-700);
        border: 1px solid var(--gray-300);
        border-radius: var(--border-radius-lg);
        font-size: var(--text-sm);
        font-weight: var(--font-medium);
        cursor: pointer;
        transition: all var(--transition-fast);
    }
    
    .action-button:hover {
        background: var(--gray-50);
        border-color: var(--gray-400);
        transform: translateY(-1px);
    }
    
    .action-button.primary {
        background: var(--kagami-blue);
        color: white;
        border-color: var(--kagami-blue);
    }
    
    .action-button.primary:hover {
        background: var(--kagami-blue-dark);
        border-color: var(--kagami-blue-dark);
    }
    
    /* ã‚µãƒãƒªãƒ¼ã‚«ãƒ¼ãƒ‰ */
    .summary-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
        gap: var(--space-lg);
        margin-bottom: var(--space-xl);
    }
    
    .summary-card {
        background: white;
        border-radius: var(--border-radius-xl);
        padding: var(--space-lg);
        box-shadow: var(--shadow-sm);
        transition: all var(--transition-normal);
    }
    
    .summary-card:hover {
        box-shadow: var(--shadow-md);
        transform: translateY(-2px);
    }
    
    .summary-header {
        display: flex;
        align-items: center;
        justify-content: space-between;
        margin-bottom: var(--space-md);
    }
    
    .summary-title {
        display: flex;
        align-items: center;
        gap: var(--space-sm);
        font-size: var(--text-base);
        font-weight: var(--font-semibold);
        color: var(--gray-700);
    }
    
    .summary-badge {
        padding: 2px 8px;
        background: var(--gray-100);
        color: var(--gray-600);
        border-radius: var(--border-radius-full);
        font-size: var(--text-xs);
        font-weight: var(--font-medium);
    }
    
    .summary-badge.updated {
        background: var(--warning-light);
        color: white;
    }
    
    .summary-badge.new {
        background: var(--info-light);
        color: white;
    }
    
    .summary-value {
        font-size: var(--text-3xl);
        font-weight: var(--font-bold);
        color: var(--gray-900);
        margin-bottom: var(--space-xs);
    }
    
    .summary-baseline {
        font-size: var(--text-sm);
        color: var(--gray-600);
        margin-bottom: var(--space-md);
    }
    
    .summary-progress {
        margin-bottom: var(--space-sm);
    }
    
    .progress-bar {
        height: 8px;
        background: var(--gray-200);
        border-radius: var(--border-radius-full);
        overflow: hidden;
    }
    
    .progress-fill {
        height: 100%;
        background: var(--accent-teal);
        border-radius: var(--border-radius-full);
        transition: width var(--transition-slow) var(--easing-default);
    }
    
    .progress-text {
        display: flex;
        justify-content: space-between;
        font-size: var(--text-xs);
        color: var(--gray-600);
        margin-top: var(--space-xs);
    }
    
    /* æˆ¦ç•¥ã‚«ãƒ†ã‚´ãƒªãƒ¼ã‚»ã‚¯ã‚·ãƒ§ãƒ³ */
    .strategy-sections {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(600px, 1fr));
        gap: var(--space-xl);
        margin-bottom: var(--space-xl);
    }
    
    .strategy-section {
        background: white;
        border-radius: var(--border-radius-xl);
        padding: var(--space-xl);
        box-shadow: var(--shadow-sm);
    }
    
    .section-header {
        display: flex;
        align-items: center;
        justify-content: space-between;
        margin-bottom: var(--space-lg);
        padding-bottom: var(--space-md);
        border-bottom: 1px solid var(--gray-200);
    }
    
    .section-title {
        display: flex;
        align-items: center;
        gap: var(--space-sm);
        font-size: var(--text-lg);
        font-weight: var(--font-bold);
        color: var(--gray-900);
    }
    
    .section-icon {
        font-size: var(--text-xl);
    }
    
    .view-details {
        font-size: var(--text-sm);
        color: var(--kagami-blue);
        text-decoration: none;
        font-weight: var(--font-medium);
        transition: color var(--transition-fast);
    }
    
    .view-details:hover {
        color: var(--kagami-blue-dark);
        text-decoration: underline;
    }
    
    /* ç›®æ¨™ãƒªã‚¹ãƒˆ */
    .targets-list {
        display: flex;
        flex-direction: column;
        gap: var(--space-md);
    }
    
    .target-item {
        display: flex;
        align-items: center;
        justify-content: space-between;
        padding: var(--space-md);
        background: var(--gray-50);
        border-radius: var(--border-radius-lg);
        border: 1px solid var(--gray-200);
        transition: all var(--transition-fast);
    }
    
    .target-item:hover {
        background: white;
        border-color: var(--gray-300);
        box-shadow: var(--shadow-xs);
    }
    
    .target-info {
        flex: 1;
    }
    
    .target-name {
        font-weight: var(--font-semibold);
        color: var(--gray-900);
        margin-bottom: var(--space-xs);
        display: flex;
        align-items: center;
        gap: var(--space-sm);
    }
    
    .target-metrics {
        display: flex;
        gap: var(--space-lg);
        font-size: var(--text-sm);
        color: var(--gray-600);
    }
    
    .metric-item {
        display: flex;
        align-items: center;
        gap: var(--space-xs);
    }
    
    .metric-label {
        color: var(--gray-500);
    }
    
    .metric-value {
        font-weight: var(--font-semibold);
        color: var(--gray-700);
    }
    
    .target-actions {
        display: flex;
        gap: var(--space-xs);
    }
    
    .target-action {
        padding: var(--space-xs) var(--space-sm);
        background: white;
        border: 1px solid var(--gray-300);
        border-radius: var(--border-radius-md);
        font-size: var(--text-xs);
        color: var(--gray-600);
        cursor: pointer;
        transition: all var(--transition-fast);
    }
    
    .target-action:hover {
        background: var(--gray-50);
        border-color: var(--gray-400);
        color: var(--gray-700);
    }
    
    /* ã‚¤ãƒ³ã‚µã‚¤ãƒˆã‚»ã‚¯ã‚·ãƒ§ãƒ³ */
    .insights-section {
        background: white;
        border-radius: var(--border-radius-xl);
        padding: var(--space-xl);
        box-shadow: var(--shadow-sm);
    }
    
    .insights-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
        gap: var(--space-lg);
    }
    
    .insight-card {
        padding: var(--space-lg);
        background: var(--gray-50);
        border-radius: var(--border-radius-lg);
        border: 1px solid var(--gray-200);
        transition: all var(--transition-fast);
    }
    
    .insight-card:hover {
        background: white;
        border-color: var(--gray-300);
        box-shadow: var(--shadow-xs);
    }
    
    .insight-type {
        display: inline-flex;
        align-items: center;
        gap: var(--space-xs);
        padding: 4px 12px;
        background: var(--info-light);
        color: white;
        border-radius: var(--border-radius-full);
        font-size: var(--text-xs);
        font-weight: var(--font-medium);
        margin-bottom: var(--space-sm);
    }
    
    .insight-type.warning {
        background: var(--warning);
    }
    
    .insight-type.success {
        background: var(--success);
    }
    
    .insight-title {
        font-weight: var(--font-semibold);
        color: var(--gray-900);
        margin-bottom: var(--space-xs);
    }
    
    .insight-description {
        font-size: var(--text-sm);
        color: var(--gray-600);
        line-height: var(--leading-relaxed);
    }
    
    /* æŠ•è³‡å®¶è³ªå•ã‚»ã‚¯ã‚·ãƒ§ãƒ³ */
    .questions-indicator {
        display: inline-flex;
        align-items: center;
        gap: 4px;
        padding: 2px 8px;
        background: var(--error-light);
        color: white;
        border-radius: var(--border-radius-full);
        font-size: var(--text-xs);
        font-weight: var(--font-medium);
    }
    
    /* ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–å¯¾å¿œ */
    @media (max-width: 1200px) {
        .strategy-sections {
            grid-template-columns: 1fr;
        }
    }
    
    @media (max-width: 768px) {
        .strategy-dashboard {
            padding: var(--space-md);
        }
        
        .dashboard-header {
            padding: var(--space-lg);
        }
        
        .header-content {
            flex-direction: column;
            align-items: flex-start;
        }
        
        .summary-grid {
            grid-template-columns: 1fr;
        }
        
        .insights-grid {
            grid-template-columns: 1fr;
        }
        
        .target-metrics {
            flex-direction: column;
            gap: var(--space-xs);
        }
    }
</style>
{% endblock %}

{% block content %}
<div class="strategy-dashboard">
    <!-- ãƒ˜ãƒƒãƒ€ãƒ¼ã‚»ã‚¯ã‚·ãƒ§ãƒ³ -->
    <div class="dashboard-header">
        <div class="header-content">
            <div class="header-info">
                <h1>
                    <span>ğŸ¯</span>
                    ä¸­æœŸçµŒå–¶è¨ˆç”» æˆ¦ç•¥ç®¡ç†ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰
                </h1>
                <p>2024-2026å¹´åº¦ ä¸­æœŸçµŒå–¶è¨ˆç”»ã®é€²æ—ã¨æŠ•è³‡å®¶å¯¾è©±çŠ¶æ³ã‚’ä¸€å…ƒç®¡ç†</p>
            </div>
            <div class="header-actions">
                <button class="action-button" onclick="exportDashboard()">
                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4" />
                    </svg>
                    ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ
                </button>
                <button class="action-button primary" onclick="updateStrategies()">
                    <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15" />
                    </svg>
                    æœ€æ–°ãƒ‡ãƒ¼ã‚¿ã§æ›´æ–°
                </button>
            </div>
        </div>
    </div>
    
    <!-- ã‚µãƒãƒªãƒ¼ã‚«ãƒ¼ãƒ‰ -->
    <div class="summary-grid">
        <div class="summary-card">
            <div class="summary-header">
                <h3 class="summary-title">
                    <span>ğŸ“ˆ</span>
                    å…¨ä½“é€²æ—ç‡
                </h3>
            </div>
            <div class="summary-value">42.5%</div>
            <div class="summary-baseline">è¨ˆç”»1å¹´ç›®ã¨ã—ã¦é †èª¿ã«æ¨ç§»</div>
            <div class="summary-progress">
                <div class="progress-bar">
                    <div class="progress-fill" style="width: 42.5%;"></div>
                </div>
                <div class="progress-text">
                    <span>0%</span>
                    <span>42.5%</span>
                    <span>100%</span>
                </div>
            </div>
        </div>
        
        <div class="summary-card">
            <div class="summary-header">
                <h3 class="summary-title">
                    <span>ğŸ’¬</span>
                    æŠ•è³‡å®¶ã‹ã‚‰ã®è³ªå•
                </h3>
                <span class="summary-badge updated">è¦å¯¾å¿œ</span>
            </div>
            <div class="summary-value">45ä»¶</div>
            <div class="summary-baseline">ä»Šé€±: +12ä»¶ï¼ˆå‰é€±æ¯”ï¼‰</div>
            <div class="summary-progress">
                <div class="progress-bar">
                    <div class="progress-fill" style="width: 73%; background: var(--warning);"></div>
                </div>
                <div class="progress-text">
                    <span>å›ç­”æ¸ˆ: 33ä»¶</span>
                    <span>æœªå›ç­”: 12ä»¶</span>
                </div>
            </div>
        </div>
        
        <div class="summary-card">
            <div class="summary-header">
                <h3 class="summary-title">
                    <span>ğŸ”„</span>
                    æˆ¦ç•¥å¤‰æ›´
                </h3>
                <span class="summary-badge new">æ–°è¦</span>
            </div>
            <div class="summary-value">3é …ç›®</div>
            <div class="summary-baseline">ä»Šå››åŠæœŸã®è¦‹ç›´ã—äº‹é …</div>
            <div class="summary-progress">
                <div class="progress-bar">
                    <div class="progress-fill" style="width: 100%; background: var(--info);"></div>
                </div>
                <div class="progress-text">
                    <span>æ‰¿èªæ¸ˆ: 2ä»¶</span>
                    <span>æ¤œè¨ä¸­: 1ä»¶</span>
                </div>
            </div>
        </div>
        
        <div class="summary-card">
            <div class="summary-header">
                <h3 class="summary-title">
                    <span>â°</span>
                    æ¬¡å›IRèª¬æ˜ä¼š
                </h3>
            </div>
            <div class="summary-value">15æ—¥å¾Œ</div>
            <div class="summary-baseline">2024å¹´Q1æ±ºç®—èª¬æ˜ä¼š</div>
            <div class="summary-progress">
                <div class="progress-bar">
                    <div class="progress-fill" style="width: 65%; background: var(--success);"></div>
                </div>
                <div class="progress-text">
                    <span>æº–å‚™é€²æ—: 65%</span>
                </div>
            </div>
        </div>
    </div>
    
    <!-- æˆ¦ç•¥ã‚«ãƒ†ã‚´ãƒªãƒ¼ã‚»ã‚¯ã‚·ãƒ§ãƒ³ -->
    <div class="strategy-sections">
        <!-- è²¡å‹™ç›®æ¨™ -->
        <div class="strategy-section">
            <div class="section-header">
                <h2 class="section-title">
                    <span class="section-icon">ğŸ’°</span>
                    è²¡å‹™ç›®æ¨™
                </h2>
                <a href="#" class="view-details">è©³ç´°ã‚’è¦‹ã‚‹ â†’</a>
            </div>
            <div class="targets-list">
                <div class="target-item">
                    <div class="target-info">
                        <div class="target-name">
                            å£²ä¸Šé«˜
                            <span class="summary-badge updated">æ›´æ–°</span>
                        </div>
                        <div class="target-metrics">
                            <div class="metric-item">
                                <span class="metric-label">ç›®æ¨™:</span>
                                <span class="metric-value">1,500å„„å††</span>
                            </div>
                            <div class="metric-item">
                                <span class="metric-label">ç¾åœ¨:</span>
                                <span class="metric-value">630å„„å††</span>
                            </div>
                            <div class="metric-item">
                                <span class="metric-label">é€²æ—:</span>
                                <span class="metric-value">42%</span>
                            </div>
                        </div>
                    </div>
                    <div class="target-actions">
                        <button class="target-action">è©³ç´°</button>
                        <button class="target-action">
                            è³ªå• <span class="questions-indicator">8</span>
                        </button>
                    </div>
                </div>
                
                <div class="target-item">
                    <div class="target-info">
                        <div class="target-name">å–¶æ¥­åˆ©ç›Šç‡</div>
                        <div class="target-metrics">
                            <div class="metric-item">
                                <span class="metric-label">ç›®æ¨™:</span>
                                <span class="metric-value">15.0%</span>
                            </div>
                            <div class="metric-item">
                                <span class="metric-label">ç¾åœ¨:</span>
                                <span class="metric-value">13.8%</span>
                            </div>
                            <div class="metric-item">
                                <span class="metric-label">é€²æ—:</span>
                                <span class="metric-value">65%</span>
                            </div>
                        </div>
                    </div>
                    <div class="target-actions">
                        <button class="target-action">è©³ç´°</button>
                        <button class="target-action">è³ªå•</button>
                    </div>
                </div>
                
                <div class="target-item">
                    <div class="target-info">
                        <div class="target-name">ROE</div>
                        <div class="target-metrics">
                            <div class="metric-item">
                                <span class="metric-label">ç›®æ¨™:</span>
                                <span class="metric-value">12.0%</span>
                            </div>
                            <div class="metric-item">
                                <span class="metric-label">ç¾åœ¨:</span>
                                <span class="metric-value">9.2%</span>
                            </div>
                            <div class="metric-item">
                                <span class="metric-label">é€²æ—:</span>
                                <span class="metric-value">35%</span>
                            </div>
                        </div>
                    </div>
                    <div class="target-actions">
                        <button class="target-action">è©³ç´°</button>
                        <button class="target-action">
                            è³ªå• <span class="questions-indicator">3</span>
                        </button>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- æˆé•·æˆ¦ç•¥ -->
        <div class="strategy-section">
            <div class="section-header">
                <h2 class="section-title">
                    <span class="section-icon">ğŸš€</span>
                    æˆé•·æˆ¦ç•¥
                </h2>
                <a href="#" class="view-details">è©³ç´°ã‚’è¦‹ã‚‹ â†’</a>
            </div>
            <div class="targets-list">
                <div class="target-item">
                    <div class="target-info">
                        <div class="target-name">
                            æµ·å¤–å£²ä¸Šæ¯”ç‡
                            <span class="summary-badge updated">æ›´æ–°</span>
                        </div>
                        <div class="target-metrics">
                            <div class="metric-item">
                                <span class="metric-label">ç›®æ¨™:</span>
                                <span class="metric-value">38%</span>
                            </div>
                            <div class="metric-item">
                                <span class="metric-label">ç¾åœ¨:</span>
                                <span class="metric-value">28%</span>
                            </div>
                            <div class="metric-item">
                                <span class="metric-label">é€²æ—:</span>
                                <span class="metric-value">58%</span>
                            </div>
                        </div>
                    </div>
                    <div class="target-actions">
                        <button class="target-action">è©³ç´°</button>
                        <button class="target-action">
                            è³ªå• <span class="questions-indicator">5</span>
                        </button>
                    </div>
                </div>
                
                <div class="target-item">
                    <div class="target-info">
                        <div class="target-name">ã‚¢ã‚¸ã‚¢å¸‚å ´å±•é–‹</div>
                        <div class="target-metrics">
                            <div class="metric-item">
                                <span class="metric-label">ç›®æ¨™:</span>
                                <span class="metric-value">5ã‚«å›½</span>
                            </div>
                            <div class="metric-item">
                                <span class="metric-label">ç¾åœ¨:</span>
                                <span class="metric-value">2ã‚«å›½</span>
                            </div>
                            <div class="metric-item">
                                <span class="metric-label">é€²æ—:</span>
                                <span class="metric-value">40%</span>
                            </div>
                        </div>
                    </div>
                    <div class="target-actions">
                        <button class="target-action">è©³ç´°</button>
                        <button class="target-action">
                            è³ªå• <span class="questions-indicator">18</span>
                        </button>
                    </div>
                </div>
                
                <div class="target-item">
                    <div class="target-info">
                        <div class="target-name">æ–°è¦äº‹æ¥­å£²ä¸Š</div>
                        <div class="target-metrics">
                            <div class="metric-item">
                                <span class="metric-label">ç›®æ¨™:</span>
                                <span class="metric-value">200å„„å††</span>
                            </div>
                            <div class="metric-item">
                                <span class="metric-label">ç¾åœ¨:</span>
                                <span class="metric-value">45å„„å††</span>
                            </div>
                            <div class="metric-item">
                                <span class="metric-label">é€²æ—:</span>
                                <span class="metric-value">23%</span>
                            </div>
                        </div>
                    </div>
                    <div class="target-actions">
                        <button class="target-action">è©³ç´°</button>
                        <button class="target-action">è³ªå•</button>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- ESGç›®æ¨™ -->
        <div class="strategy-section">
            <div class="section-header">
                <h2 class="section-title">
                    <span class="section-icon">ğŸŒ±</span>
                    ESGç›®æ¨™
                </h2>
                <a href="#" class="view-details">è©³ç´°ã‚’è¦‹ã‚‹ â†’</a>
            </div>
            <div class="targets-list">
                <div class="target-item">
                    <div class="target-info">
                        <div class="target-name">CO2å‰Šæ¸›ç‡</div>
                        <div class="target-metrics">
                            <div class="metric-item">
                                <span class="metric-label">ç›®æ¨™:</span>
                                <span class="metric-value">-50%</span>
                            </div>
                            <div class="metric-item">
                                <span class="metric-label">ç¾åœ¨:</span>
                                <span class="metric-value">-28%</span>
                            </div>
                            <div class="metric-item">
                                <span class="metric-label">é€²æ—:</span>
                                <span class="metric-value">56%</span>
                            </div>
                        </div>
                    </div>
                    <div class="target-actions">
                        <button class="target-action">è©³ç´°</button>
                        <button class="target-action">
                            è³ªå• <span class="questions-indicator">7</span>
                        </button>
                    </div>
                </div>
                
                <div class="target-item">
                    <div class="target-info">
                        <div class="target-name">å¥³æ€§ç®¡ç†è·æ¯”ç‡</div>
                        <div class="target-metrics">
                            <div class="metric-item">
                                <span class="metric-label">ç›®æ¨™:</span>
                                <span class="metric-value">30%</span>
                            </div>
                            <div class="metric-item">
                                <span class="metric-label">ç¾åœ¨:</span>
                                <span class="metric-value">18%</span>
                            </div>
                            <div class="metric-item">
                                <span class="metric-label">é€²æ—:</span>
                                <span class="metric-value">45%</span>
                            </div>
                        </div>
                    </div>
                    <div class="target-actions">
                        <button class="target-action">è©³ç´°</button>
                        <button class="target-action">
                            è³ªå• <span class="questions-indicator">2</span>
                        </button>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- ãƒ‡ã‚¸ã‚¿ãƒ«æˆ¦ç•¥ -->
        <div class="strategy-section">
            <div class="section-header">
                <h2 class="section-title">
                    <span class="section-icon">ğŸ’»</span>
                    ãƒ‡ã‚¸ã‚¿ãƒ«æˆ¦ç•¥
                </h2>
                <a href="#" class="view-details">è©³ç´°ã‚’è¦‹ã‚‹ â†’</a>
            </div>
            <div class="targets-list">
                <div class="target-item">
                    <div class="target-info">
                        <div class="target-name">
                            DXæŠ•è³‡é¡
                            <span class="summary-badge updated">æ›´æ–°</span>
                        </div>
                        <div class="target-metrics">
                            <div class="metric-item">
                                <span class="metric-label">ç›®æ¨™:</span>
                                <span class="metric-value">320å„„å††</span>
                            </div>
                            <div class="metric-item">
                                <span class="metric-label">ç¾åœ¨:</span>
                                <span class="metric-value">112å„„å††</span>
                            </div>
                            <div class="metric-item">
                                <span class="metric-label">é€²æ—:</span>
                                <span class="metric-value">35%</span>
                            </div>
                        </div>
                    </div>
                    <div class="target-actions">
                        <button class="target-action">è©³ç´°</button>
                        <button class="target-action">
                            è³ªå• <span class="questions-indicator">12</span>
                        </button>
                    </div>
                </div>
                
                <div class="target-item">
                    <div class="target-info">
                        <div class="target-name">
                            AIéœ€è¦äºˆæ¸¬ã‚·ã‚¹ãƒ†ãƒ 
                            <span class="summary-badge new">æ–°è¦</span>
                        </div>
                        <div class="target-metrics">
                            <div class="metric-item">
                                <span class="metric-label">é–‹å§‹:</span>
                                <span class="metric-value">2024 Q2</span>
                            </div>
                            <div class="metric-item">
                                <span class="metric-label">åŠ¹æœ:</span>
                                <span class="metric-value">åˆ©ç›Šç‡+0.5pt</span>
                            </div>
                            <div class="metric-item">
                                <span class="metric-label">é€²æ—:</span>
                                <span class="metric-value">0%</span>
                            </div>
                        </div>
                    </div>
                    <div class="target-actions">
                        <button class="target-action">è©³ç´°</button>
                        <button class="target-action">è³ªå•</button>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- AIã‚¤ãƒ³ã‚µã‚¤ãƒˆã‚»ã‚¯ã‚·ãƒ§ãƒ³ -->
    <div class="insights-section">
        <div class="section-header">
            <h2 class="section-title">
                <span class="section-icon">ğŸ¤–</span>
                AIã«ã‚ˆã‚‹æˆ¦ç•¥ã‚¤ãƒ³ã‚µã‚¤ãƒˆ
            </h2>
        </div>
        <div class="insights-grid">
            <div class="insight-card">
                <span class="insight-type">
                    <svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7h8m0 0v8m0-8l-8 8-4-4-6 6" />
                    </svg>
                    ç›¸é–¢åˆ†æ
                </span>
                <h3 class="insight-title">æµ·å¤–å±•é–‹ã¨å£²ä¸Šæˆé•·ã®ç›¸é–¢</h3>
                <p class="insight-description">
                    æµ·å¤–å£²ä¸Šæ¯”ç‡ã®ä¸Šæ˜‡ãŒå…¨ä½“å£²ä¸Šç›®æ¨™é”æˆã®ä¸»è¦å› ã¨ãªã£ã¦ã„ã¾ã™ã€‚ç‰¹ã«ã‚¢ã‚¸ã‚¢å¸‚å ´ã®æˆé•·ãŒäºˆæƒ³ã‚’ä¸Šå›ã£ã¦ãŠã‚Šã€ãƒªã‚½ãƒ¼ã‚¹ã®è¿½åŠ é…åˆ†ã‚’æ¤œè¨ã™ã¹ãã§ã™ã€‚
                </p>
            </div>
            
            <div class="insight-card">
                <span class="insight-type warning">
                    <svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z" />
                    </svg>
                    æ³¨æ„äº‹é …
                </span>
                <h3 class="insight-title">DXæŠ•è³‡ã®ROIæ¸¬å®š</h3>
                <p class="insight-description">
                    å¢—é¡ã•ã‚ŒãŸ20å„„å††ã®æŠ•è³‡å¯¾åŠ¹æœãŒä¸æ˜ç¢ºã§ã™ã€‚å…·ä½“çš„ãªKPIã¨æ¸¬å®šæ–¹æ³•ã®è¨­å®šãŒå¿…è¦ã§ã™ã€‚æŠ•è³‡å®¶ã‹ã‚‰ã®è³ªå•ã‚‚å¢—åŠ å‚¾å‘ã«ã‚ã‚Šã¾ã™ã€‚
                </p>
            </div>
            
            <div class="insight-card">
                <span class="insight-type success">
                    <svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
                    </svg>
                    æ©Ÿä¼š
                </span>
                <h3 class="insight-title">ESGæŠ•è³‡å®¶ã®é–¢å¿ƒå¢—åŠ </h3>
                <p class="insight-description">
                    CO2å‰Šæ¸›ã¸ã®å–ã‚Šçµ„ã¿ã«å¯¾ã™ã‚‹æŠ•è³‡å®¶ã®é–¢å¿ƒãŒé«˜ã¾ã£ã¦ã„ã¾ã™ã€‚è©³ç´°ãªé€²æ—ãƒ¬ãƒãƒ¼ãƒˆã®é–‹ç¤ºã«ã‚ˆã‚Šã€ESGæŠ•è³‡å®¶ã¸ã®ã‚¢ãƒ”ãƒ¼ãƒ«ãŒå¯èƒ½ã§ã™ã€‚
                </p>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script>
    // ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã®åˆæœŸåŒ–
    document.addEventListener('DOMContentLoaded', function() {
        initializeDashboard();
        loadLatestData();
        setupEventListeners();
    });
    
    // ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã®åˆæœŸåŒ–
    function initializeDashboard() {
        // ãƒ—ãƒ­ã‚°ãƒ¬ã‚¹ãƒãƒ¼ã®ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³
        animateProgressBars();
        
        // æ›´æ–°ãƒãƒƒã‚¸ã®ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³
        animateUpdateBadges();
    }
    
    // æœ€æ–°ãƒ‡ãƒ¼ã‚¿ã®èª­ã¿è¾¼ã¿
    function loadLatestData() {
        // å®Ÿéš›ã®å®Ÿè£…ã§ã¯ã€APIã‹ã‚‰æœ€æ–°ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—
        console.log('æœ€æ–°ãƒ‡ãƒ¼ã‚¿ã‚’èª­ã¿è¾¼ã¿ä¸­...');
    }
    
    // ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼ã®è¨­å®š
    function setupEventListeners() {
        // ç›®æ¨™ã‚¢ã‚¤ãƒ†ãƒ ã®ã‚¯ãƒªãƒƒã‚¯ã‚¤ãƒ™ãƒ³ãƒˆ
        document.querySelectorAll('.target-item').forEach(item => {
            item.addEventListener('click', function(e) {
                if (!e.target.classList.contains('target-action')) {
                    showTargetDetail(this);
                }
            });
        });
    }
    
    // ãƒ—ãƒ­ã‚°ãƒ¬ã‚¹ãƒãƒ¼ã®ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³
    function animateProgressBars() {
        const progressBars = document.querySelectorAll('.progress-fill');
        progressBars.forEach((bar, index) => {
            setTimeout(() => {
                bar.style.width = bar.style.width || '0%';
            }, index * 100);
        });
    }
    
    // æ›´æ–°ãƒãƒƒã‚¸ã®ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³
    function animateUpdateBadges() {
        const badges = document.querySelectorAll('.summary-badge.updated, .summary-badge.new');
        badges.forEach(badge => {
            badge.style.animation = 'pulse 2s infinite';
        });
    }
    
    // æˆ¦ç•¥ã®æ›´æ–°
    function updateStrategies() {
        showNotification('æœ€æ–°ã®æ±ºç®—ãƒ‡ãƒ¼ã‚¿ã‹ã‚‰æˆ¦ç•¥æŒ‡æ¨™ã‚’æ›´æ–°ã—ã¦ã„ã¾ã™...', 'info');
        
        // ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°è¡¨ç¤º
        const button = event.currentTarget;
        button.disabled = true;
        button.innerHTML = `
            <svg class="w-4 h-4 animate-spin" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15" />
            </svg>
            æ›´æ–°ä¸­...
        `;
        
        // å®Ÿéš›ã®å‡¦ç†ã‚’ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ãƒˆ
        setTimeout(() => {
            button.disabled = false;
            button.innerHTML = `
                <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15" />
                </svg>
                æœ€æ–°ãƒ‡ãƒ¼ã‚¿ã§æ›´æ–°
            `;
            showNotification('æˆ¦ç•¥æŒ‡æ¨™ã‚’æœ€æ–°ãƒ‡ãƒ¼ã‚¿ã§æ›´æ–°ã—ã¾ã—ãŸ', 'success');
            
            // æ›´æ–°ã•ã‚ŒãŸã‚¢ã‚¤ãƒ†ãƒ ã‚’ãƒã‚¤ãƒ©ã‚¤ãƒˆ
            const updatedItems = document.querySelectorAll('.summary-badge.updated');
            updatedItems.forEach(item => {
                item.style.animation = 'none';
                setTimeout(() => {
                    item.style.animation = 'pulse 2s infinite';
                }, 100);
            });
        }, 3000);
    }
    
    // ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã®ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ
    function exportDashboard() {
        showModal({
            title: 'ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã®ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ',
            content: `
                <div class="space-y-4">
                    <p class="text-sm text-gray-600">
                        æˆ¦ç•¥ç®¡ç†ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã‚’ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆã—ã¾ã™ã€‚
                    </p>
                    
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆå½¢å¼</label>
                        <select class="w-full px-3 py-2 border border-gray-300 rounded-lg">
                            <option>PDFï¼ˆå½¹å“¡ä¼šå ±å‘Šç”¨ï¼‰</option>
                            <option>Excelï¼ˆè©³ç´°åˆ†æç”¨ï¼‰</option>
                            <option>PowerPointï¼ˆãƒ—ãƒ¬ã‚¼ãƒ³ç”¨ï¼‰</option>
                        </select>
                    </div>
                    
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">å«ã‚ã‚‹å†…å®¹</label>
                        <div class="space-y-2">
                            <label class="flex items-center">
                                <input type="checkbox" checked class="mr-2">
                                <span class="text-sm">ã‚µãƒãƒªãƒ¼æƒ…å ±</span>
                            </label>
                            <label class="flex items-center">
                                <input type="checkbox" checked class="mr-2">
                                <span class="text-sm">å„æˆ¦ç•¥ã®è©³ç´°</span>
                            </label>
                            <label class="flex items-center">
                                <input type="checkbox" checked class="mr-2">
                                <span class="text-sm">æŠ•è³‡å®¶è³ªå•åˆ†æ</span>
                            </label>
                            <label class="flex items-center">
                                <input type="checkbox" class="mr-2">
                                <span class="text-sm">AIã‚¤ãƒ³ã‚µã‚¤ãƒˆ</span>
                            </label>
                        </div>
                    </div>
                </div>
            `,
            confirmText: 'ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ',
            onConfirm: () => {
                showNotification('ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã‚’ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆä¸­...', 'info');
                setTimeout(() => {
                    showNotification('ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã®ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆãŒå®Œäº†ã—ã¾ã—ãŸ', 'success');
                }, 2000);
            }
        });
    }
    
    // ç›®æ¨™ã®è©³ç´°è¡¨ç¤º
    function showTargetDetail(targetElement) {
        const targetName = targetElement.querySelector('.target-name').textContent.trim();
        
        showModal({
            title: `${targetName}ã®è©³ç´°`,
            content: `
                <div class="space-y-4">
                    <div class="bg-gray-50 rounded-lg p-4">
                        <h4 class="font-medium text-gray-900 mb-2">é€²æ—çŠ¶æ³</h4>
                        <div class="space-y-2">
                            <div class="flex justify-between">
                                <span class="text-sm text-gray-600">Q1å®Ÿç¸¾</span>
                                <span class="text-sm font-medium">è¨ˆç”»æ¯” 105%</span>
                            </div>
                            <div class="flex justify-between">
                                <span class="text-sm text-gray-600">å‰å¹´åŒæœŸæ¯”</span>
                                <span class="text-sm font-medium">+12.3%</span>
                            </div>
                        </div>
                    </div>
                    
                    <div>
                        <h4 class="font-medium text-gray-900 mb-2">ä¸»ãªå¤‰æ›´ç‚¹</h4>
                        <ul class="text-sm text-gray-600 space-y-1">
                            <li>â€¢ æµ·å¤–å±•é–‹ã®åŠ é€Ÿã«ã‚ˆã‚‹ä¸Šæ–¹ä¿®æ­£</li>
                            <li>â€¢ ç‚ºæ›¿å½±éŸ¿ï¼ˆå††å®‰ï¼‰ã«ã‚ˆã‚‹ãƒ—ãƒ©ã‚¹åŠ¹æœ</li>
                            <li>â€¢ æ–°è£½å“ã®å¥½èª¿ãªç«‹ã¡ä¸ŠãŒã‚Š</li>
                        </ul>
                    </div>
                    
                    <div>
                        <h4 class="font-medium text-gray-900 mb-2">æŠ•è³‡å®¶ã‹ã‚‰ã®ä¸»ãªè³ªå•</h4>
                        <ul class="text-sm text-gray-600 space-y-1">
                            <li>â€¢ æŒç¶šå¯èƒ½æ€§ã«ã¤ã„ã¦ã®è©³ç´°èª¬æ˜</li>
                            <li>â€¢ ç«¶åˆä»–ç¤¾ã¨ã®å·®åˆ¥åŒ–è¦å› </li>
                            <li>â€¢ ãƒªã‚¹ã‚¯è¦å› ã¨ãã®å¯¾ç­–</li>
                        </ul>
                    </div>
                </div>
            `,
            confirmText: 'é–‰ã˜ã‚‹'
        });
    }
    
    // é€šçŸ¥è¡¨ç¤º
    function showNotification(message, type = 'info') {
        if (window.parent && window.parent.showNotification) {
            window.parent.showNotification(message, type);
        } else {
            console.log(`${type}: ${message}`);
        }
    }
    
    // ãƒ¢ãƒ¼ãƒ€ãƒ«è¡¨ç¤º
    function showModal(options) {
        if (window.parent && window.parent.showModal) {
            window.parent.showModal(options);
        } else {
            if (confirm(options.content)) {
                options.onConfirm && options.onConfirm();
            }
        }
    }
    
    // ãƒ‘ãƒ«ã‚¹ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ç”¨ã®ã‚¹ã‚¿ã‚¤ãƒ«
    const style = document.createElement('style');
    style.textContent = `
        @keyframes pulse {
            0%, 100% {
                opacity: 1;
                transform: scale(1);
            }
            50% {
                opacity: 0.8;
                transform: scale(1.05);
            }
        }
    `;
    document.head.appendChild(style);
</script>
{% endblock %}