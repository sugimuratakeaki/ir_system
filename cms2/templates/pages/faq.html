{% extends "base.html" %}

{% block title %}FAQç®¡ç† - {{ super() }}{% endblock %}
{% block page_icon %}â“{% endblock %}
{% block page_title %}FAQç®¡ç†{% endblock %}
{% block breadcrumb_current %}FAQç®¡ç†{% endblock %}

{% block content %}
<!-- ãƒšãƒ¼ã‚¸ãƒ˜ãƒƒãƒ€ãƒ¼ -->
<div class="page-header">
    <div class="page-header-content">
        <p class="page-description">AIã«ã‚ˆã‚‹è‡ªå‹•FAQç”Ÿæˆã¨ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ </p>
    </div>
    <div class="page-header-actions">
        <button class="btn btn-secondary" onclick="KAGAMI.faq.showLanguageSettings()">
            <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                <circle cx="8" cy="8" r="7" stroke="currentColor" stroke-width="1.5"/>
                <path d="M8 1C8 1 5.5 4 5.5 8C5.5 12 8 15 8 15C8 15 10.5 12 10.5 8C10.5 4 8 1 8 1Z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                <path d="M1 8H15" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
            è¨€èªè¨­å®š
        </button>
        <button class="btn btn-secondary" onclick="KAGAMI.faq.trainModel()">
            <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M4 8V13.3333C4 13.6869 4.14048 14.0261 4.39052 14.2761C4.64057 14.5262 4.97971 14.6667 5.33333 14.6667H10.6667C11.0203 14.6667 11.3594 14.5262 11.6095 14.2761C11.8595 14.0261 12 13.6869 12 13.3333V8M10 4L8 2M8 2L6 4M8 2V10" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
            AIãƒ¢ãƒ‡ãƒ«æ›´æ–°
        </button>
        <button class="btn btn-primary" onclick="KAGAMI.faq.showAddModal()">
            <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M8 3.33334V12.6667M3.33333 8H12.6667" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
            FAQè¿½åŠ 
        </button>
    </div>
</div>

<!-- AIçµ±è¨ˆãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ -->
<div class="ai-stats-grid">
    <div class="ai-stat-card">
        <div class="ai-stat-header">
            <span class="ai-stat-icon">ğŸ§ </span>
            <span class="ai-stat-label">AIç”ŸæˆFAQæ•°</span>
        </div>
        <div class="ai-stat-value">1,234</div>
        <div class="ai-stat-chart">
            <canvas id="aiGeneratedChart" width="100" height="40"></canvas>
        </div>
    </div>
    
    <div class="ai-stat-card">
        <div class="ai-stat-header">
            <span class="ai-stat-icon">âœ…</span>
            <span class="ai-stat-label">å›ç­”ç²¾åº¦</span>
        </div>
        <div class="ai-stat-value">94.7%</div>
        <div class="ai-progress">
            <div class="progress-bar">
                <div class="progress-fill" style="width: 94.7%"></div>
            </div>
        </div>
    </div>
    
    <div class="ai-stat-card">
        <div class="ai-stat-header">
            <span class="ai-stat-icon">ğŸ‘</span>
            <span class="ai-stat-label">æº€è¶³åº¦ã‚¹ã‚³ã‚¢</span>
        </div>
        <div class="ai-stat-value">4.8<span class="ai-stat-unit">/5</span></div>
        <div class="ai-rating">
            <span class="star filled">â˜…</span>
            <span class="star filled">â˜…</span>
            <span class="star filled">â˜…</span>
            <span class="star filled">â˜…</span>
            <span class="star partial">â˜…</span>
        </div>
    </div>
    
    <div class="ai-stat-card">
        <div class="ai-stat-header">
            <span class="ai-stat-icon">âš¡</span>
            <span class="ai-stat-label">å¹³å‡å¿œç­”æ™‚é–“</span>
        </div>
        <div class="ai-stat-value">0.8<span class="ai-stat-unit">ç§’</span></div>
        <div class="ai-stat-comparison">
            <span class="comparison-label">å‰æœˆæ¯”</span>
            <span class="comparison-value positive">-0.2ç§’</span>
        </div>
    </div>
</div>

<!-- è¨€èªé¸æŠ -->
<div class="language-selector">
    <div class="language-tabs">
        <button class="language-tab active" data-lang="ja">
            <span class="flag">ğŸ‡¯ğŸ‡µ</span>
            æ—¥æœ¬èª
            <span class="lang-count">2,456</span>
        </button>
        <button class="language-tab" data-lang="en">
            <span class="flag">ğŸ‡ºğŸ‡¸</span>
            English
            <span class="lang-count">1,892</span>
        </button>
        <button class="language-tab" data-lang="zh">
            <span class="flag">ğŸ‡¨ğŸ‡³</span>
            ä¸­æ–‡
            <span class="lang-count">856</span>
        </button>
        <button class="language-tab" data-lang="ko">
            <span class="flag">ğŸ‡°ğŸ‡·</span>
            í•œêµ­ì–´
            <span class="lang-count">423</span>
        </button>
    </div>
    <div class="language-actions">
        <button class="btn btn-sm btn-outline" onclick="KAGAMI.faq.bulkTranslate()">
            <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
                <path d="M7.293 2.707A1 1 0 0 1 8 2.414V7h4.586a1 1 0 0 1 .707 1.707l-5 5a1 1 0 0 1-1.414 0l-5-5A1 1 0 0 1 2.586 7H7V2.414a1 1 0 0 1 .293-.707z" stroke="currentColor" stroke-width="1.5"/>
            </svg>
            ä¸€æ‹¬ç¿»è¨³
        </button>
    </div>
</div>

<!-- FAQã‚«ãƒ†ã‚´ãƒªãƒ¼ã‚¿ãƒ– -->
<div class="faq-tabs">
    <button class="faq-tab active" data-category="all">
        ã™ã¹ã¦
        <span class="tab-count">2,456</span>
    </button>
    <button class="faq-tab" data-category="financial">
        è²¡å‹™ãƒ»æ¥­ç¸¾
        <span class="tab-count">823</span>
    </button>
    <button class="faq-tab" data-category="strategy">
        çµŒå–¶æˆ¦ç•¥
        <span class="tab-count">456</span>
    </button>
    <button class="faq-tab" data-category="esg">
        ESGãƒ»ã‚µã‚¹ãƒ†ãƒŠãƒ“ãƒªãƒ†ã‚£
        <span class="tab-count">387</span>
    </button>
    <button class="faq-tab" data-category="governance">
        ã‚¬ãƒãƒŠãƒ³ã‚¹
        <span class="tab-count">290</span>
    </button>
    <button class="faq-tab" data-category="other">
        ãã®ä»–
        <span class="tab-count">500</span>
    </button>
</div>

<!-- ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ã¨ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ -->
<div class="faq-controls">
    <div class="faq-filters">
        <div class="search-box">
            <svg class="search-icon" width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M17.5 17.5L13.875 13.875M15.8333 9.16667C15.8333 12.8486 12.8486 15.8333 9.16667 15.8333C5.48477 15.8333 2.5 12.8486 2.5 9.16667C2.5 5.48477 5.48477 2.5 9.16667 2.5C12.8486 2.5 15.8333 5.48477 15.8333 9.16667Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
            <input type="search" class="search-input" placeholder="FAQã‚’æ¤œç´¢..." id="faqSearch">
        </div>
        
        <select class="filter-select" id="statusFilter">
            <option value="">ã™ã¹ã¦ã®ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹</option>
            <option value="published">å…¬é–‹ä¸­</option>
            <option value="draft">ä¸‹æ›¸ã</option>
            <option value="review">ãƒ¬ãƒ“ãƒ¥ãƒ¼ä¸­</option>
            <option value="archived">ã‚¢ãƒ¼ã‚«ã‚¤ãƒ–</option>
        </select>
        
        <select class="filter-select" id="sourceFilter">
            <option value="">ã™ã¹ã¦ã®ã‚½ãƒ¼ã‚¹</option>
            <option value="ai">AIç”Ÿæˆ</option>
            <option value="manual">æ‰‹å‹•ä½œæˆ</option>
            <option value="meeting">è­°äº‹éŒ²ã‹ã‚‰ç”Ÿæˆ</option>
        </select>
    </div>
    
    <div class="bulk-actions">
        <button class="btn btn-sm btn-outline" onclick="KAGAMI.faq.bulkPublish()">
            ä¸€æ‹¬å…¬é–‹
        </button>
        <button class="btn btn-sm btn-outline" onclick="KAGAMI.faq.bulkArchive()">
            ä¸€æ‹¬ã‚¢ãƒ¼ã‚«ã‚¤ãƒ–
        </button>
    </div>
</div>

<!-- FAQä¸€è¦§ -->
<div class="faq-list">
    <!-- FAQã‚¢ã‚¤ãƒ†ãƒ  -->
    <div class="faq-item">
        <div class="faq-item-header">
            <div class="faq-item-info">
                <h3 class="faq-question">2024å¹´åº¦ã®å–¶æ¥­åˆ©ç›Šç‡ã®ç›®æ¨™ã¯ã©ã®ç¨‹åº¦ã§ã™ã‹ï¼Ÿ</h3>
                <div class="faq-meta">
                    <span class="faq-category">è²¡å‹™ãƒ»æ¥­ç¸¾</span>
                    <span class="faq-source ai">AIç”Ÿæˆ</span>
                    <span class="faq-date">2024/03/15 14:30</span>
                    <span class="faq-views">é–²è¦§æ•°: 1,234</span>
                </div>
            </div>
            <div class="faq-item-actions">
                <div class="translation-status">
                    <span class="translation-badge complete">ğŸ‡ºğŸ‡¸ ç¿»è¨³æ¸ˆ</span>
                    <span class="translation-badge pending">ğŸ‡¨ğŸ‡³ æœªç¿»è¨³</span>
                    <span class="translation-badge pending">ğŸ‡°ğŸ‡· æœªç¿»è¨³</span>
                </div>
                <span class="faq-status published">å…¬é–‹ä¸­</span>
                <button class="action-btn" onclick="KAGAMI.faq.toggleExpand(this)">
                    <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M5 7.5L10 12.5L15 7.5" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                </button>
            </div>
        </div>
        
        <div class="faq-item-content" style="display: none;">
            <div class="faq-answer">
                <p>2024å¹´åº¦ã®å–¶æ¥­åˆ©ç›Šç‡ç›®æ¨™ã¯15%ä»¥ä¸Šã‚’è¨­å®šã—ã¦ã„ã¾ã™ã€‚ã“ã‚Œã¯å‰å¹´åº¦å®Ÿç¸¾ã®13.8%ã‹ã‚‰ç´„1.2ãƒã‚¤ãƒ³ãƒˆã®æ”¹å–„ã‚’ç›®æŒ‡ã™ã‚‚ã®ã§ã€ä¸»ã«ä»¥ä¸‹ã®æ–½ç­–ã«ã‚ˆã‚Šé”æˆã‚’è¦‹è¾¼ã‚“ã§ã„ã¾ã™ï¼š</p>
                <ul>
                    <li>ç”Ÿç”£åŠ¹ç‡ã®å‘ä¸Šã«ã‚ˆã‚‹åŸä¾¡ç‡ã®æ”¹å–„ï¼ˆ0.5ãƒã‚¤ãƒ³ãƒˆï¼‰</li>
                    <li>é«˜ä»˜åŠ ä¾¡å€¤è£½å“ã¸ã®ã‚·ãƒ•ãƒˆï¼ˆ0.4ãƒã‚¤ãƒ³ãƒˆï¼‰</li>
                    <li>è²©ç®¡è²»ã®æœ€é©åŒ–ï¼ˆ0.3ãƒã‚¤ãƒ³ãƒˆï¼‰</li>
                </ul>
            </div>
            
            <div class="faq-ai-info">
                <div class="ai-confidence">
                    <span class="confidence-label">AIä¿¡é ¼åº¦:</span>
                    <div class="confidence-bar">
                        <div class="confidence-fill" style="width: 92%"></div>
                    </div>
                    <span class="confidence-value">92%</span>
                </div>
                <div class="ai-sources">
                    <span class="sources-label">å‚ç…§å…ƒ:</span>
                    <a href="#" class="source-link">2024å¹´3æœˆæœŸæ±ºç®—èª¬æ˜ä¼šè³‡æ–™ P.12</a>
                    <a href="#" class="source-link">ä¸­æœŸçµŒå–¶è¨ˆç”» P.8</a>
                </div>
            </div>
            
            <!-- å¤šè¨€èªç®¡ç† -->
            <div class="language-management">
                <div class="language-versions">
                    <div class="language-version">
                        <span class="lang-label">ğŸ‡ºğŸ‡¸ English</span>
                        <span class="lang-status complete">ç¿»è¨³æ¸ˆ</span>
                        <button class="btn btn-xs btn-outline" onclick="KAGAMI.faq.editTranslation(1, 'en')">ç·¨é›†</button>
                    </div>
                    <div class="language-version">
                        <span class="lang-label">ğŸ‡¨ğŸ‡³ ä¸­æ–‡</span>
                        <span class="lang-status pending">æœªç¿»è¨³</span>
                        <button class="btn btn-xs btn-primary" onclick="KAGAMI.faq.autoTranslate(1, 'zh')">è‡ªå‹•ç¿»è¨³</button>
                    </div>
                    <div class="language-version">
                        <span class="lang-label">ğŸ‡°ğŸ‡· í•œêµ­ì–´</span>
                        <span class="lang-status pending">æœªç¿»è¨³</span>
                        <button class="btn btn-xs btn-primary" onclick="KAGAMI.faq.autoTranslate(1, 'ko')">è‡ªå‹•ç¿»è¨³</button>
                    </div>
                </div>
            </div>
            
            <div class="faq-actions">
                <button class="btn btn-sm btn-outline" onclick="KAGAMI.faq.edit(1)">
                    <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M11.3333 2C11.5084 1.82491 11.7163 1.68601 11.9451 1.59125C12.1739 1.49649 12.4191 1.44772 12.6667 1.44772C12.9142 1.44772 13.1594 1.49649 13.3882 1.59125C13.617 1.68601 13.8249 1.82491 14 2C14.1751 2.1751 14.314 2.38297 14.4088 2.61178C14.5035 2.84059 14.5523 3.08582 14.5523 3.33333C14.5523 3.58085 14.5035 3.82608 14.4088 4.05489C14.314 4.2837 14.1751 4.49157 14 4.66667L5 13.6667L2 14.6667L3 11.6667L11.3333 2Z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                    ç·¨é›†
                </button>
                <button class="btn btn-sm btn-outline" onclick="KAGAMI.faq.improve(1)">
                    <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M8 2L9.73205 6.47109L14.596 6.87336L11.0359 10.0289L12.1353 14.7933L8 12.3L3.86474 14.7933L4.96415 10.0289L1.40402 6.87336L6.26795 6.47109L8 2Z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                    AIæ”¹å–„
                </button>
                <button class="btn btn-sm btn-outline danger" onclick="KAGAMI.faq.archive(1)">
                    <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M2 5.33333H14M2 5.33333V13.3333C2 13.6869 2.14048 14.0261 2.39052 14.2761C2.64057 14.5262 2.97971 14.6667 3.33333 14.6667H12.6667C13.0203 14.6667 13.3594 14.5262 13.6095 14.2761C13.8595 14.0261 14 13.6869 14 13.3333V5.33333M4.66667 5.33333V3.33333C4.66667 2.97971 4.80714 2.64057 5.05719 2.39052C5.30724 2.14048 5.64638 2 6 2H10C10.3536 2 10.6928 2.14048 10.9428 2.39052C11.1929 2.64057 11.3333 2.97971 11.3333 3.33333V5.33333" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                    ã‚¢ãƒ¼ã‚«ã‚¤ãƒ–
                </button>
            </div>
        </div>
    </div>
    
    <!-- è¿½åŠ ã®FAQã‚¢ã‚¤ãƒ†ãƒ  -->
    <div class="faq-item">
        <div class="faq-item-header">
            <div class="faq-item-info">
                <h3 class="faq-question">ESGæŠ•è³‡ã«å¯¾ã™ã‚‹å–ã‚Šçµ„ã¿ã«ã¤ã„ã¦æ•™ãˆã¦ãã ã•ã„</h3>
                <div class="faq-meta">
                    <span class="faq-category">ESGãƒ»ã‚µã‚¹ãƒ†ãƒŠãƒ“ãƒªãƒ†ã‚£</span>
                    <span class="faq-source meeting">è­°äº‹éŒ²ã‹ã‚‰ç”Ÿæˆ</span>
                    <span class="faq-date">2024/03/14 10:15</span>
                    <span class="faq-views">é–²è¦§æ•°: 892</span>
                </div>
            </div>
            <div class="faq-item-actions">
                <span class="faq-status review">ãƒ¬ãƒ“ãƒ¥ãƒ¼ä¸­</span>
                <button class="action-btn" onclick="KAGAMI.faq.toggleExpand(this)">
                    <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M5 7.5L10 12.5L15 7.5" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                </button>
            </div>
        </div>
    </div>
    
    <div class="faq-item">
        <div class="faq-item-header">
            <div class="faq-item-info">
                <h3 class="faq-question">é…å½“æ”¿ç­–ã¨æ ªä¸»é‚„å…ƒã®æ–¹é‡ã«ã¤ã„ã¦</h3>
                <div class="faq-meta">
                    <span class="faq-category">è²¡å‹™ãƒ»æ¥­ç¸¾</span>
                    <span class="faq-source manual">æ‰‹å‹•ä½œæˆ</span>
                    <span class="faq-date">2024/03/10 16:45</span>
                    <span class="faq-views">é–²è¦§æ•°: 2,341</span>
                </div>
            </div>
            <div class="faq-item-actions">
                <span class="faq-status published">å…¬é–‹ä¸­</span>
                <button class="action-btn" onclick="KAGAMI.faq.toggleExpand(this)">
                    <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M5 7.5L10 12.5L15 7.5" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                </button>
            </div>
        </div>
    </div>
</div>

<!-- AIææ¡ˆã‚»ã‚¯ã‚·ãƒ§ãƒ³ -->
<div class="ai-suggestions">
    <h2 class="suggestions-title">
        <span class="suggestions-icon">ğŸ’¡</span>
        AIã‹ã‚‰ã®ææ¡ˆ
    </h2>
    <div class="suggestions-list">
        <div class="suggestion-item">
            <div class="suggestion-content">
                <p class="suggestion-text">æœ€è¿‘ã®æŠ•è³‡å®¶é¢è«‡ã§ã€ŒDXæˆ¦ç•¥ã€ã«é–¢ã™ã‚‹è³ªå•ãŒå¢—ãˆã¦ã„ã¾ã™ã€‚FAQã®è¿½åŠ ã‚’æ¨å¥¨ã—ã¾ã™ã€‚</p>
                <div class="suggestion-meta">
                    <span class="suggestion-frequency">éå»7æ—¥é–“ã§12å›è¨€åŠ</span>
                    <span class="suggestion-confidence">æ¨å¥¨åº¦: é«˜</span>
                </div>
            </div>
            <button class="btn btn-sm btn-primary" onclick="KAGAMI.faq.createFromSuggestion(1)">
                FAQä½œæˆ
            </button>
        </div>
        
        <div class="suggestion-item">
            <div class="suggestion-content">
                <p class="suggestion-text">ã€Œ2025å¹´åº¦ã®è¨­å‚™æŠ•è³‡è¨ˆç”»ã€ã®FAQãŒå¤ããªã£ã¦ã„ã¾ã™ã€‚æœ€æ–°æƒ…å ±ã§ã®æ›´æ–°ã‚’æ¨å¥¨ã—ã¾ã™ã€‚</p>
                <div class="suggestion-meta">
                    <span class="suggestion-frequency">FAQ ID: #234</span>
                    <span class="suggestion-confidence">æ¨å¥¨åº¦: ä¸­</span>
                </div>
            </div>
            <button class="btn btn-sm btn-secondary" onclick="KAGAMI.faq.updateSuggestion(234)">
                æ›´æ–°ã™ã‚‹
            </button>
        </div>
    </div>
</div>

<!-- FAQç·¨é›†ãƒ¢ãƒ¼ãƒ€ãƒ« -->
<div class="modal" id="faqEditModal" style="display: none;">
    <div class="modal-content modal-lg">
        <div class="modal-header">
            <h2>FAQç·¨é›†</h2>
            <button class="modal-close" onclick="KAGAMI.faq.closeEditModal()">Ã—</button>
        </div>
        <div class="modal-body">
            <div class="form-group">
                <label for="editQuestion">è³ªå•</label>
                <textarea id="editQuestion" class="form-control" rows="3" placeholder="è³ªå•ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„"></textarea>
            </div>
            <div class="form-group">
                <label for="editAnswer">å›ç­”</label>
                <textarea id="editAnswer" class="form-control" rows="6" placeholder="å›ç­”ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„"></textarea>
            </div>
            <div class="form-group">
                <label for="editCategory">ã‚«ãƒ†ã‚´ãƒª</label>
                <select id="editCategory" class="form-control">
                    <option value="financial">è²¡å‹™ãƒ»æ¥­ç¸¾</option>
                    <option value="strategy">çµŒå–¶æˆ¦ç•¥</option>
                    <option value="esg">ESGãƒ»ã‚µã‚¹ãƒ†ãƒŠãƒ“ãƒªãƒ†ã‚£</option>
                    <option value="governance">ã‚¬ãƒãƒŠãƒ³ã‚¹</option>
                    <option value="other">ãã®ä»–</option>
                </select>
            </div>
            <div class="form-group">
                <label for="editStatus">ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹</label>
                <select id="editStatus" class="form-control">
                    <option value="published">å…¬é–‹ä¸­</option>
                    <option value="draft">ä¸‹æ›¸ã</option>
                    <option value="review">ãƒ¬ãƒ“ãƒ¥ãƒ¼ä¸­</option>
                    <option value="archived">ã‚¢ãƒ¼ã‚«ã‚¤ãƒ–</option>
                </select>
            </div>
        </div>
        <div class="modal-footer">
            <button class="btn btn-secondary" onclick="KAGAMI.faq.closeEditModal()">ã‚­ãƒ£ãƒ³ã‚»ãƒ«</button>
            <button class="btn btn-primary" onclick="KAGAMI.faq.saveEdit()">ä¿å­˜</button>
        </div>
    </div>
</div>

<!-- å¤šè¨€èªè¨­å®šãƒ¢ãƒ¼ãƒ€ãƒ« -->
<div class="modal" id="languageSettingsModal" style="display: none;">
    <div class="modal-content modal-lg">
        <div class="modal-header">
            <h2>å¤šè¨€èªã‚³ãƒ³ãƒ†ãƒ³ãƒ„ç®¡ç†è¨­å®š</h2>
            <button class="modal-close" onclick="KAGAMI.faq.closeLanguageSettings()">Ã—</button>
        </div>
        <div class="modal-body">
            <div class="language-settings-grid">
                <div class="settings-section">
                    <h3>ã‚µãƒãƒ¼ãƒˆè¨€èª</h3>
                    <div class="supported-languages">
                        <div class="language-item">
                            <input type="checkbox" id="lang_ja" checked disabled>
                            <label for="lang_ja">
                                <span class="flag">ğŸ‡¯ğŸ‡µ</span>
                                æ—¥æœ¬èªï¼ˆãƒ—ãƒ©ã‚¤ãƒãƒªï¼‰
                            </label>
                        </div>
                        <div class="language-item">
                            <input type="checkbox" id="lang_en" checked>
                            <label for="lang_en">
                                <span class="flag">ğŸ‡ºğŸ‡¸</span>
                                English
                            </label>
                        </div>
                        <div class="language-item">
                            <input type="checkbox" id="lang_zh" checked>
                            <label for="lang_zh">
                                <span class="flag">ğŸ‡¨ğŸ‡³</span>
                                ä¸­æ–‡
                            </label>
                        </div>
                        <div class="language-item">
                            <input type="checkbox" id="lang_ko" checked>
                            <label for="lang_ko">
                                <span class="flag">ğŸ‡°ğŸ‡·</span>
                                í•œêµ­ì–´
                            </label>
                        </div>
                        <div class="language-item">
                            <input type="checkbox" id="lang_es">
                            <label for="lang_es">
                                <span class="flag">ğŸ‡ªğŸ‡¸</span>
                                EspaÃ±ol
                            </label>
                        </div>
                        <div class="language-item">
                            <input type="checkbox" id="lang_fr">
                            <label for="lang_fr">
                                <span class="flag">ğŸ‡«ğŸ‡·</span>
                                FranÃ§ais
                            </label>
                        </div>
                    </div>
                </div>
                
                <div class="settings-section">
                    <h3>è‡ªå‹•ç¿»è¨³è¨­å®š</h3>
                    <div class="translation-settings">
                        <div class="setting-item">
                            <label class="setting-label">ç¿»è¨³ã‚¨ãƒ³ã‚¸ãƒ³</label>
                            <select class="form-select">
                                <option>Google Translate API</option>
                                <option>DeepL API</option>
                                <option>Microsoft Translator</option>
                            </select>
                        </div>
                        <div class="setting-item">
                            <label class="setting-label">ç¿»è¨³å“è³ª</label>
                            <select class="form-select">
                                <option>é«˜å“è³ªï¼ˆæ‰‹å‹•ãƒ¬ãƒ“ãƒ¥ãƒ¼å¿…é ˆï¼‰</option>
                                <option selected>æ¨™æº–ï¼ˆè‡ªå‹•å…¬é–‹å¯ï¼‰</option>
                                <option>ç°¡æ˜“ï¼ˆãƒ‰ãƒ©ãƒ•ãƒˆã®ã¿ï¼‰</option>
                            </select>
                        </div>
                        <div class="setting-item">
                            <label class="toggle-label">
                                <input type="checkbox" checked>
                                <span class="toggle"></span>
                                æ–°è¦FAQã®è‡ªå‹•ç¿»è¨³
                            </label>
                        </div>
                        <div class="setting-item">
                            <label class="toggle-label">
                                <input type="checkbox">
                                <span class="toggle"></span>
                                æ›´æ–°æ™‚ã®è‡ªå‹•åŒæœŸ
                            </label>
                        </div>
                    </div>
                </div>
                
                <div class="settings-section full-width">
                    <h3>ç¿»è¨³çµ±è¨ˆ</h3>
                    <div class="translation-stats">
                        <div class="stat-item">
                            <div class="stat-value">2,456</div>
                            <div class="stat-label">ç·FAQæ•°</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-value">1,892</div>
                            <div class="stat-label">è‹±èªç¿»è¨³æ¸ˆ</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-value">856</div>
                            <div class="stat-label">ä¸­å›½èªç¿»è¨³æ¸ˆ</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-value">423</div>
                            <div class="stat-label">éŸ“å›½èªç¿»è¨³æ¸ˆ</div>
                        </div>
                    </div>
                    <div class="progress-overview">
                        <div class="progress-item">
                            <div class="progress-header">
                                <span>è‹±èªç¿»è¨³é€²æ—</span>
                                <span>77%</span>
                            </div>
                            <div class="progress-bar">
                                <div class="progress-fill" style="width: 77%"></div>
                            </div>
                        </div>
                        <div class="progress-item">
                            <div class="progress-header">
                                <span>ä¸­å›½èªç¿»è¨³é€²æ—</span>
                                <span>35%</span>
                            </div>
                            <div class="progress-bar">
                                <div class="progress-fill" style="width: 35%"></div>
                            </div>
                        </div>
                        <div class="progress-item">
                            <div class="progress-header">
                                <span>éŸ“å›½èªç¿»è¨³é€²æ—</span>
                                <span>17%</span>
                            </div>
                            <div class="progress-bar">
                                <div class="progress-fill" style="width: 17%"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="modal-footer">
            <button class="btn btn-secondary" onclick="KAGAMI.faq.closeLanguageSettings()">ã‚­ãƒ£ãƒ³ã‚»ãƒ«</button>
            <button class="btn btn-primary" onclick="KAGAMI.faq.saveLanguageSettings()">è¨­å®šã‚’ä¿å­˜</button>
        </div>
    </div>
</div>

<style>
/* ãƒšãƒ¼ã‚¸ãƒ˜ãƒƒãƒ€ãƒ¼ */
.page-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: var(--space-xl);
}

.page-description {
    color: var(--gray-600);
    font-size: var(--text-sm);
}

.page-header-actions {
    display: flex;
    gap: var(--space-sm);
}

/* AIçµ±è¨ˆã‚°ãƒªãƒƒãƒ‰ */
.ai-stats-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
    gap: var(--space-lg);
    margin-bottom: var(--space-xl);
}

.ai-stat-card {
    background: white;
    border-radius: var(--border-radius-lg);
    padding: var(--space-lg);
    border: 1px solid var(--gray-200);
    transition: all var(--transition-fast);
}

.ai-stat-card:hover {
    transform: translateY(-2px);
    box-shadow: var(--shadow-md);
}

.ai-stat-header {
    display: flex;
    align-items: center;
    gap: var(--space-sm);
    margin-bottom: var(--space-md);
}

.ai-stat-icon {
    font-size: 1.5rem;
}

.ai-stat-label {
    font-size: var(--text-sm);
    color: var(--gray-600);
    font-weight: var(--font-medium);
}

.ai-stat-value {
    font-size: var(--text-3xl);
    font-weight: var(--font-bold);
    color: var(--gray-900);
    margin-bottom: var(--space-md);
}

.ai-stat-unit {
    font-size: var(--text-lg);
    font-weight: var(--font-normal);
    color: var(--gray-600);
}

.ai-stat-chart {
    height: 40px;
    position: relative;
}

.ai-progress {
    margin-top: var(--space-sm);
}

.progress-bar {
    height: 8px;
    background: var(--gray-200);
    border-radius: var(--border-radius-full);
    overflow: hidden;
}

.progress-fill {
    height: 100%;
    background: linear-gradient(90deg, var(--accent-teal), var(--info));
    transition: width var(--transition-normal);
}

.ai-rating {
    display: flex;
    gap: 2px;
    font-size: 1.25rem;
}

.star {
    color: var(--gray-300);
}

.star.filled {
    color: #fbbf24;
}

.star.partial {
    background: linear-gradient(90deg, #fbbf24 80%, var(--gray-300) 80%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
}

.ai-stat-comparison {
    display: flex;
    align-items: center;
    gap: var(--space-sm);
    font-size: var(--text-sm);
}

.comparison-label {
    color: var(--gray-600);
}

.comparison-value {
    font-weight: var(--font-medium);
}

.comparison-value.positive {
    color: var(--success);
}

.comparison-value.negative {
    color: var(--error);
}

/* FAQã‚¿ãƒ– */
.faq-tabs {
    display: flex;
    gap: var(--space-xs);
    border-bottom: 2px solid var(--gray-200);
    margin-bottom: var(--space-lg);
    overflow-x: auto;
}

.faq-tab {
    padding: var(--space-sm) var(--space-md);
    background: none;
    border: none;
    border-bottom: 2px solid transparent;
    font-size: var(--text-sm);
    font-weight: var(--font-medium);
    color: var(--gray-600);
    cursor: pointer;
    transition: all var(--transition-fast);
    display: flex;
    align-items: center;
    gap: var(--space-xs);
    white-space: nowrap;
}

.faq-tab:hover {
    color: var(--gray-900);
    background: var(--gray-50);
}

.faq-tab.active {
    color: var(--accent-teal);
    border-bottom-color: var(--accent-teal);
}

.tab-count {
    padding: 2px 8px;
    background: var(--gray-100);
    border-radius: var(--border-radius-full);
    font-size: var(--text-xs);
}

.faq-tab.active .tab-count {
    background: rgba(20, 184, 166, 0.1);
    color: var(--accent-teal);
}

/* FAQã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ« */
.faq-controls {
    display: flex;
    justify-content: space-between;
    align-items: center;
    gap: var(--space-lg);
    margin-bottom: var(--space-lg);
}

.faq-filters {
    display: flex;
    gap: var(--space-md);
    flex: 1;
}

.bulk-actions {
    display: flex;
    gap: var(--space-sm);
}

/* FAQä¸€è¦§ */
.faq-list {
    display: flex;
    flex-direction: column;
    gap: var(--space-md);
    margin-bottom: var(--space-xl);
}

.faq-item {
    background: white;
    border-radius: var(--border-radius-lg);
    border: 1px solid var(--gray-200);
    overflow: hidden;
    transition: all var(--transition-fast);
}

.faq-item:hover {
    border-color: var(--gray-300);
    box-shadow: var(--shadow-sm);
}

.faq-item-header {
    padding: var(--space-lg);
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    gap: var(--space-md);
}

.faq-item-info {
    flex: 1;
}

.faq-question {
    font-size: var(--text-base);
    font-weight: var(--font-semibold);
    color: var(--gray-900);
    margin-bottom: var(--space-sm);
}

.faq-meta {
    display: flex;
    flex-wrap: wrap;
    gap: var(--space-md);
    font-size: var(--text-sm);
    color: var(--gray-600);
}

.faq-category {
    padding: 2px 8px;
    background: var(--gray-100);
    border-radius: var(--border-radius-sm);
    font-size: var(--text-xs);
}

.faq-source {
    display: flex;
    align-items: center;
    gap: var(--space-xs);
}

.faq-source::before {
    content: '';
    width: 6px;
    height: 6px;
    border-radius: 50%;
    background: var(--gray-400);
}

.faq-source.ai::before {
    background: var(--info);
}

.faq-source.meeting::before {
    background: var(--accent-teal);
}

.faq-source.manual::before {
    background: var(--warning);
}

.faq-item-actions {
    display: flex;
    align-items: center;
    gap: var(--space-md);
}

.faq-status {
    padding: var(--space-xs) var(--space-sm);
    border-radius: var(--border-radius-full);
    font-size: var(--text-xs);
    font-weight: var(--font-medium);
}

.faq-status.published {
    background: rgba(16, 185, 129, 0.1);
    color: var(--success);
}

.faq-status.draft {
    background: rgba(107, 114, 128, 0.1);
    color: var(--gray-600);
}

.faq-status.review {
    background: rgba(245, 158, 11, 0.1);
    color: var(--warning);
}

.action-btn {
    width: 32px;
    height: 32px;
    display: flex;
    align-items: center;
    justify-content: center;
    background: transparent;
    border: none;
    border-radius: var(--border-radius-md);
    color: var(--gray-600);
    cursor: pointer;
    transition: all var(--transition-fast);
}

.action-btn:hover {
    background: var(--gray-100);
    color: var(--gray-900);
}

.faq-item-content {
    padding: 0 var(--space-lg) var(--space-lg);
    border-top: 1px solid var(--gray-200);
}

.faq-answer {
    padding: var(--space-lg) 0;
    color: var(--gray-700);
    line-height: var(--leading-relaxed);
}

.faq-answer ul {
    margin-top: var(--space-sm);
    padding-left: var(--space-lg);
}

.faq-ai-info {
    display: flex;
    gap: var(--space-xl);
    padding: var(--space-md);
    background: var(--gray-50);
    border-radius: var(--border-radius-md);
    margin-bottom: var(--space-md);
}

.ai-confidence {
    display: flex;
    align-items: center;
    gap: var(--space-sm);
}

.confidence-label,
.sources-label {
    font-size: var(--text-sm);
    color: var(--gray-600);
    font-weight: var(--font-medium);
}

.confidence-bar {
    width: 100px;
    height: 6px;
    background: var(--gray-200);
    border-radius: var(--border-radius-full);
    overflow: hidden;
}

.confidence-fill {
    height: 100%;
    background: linear-gradient(90deg, var(--accent-teal), var(--info));
}

.confidence-value {
    font-size: var(--text-sm);
    font-weight: var(--font-semibold);
    color: var(--gray-900);
}

.ai-sources {
    display: flex;
    align-items: center;
    gap: var(--space-sm);
    flex-wrap: wrap;
}

.source-link {
    font-size: var(--text-sm);
    color: var(--info);
    text-decoration: none;
}

.source-link:hover {
    text-decoration: underline;
}

.faq-actions {
    display: flex;
    gap: var(--space-sm);
}

.btn.danger {
    color: var(--error);
    border-color: var(--error);
}

.btn.danger:hover {
    background: rgba(239, 68, 68, 0.05);
}

/* AIææ¡ˆã‚»ã‚¯ã‚·ãƒ§ãƒ³ */
.ai-suggestions {
    background: linear-gradient(135deg, rgba(20, 184, 166, 0.05) 0%, rgba(59, 130, 246, 0.05) 100%);
    border-radius: var(--border-radius-xl);
    padding: var(--space-xl);
    border: 1px solid rgba(20, 184, 166, 0.2);
}

.suggestions-title {
    display: flex;
    align-items: center;
    gap: var(--space-sm);
    font-size: var(--text-xl);
    font-weight: var(--font-semibold);
    color: var(--gray-900);
    margin-bottom: var(--space-lg);
}

.suggestions-icon {
    font-size: 1.5rem;
}

.suggestions-list {
    display: flex;
    flex-direction: column;
    gap: var(--space-md);
}

.suggestion-item {
    background: white;
    border-radius: var(--border-radius-lg);
    padding: var(--space-md);
    border: 1px solid var(--gray-200);
    display: flex;
    justify-content: space-between;
    align-items: center;
    gap: var(--space-md);
}

.suggestion-content {
    flex: 1;
}

.suggestion-text {
    font-size: var(--text-sm);
    color: var(--gray-700);
    margin-bottom: var(--space-sm);
}

.suggestion-meta {
    display: flex;
    gap: var(--space-md);
    font-size: var(--text-xs);
    color: var(--gray-600);
}

/* è¨€èªã‚»ãƒ¬ã‚¯ã‚¿ãƒ¼ */
.language-selector {
    display: flex;
    justify-content: space-between;
    align-items: center;
    background: var(--gray-50);
    padding: var(--space-md) var(--space-lg);
    border-radius: var(--border-radius-lg);
    margin-bottom: var(--space-lg);
}

.language-tabs {
    display: flex;
    gap: var(--space-sm);
}

.language-tab {
    display: flex;
    align-items: center;
    gap: var(--space-xs);
    padding: var(--space-sm) var(--space-md);
    background: white;
    border: 1px solid var(--gray-300);
    border-radius: var(--border-radius-md);
    font-size: var(--text-sm);
    font-weight: var(--font-medium);
    color: var(--gray-700);
    cursor: pointer;
    transition: all var(--transition-fast);
}

.language-tab:hover {
    background: var(--gray-100);
    border-color: var(--gray-400);
}

.language-tab.active {
    background: var(--accent-teal);
    color: white;
    border-color: var(--accent-teal);
}

.flag {
    font-size: 1.2em;
}

.lang-count {
    padding: 2px 6px;
    background: rgba(255, 255, 255, 0.2);
    border-radius: var(--border-radius-full);
    font-size: var(--text-xs);
}

.language-tab.active .lang-count {
    background: rgba(255, 255, 255, 0.3);
}

.language-actions {
    display: flex;
    gap: var(--space-sm);
}

/* ç¿»è¨³ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ */
.translation-status {
    display: flex;
    gap: var(--space-xs);
    margin-right: var(--space-md);
}

.translation-badge {
    display: inline-flex;
    align-items: center;
    gap: 4px;
    padding: 2px 8px;
    border-radius: var(--border-radius-full);
    font-size: var(--text-xs);
    font-weight: var(--font-medium);
}

.translation-badge.complete {
    background: rgba(16, 185, 129, 0.1);
    color: var(--success);
}

.translation-badge.pending {
    background: rgba(107, 114, 128, 0.1);
    color: var(--gray-600);
}

.translation-badge.reviewing {
    background: rgba(245, 158, 11, 0.1);
    color: var(--warning);
}

/* å¤šè¨€èªç®¡ç† */
.language-management {
    padding: var(--space-md);
    background: var(--gray-50);
    border-radius: var(--border-radius-md);
    margin-bottom: var(--space-md);
}

.language-versions {
    display: grid;
    gap: var(--space-sm);
}

.language-version {
    display: flex;
    align-items: center;
    gap: var(--space-md);
    padding: var(--space-sm);
    background: white;
    border: 1px solid var(--gray-200);
    border-radius: var(--border-radius-sm);
}

.lang-label {
    font-size: var(--text-sm);
    font-weight: var(--font-medium);
    color: var(--gray-700);
    min-width: 120px;
}

.lang-status {
    font-size: var(--text-xs);
    padding: 2px 8px;
    border-radius: var(--border-radius-full);
}

.lang-status.complete {
    background: rgba(16, 185, 129, 0.1);
    color: var(--success);
}

.lang-status.pending {
    background: rgba(107, 114, 128, 0.1);
    color: var(--gray-600);
}

.lang-status.reviewing {
    background: rgba(245, 158, 11, 0.1);
    color: var(--warning);
}

.btn-xs {
    padding: 2px 8px;
    font-size: var(--text-xs);
}

/* å¤šè¨€èªè¨­å®šãƒ¢ãƒ¼ãƒ€ãƒ« */
.language-settings-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: var(--space-xl);
}

.settings-section {
    background: var(--gray-50);
    padding: var(--space-lg);
    border-radius: var(--border-radius-md);
}

.settings-section.full-width {
    grid-column: 1 / -1;
}

.settings-section h3 {
    margin-bottom: var(--space-md);
    color: var(--gray-700);
    font-size: var(--text-lg);
}

.supported-languages {
    display: grid;
    gap: var(--space-sm);
}

.language-item {
    display: flex;
    align-items: center;
    gap: var(--space-sm);
}

.language-item label {
    display: flex;
    align-items: center;
    gap: var(--space-sm);
    cursor: pointer;
    font-size: var(--text-sm);
}

.translation-settings {
    display: grid;
    gap: var(--space-md);
}

.setting-item {
    display: flex;
    flex-direction: column;
    gap: var(--space-xs);
}

.setting-label {
    font-size: var(--text-sm);
    font-weight: var(--font-medium);
    color: var(--gray-700);
}

.form-select {
    padding: var(--space-sm);
    border: 1px solid var(--gray-300);
    border-radius: var(--border-radius-sm);
    background: white;
    font-size: var(--text-sm);
}

.toggle-label {
    display: flex;
    align-items: center;
    gap: var(--space-sm);
    cursor: pointer;
    font-size: var(--text-sm);
}

.toggle {
    position: relative;
    width: 44px;
    height: 24px;
    background: var(--gray-300);
    border-radius: var(--border-radius-full);
    transition: all var(--transition-fast);
}

.toggle::after {
    content: '';
    position: absolute;
    top: 2px;
    left: 2px;
    width: 20px;
    height: 20px;
    background: white;
    border-radius: var(--border-radius-full);
    transition: all var(--transition-fast);
}

.toggle-label input:checked + .toggle {
    background: var(--accent-teal);
}

.toggle-label input:checked + .toggle::after {
    left: 22px;
}

.toggle-label input {
    display: none;
}

.translation-stats {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
    gap: var(--space-lg);
    margin-bottom: var(--space-xl);
}

.translation-stats .stat-item {
    text-align: center;
}

.translation-stats .stat-value {
    font-size: var(--text-2xl);
    font-weight: var(--font-bold);
    color: var(--accent-teal);
    margin-bottom: var(--space-xs);
}

.translation-stats .stat-label {
    font-size: var(--text-sm);
    color: var(--gray-600);
}

.progress-overview {
    display: grid;
    gap: var(--space-md);
}

.progress-item {
    display: flex;
    flex-direction: column;
    gap: var(--space-xs);
}

.progress-header {
    display: flex;
    justify-content: space-between;
    font-size: var(--text-sm);
    color: var(--gray-700);
}

/* ãƒ•ã‚©ãƒ¼ãƒ ã‚¹ã‚¿ã‚¤ãƒ« */
.form-group {
    margin-bottom: var(--space-md);
}

.form-group label {
    display: block;
    font-size: var(--text-sm);
    font-weight: var(--font-medium);
    color: var(--gray-700);
    margin-bottom: var(--space-xs);
}

.form-control {
    width: 100%;
    padding: var(--space-sm);
    border: 1px solid var(--gray-300);
    border-radius: var(--border-radius-sm);
    font-size: var(--text-sm);
    transition: border-color var(--transition-fast);
}

.form-control:focus {
    outline: none;
    border-color: var(--accent-teal);
    box-shadow: 0 0 0 3px rgba(20, 184, 166, 0.1);
}

.form-control textarea {
    resize: vertical;
    min-height: 80px;
}

/* ã‚¢ã‚³ãƒ¼ãƒ‡ã‚£ã‚ªãƒ³ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ */
.faq-item-content {
    transition: all var(--transition-normal);
    overflow: hidden;
}

.faq-item.expanded .action-btn svg {
    transform: rotate(180deg);
}

.action-btn svg {
    transition: transform var(--transition-fast);
}

/* ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ– */
@media (max-width: 1024px) {
    .faq-controls {
        flex-direction: column;
        align-items: stretch;
    }
    
    .faq-filters {
        flex-wrap: wrap;
    }
    
    .search-box {
        width: 100%;
    }
}

@media (max-width: 768px) {
    .page-header {
        flex-direction: column;
        align-items: flex-start;
        gap: var(--space-md);
    }
    
    .ai-stats-grid {
        grid-template-columns: 1fr;
    }
    
    .faq-tabs {
        -webkit-overflow-scrolling: touch;
    }
    
    .faq-item-header {
        flex-direction: column;
    }
    
    .faq-ai-info {
        flex-direction: column;
    }
    
    .suggestion-item {
        flex-direction: column;
        align-items: stretch;
    }
}
</style>

<script>
// FAQç®¡ç†ãƒšãƒ¼ã‚¸ç”¨JavaScript
document.addEventListener('DOMContentLoaded', function() {
    // KAGAMIã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®åˆæœŸåŒ–ã‚’å¾…ã¤
    if (!window.KAGAMI) {
        setTimeout(() => {
            initializeFAQ();
        }, 100);
    } else {
        initializeFAQ();
    }
});

function initializeFAQ() {
    if (!window.KAGAMI) {
        console.error('KAGAMI object not found');
        return;
    }
    
    KAGAMI.faq = {
    // FAQã®å±•é–‹/æŠ˜ã‚ŠãŸãŸã¿
    toggleExpand: function(button) {
        const item = button.closest('.faq-item');
        const content = item.querySelector('.faq-item-content');
        const arrow = button.querySelector('svg');
        
        // ç¾åœ¨ã®è¡¨ç¤ºçŠ¶æ…‹ã‚’ç¢ºèª
        const isCurrentlyHidden = content.style.display === 'none' || getComputedStyle(content).display === 'none';
        
        if (isCurrentlyHidden) {
            // è¡¨ç¤ºã™ã‚‹
            content.style.display = 'block';
            arrow.style.transform = 'rotate(180deg)';
            item.classList.add('expanded');
        } else {
            // éè¡¨ç¤ºã«ã™ã‚‹
            content.style.display = 'none';
            arrow.style.transform = 'rotate(0deg)';
            item.classList.remove('expanded');
        }
    },
    
    // AIãƒ¢ãƒ‡ãƒ«ã®æ›´æ–°
    trainModel: function() {
        KAGAMI.notification.show('AIãƒ¢ãƒ‡ãƒ«ã®æ›´æ–°ã‚’é–‹å§‹ã—ã¾ã—ãŸ', 'info');
        // å®Ÿéš›ã®æ›´æ–°å‡¦ç†
    },
    
    // FAQè¿½åŠ ãƒ¢ãƒ¼ãƒ€ãƒ«
    showAddModal: function() {
        KAGAMI.notification.show('FAQè¿½åŠ ãƒ¢ãƒ¼ãƒ€ãƒ«ã‚’è¡¨ç¤º', 'info');
    },
    
    // FAQç·¨é›†
    edit: function(id) {
        // FAQã‚¢ã‚¤ãƒ†ãƒ ã‹ã‚‰ç¾åœ¨ã®å€¤ã‚’å–å¾—
        const faqItem = document.querySelector(`.faq-item:nth-child(${id})`);
        if (!faqItem) {
            console.error('FAQ item not found:', id);
            return;
        }
        
        const question = faqItem.querySelector('.faq-question').textContent;
        const answerElement = faqItem.querySelector('.faq-answer p');
        const answer = answerElement ? answerElement.textContent : '';
        const categoryElement = faqItem.querySelector('.faq-category');
        const category = categoryElement ? categoryElement.textContent : '';
        const statusElement = faqItem.querySelector('.faq-status');
        const status = statusElement ? statusElement.classList.contains('published') ? 'published' : 
                      statusElement.classList.contains('draft') ? 'draft' : 
                      statusElement.classList.contains('review') ? 'review' : 'archived' : 'published';
        
        // ãƒ¢ãƒ¼ãƒ€ãƒ«ã®ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã«å€¤ã‚’è¨­å®š
        document.getElementById('editQuestion').value = question;
        document.getElementById('editAnswer').value = answer;
        document.getElementById('editCategory').value = this.getCategoryValue(category);
        document.getElementById('editStatus').value = status;
        
        // ç·¨é›†ä¸­ã®FAQ IDã‚’ä¿å­˜
        this.currentEditId = id;
        
        // ãƒ¢ãƒ¼ãƒ€ãƒ«ã‚’è¡¨ç¤º
        document.getElementById('faqEditModal').style.display = 'flex';
    },
    
    // FAQç·¨é›†ãƒ¢ãƒ¼ãƒ€ãƒ«ã‚’é–‰ã˜ã‚‹
    closeEditModal: function() {
        document.getElementById('faqEditModal').style.display = 'none';
        this.currentEditId = null;
    },
    
    // FAQç·¨é›†ã‚’ä¿å­˜
    saveEdit: function() {
        if (!this.currentEditId) return;
        
        const question = document.getElementById('editQuestion').value;
        const answer = document.getElementById('editAnswer').value;
        const category = document.getElementById('editCategory').value;
        const status = document.getElementById('editStatus').value;
        
        if (!question.trim() || !answer.trim()) {
            KAGAMI.notification.show('è³ªå•ã¨å›ç­”ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„', 'error');
            return;
        }
        
        // FAQã‚¢ã‚¤ãƒ†ãƒ ã‚’æ›´æ–°
        const faqItem = document.querySelector(`.faq-item:nth-child(${this.currentEditId})`);
        if (faqItem) {
            faqItem.querySelector('.faq-question').textContent = question;
            const answerElement = faqItem.querySelector('.faq-answer p');
            if (answerElement) {
                answerElement.textContent = answer;
            }
            faqItem.querySelector('.faq-category').textContent = this.getCategoryName(category);
            
            // ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚’æ›´æ–°
            const statusElement = faqItem.querySelector('.faq-status');
            statusElement.className = `faq-status ${status}`;
            statusElement.textContent = this.getStatusName(status);
        }
        
        KAGAMI.notification.show('FAQã‚’æ›´æ–°ã—ã¾ã—ãŸ', 'success');
        this.closeEditModal();
    },
    
    // ã‚«ãƒ†ã‚´ãƒªåã‚’å–å¾—
    getCategoryName: function(value) {
        const categories = {
            'financial': 'è²¡å‹™ãƒ»æ¥­ç¸¾',
            'strategy': 'çµŒå–¶æˆ¦ç•¥',
            'esg': 'ESGãƒ»ã‚µã‚¹ãƒ†ãƒŠãƒ“ãƒªãƒ†ã‚£',
            'governance': 'ã‚¬ãƒãƒŠãƒ³ã‚¹',
            'other': 'ãã®ä»–'
        };
        return categories[value] || value;
    },
    
    // ã‚«ãƒ†ã‚´ãƒªå€¤ã‚’å–å¾—
    getCategoryValue: function(name) {
        const categories = {
            'è²¡å‹™ãƒ»æ¥­ç¸¾': 'financial',
            'çµŒå–¶æˆ¦ç•¥': 'strategy',
            'ESGãƒ»ã‚µã‚¹ãƒ†ãƒŠãƒ“ãƒªãƒ†ã‚£': 'esg',
            'ã‚¬ãƒãƒŠãƒ³ã‚¹': 'governance',
            'ãã®ä»–': 'other'
        };
        return categories[name] || 'other';
    },
    
    // ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹åã‚’å–å¾—
    getStatusName: function(value) {
        const statuses = {
            'published': 'å…¬é–‹ä¸­',
            'draft': 'ä¸‹æ›¸ã',
            'review': 'ãƒ¬ãƒ“ãƒ¥ãƒ¼ä¸­',
            'archived': 'ã‚¢ãƒ¼ã‚«ã‚¤ãƒ–'
        };
        return statuses[value] || value;
    },
    
    improve: function(id) {
        console.log('Improve FAQ:', id);
    },
    
    archive: function(id) {
        console.log('Archive FAQ:', id);
    },
    
    bulkPublish: function() {
        console.log('Bulk publish');
    },
    
    bulkArchive: function() {
        console.log('Bulk archive');
    },
    
    createFromSuggestion: function(id) {
        console.log('Create from suggestion:', id);
    },
    
    updateSuggestion: function(id) {
        console.log('Update suggestion:', id);
    },
    
    // å¤šè¨€èªç®¡ç†é–¢é€£
    showLanguageSettings: function() {
        document.getElementById('languageSettingsModal').style.display = 'flex';
    },
    
    closeLanguageSettings: function() {
        document.getElementById('languageSettingsModal').style.display = 'none';
    },
    
    saveLanguageSettings: function() {
        KAGAMI.notification.show('è¨€èªè¨­å®šã‚’ä¿å­˜ã—ã¾ã—ãŸ', 'success');
        this.closeLanguageSettings();
    },
    
    editTranslation: function(faqId, language) {
        console.log('Edit translation:', faqId, language);
        KAGAMI.notification.show(`FAQ #${faqId} ã®${this.getLanguageName(language)}ç¿»è¨³ã‚’ç·¨é›†ä¸­`, 'info');
    },
    
    autoTranslate: function(faqId, language) {
        const langName = this.getLanguageName(language);
        KAGAMI.notification.show(`FAQ #${faqId} ã‚’${langName}ã«è‡ªå‹•ç¿»è¨³ä¸­...`, 'info');
        
        // ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ï¼š2ç§’å¾Œã«å®Œäº†é€šçŸ¥
        setTimeout(() => {
            KAGAMI.notification.show(`${langName}ã¸ã®ç¿»è¨³ãŒå®Œäº†ã—ã¾ã—ãŸ`, 'success');
            // UIã‚’æ›´æ–°
            const langVersion = document.querySelector(`.language-version:has(.lang-label:contains('${language}'))`);
            if (langVersion) {
                const statusElem = langVersion.querySelector('.lang-status');
                const buttonElem = langVersion.querySelector('button');
                
                statusElem.textContent = 'ç¿»è¨³æ¸ˆ';
                statusElem.classList.remove('pending');
                statusElem.classList.add('complete');
                
                buttonElem.textContent = 'ç·¨é›†';
                buttonElem.classList.remove('btn-primary');
                buttonElem.classList.add('btn-outline');
                buttonElem.onclick = () => this.editTranslation(faqId, language);
            }
        }, 2000);
    },
    
    bulkTranslate: function() {
        const currentLang = document.querySelector('.language-tab.active').dataset.lang;
        const targetLangs = ['en', 'zh', 'ko'].filter(lang => lang !== currentLang);
        
        KAGAMI.notification.show(`æœªç¿»è¨³ã®FAQã‚’ä¸€æ‹¬ç¿»è¨³ä¸­...`, 'info');
        
        // ãƒ—ãƒ­ã‚°ãƒ¬ã‚¹ãƒãƒ¼ã‚’è¡¨ç¤ºï¼ˆå®Ÿéš›ã®å®Ÿè£…ã§ã¯ï¼‰
        setTimeout(() => {
            KAGAMI.notification.show('ä¸€æ‹¬ç¿»è¨³ãŒå®Œäº†ã—ã¾ã—ãŸï¼ˆ234ä»¶ã®FAQãŒç¿»è¨³ã•ã‚Œã¾ã—ãŸï¼‰', 'success');
        }, 3000);
    },
    
    getLanguageName: function(langCode) {
        const langNames = {
            'ja': 'æ—¥æœ¬èª',
            'en': 'è‹±èª',
            'zh': 'ä¸­å›½èª',
            'ko': 'éŸ“å›½èª'
        };
        return langNames[langCode] || langCode;
    }
};

// åˆæœŸåŒ–å®Œäº†ã®ç¢ºèª
console.log('FAQ module initialized:', KAGAMI.faq);
}

// è¨€èªã‚¿ãƒ–ã®åˆ‡ã‚Šæ›¿ãˆï¼ˆKAGAMIåˆæœŸåŒ–å¾Œã«å®Ÿè¡Œï¼‰
document.addEventListener('DOMContentLoaded', function() {
    // KAGAMIã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®åˆæœŸåŒ–ã‚’å°‘ã—å¾…ã¤
    setTimeout(function() {
        const languageTabs = document.querySelectorAll('.language-tab');
        languageTabs.forEach(tab => {
            tab.addEventListener('click', function() {
                languageTabs.forEach(t => t.classList.remove('active'));
                this.classList.add('active');
                
                const selectedLang = this.dataset.lang;
                if (KAGAMI && KAGAMI.notification && KAGAMI.faq) {
                    KAGAMI.notification.show(`${KAGAMI.faq.getLanguageName(selectedLang)}ç‰ˆã®FAQã‚’è¡¨ç¤ºä¸­`, 'info');
                }
                
                // å®Ÿéš›ã®å®Ÿè£…ã§ã¯FAQãƒªã‚¹ãƒˆã‚’ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°
                filterFAQsByLanguage(selectedLang);
            });
        });
        
        // FAQã‚¿ãƒ–ã®åˆ‡ã‚Šæ›¿ãˆ
        const faqTabs = document.querySelectorAll('.faq-tab');
        faqTabs.forEach(tab => {
            tab.addEventListener('click', function() {
                faqTabs.forEach(t => t.classList.remove('active'));
                this.classList.add('active');
                
                const category = this.dataset.category;
                filterFAQsByCategory(category);
            });
        });
    }, 200);
});

function filterFAQsByLanguage(language) {
    // è¨€èªã§FAQã‚’ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°
    console.log('Filtering FAQs by language:', language);
}

function filterFAQsByCategory(category) {
    // ã‚«ãƒ†ã‚´ãƒªã§FAQã‚’ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°
    console.log('Filtering FAQs by category:', category);
}

// ãƒŸãƒ‹ãƒãƒ£ãƒ¼ãƒˆã®æç”»ï¼ˆã‚µãƒ³ãƒ—ãƒ«ï¼‰
document.addEventListener('DOMContentLoaded', function() {
    // Chart.jsã®èª­ã¿è¾¼ã¿ã‚’å°‘ã—å¾…ã¤
    setTimeout(function() {
        const canvas = document.getElementById('aiGeneratedChart');
        if (canvas && typeof Chart !== 'undefined') {
            const ctx = canvas.getContext('2d');
            new Chart(ctx, {
                type: 'line',
                data: {
                    labels: ['', '', '', '', '', '', ''],
                    datasets: [{
                        data: [65, 72, 78, 85, 92, 98, 105],
                        borderColor: '#14b8a6',
                        borderWidth: 2,
                        tension: 0.4,
                        pointRadius: 0
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: { display: false }
                    },
                    scales: {
                        x: { display: false },
                        y: { display: false }
                    }
                }
            });
        }
    }, 300);
});
</script>
{% endblock %}
