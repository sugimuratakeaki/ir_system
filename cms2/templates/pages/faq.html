{% extends "base.html" %}

{% block title %}FAQç®¡ç† - {{ super() }}{% endblock %}
{% block page_icon %}â“{% endblock %}
{% block page_title %}FAQç®¡ç†{% endblock %}
{% block breadcrumb_current %}FAQç®¡ç†{% endblock %}

{% block content %}
<script>
// onclickå±æ€§ã‹ã‚‰ã‚¢ã‚¯ã‚»ã‚¹ã§ãã‚‹ã‚ˆã†ã«ã€ã‚°ãƒ­ãƒ¼ãƒãƒ«ã«KAGAMIã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’åˆæœŸåŒ–
if (!window.KAGAMI) {
    window.KAGAMI = {
        faq: {
            toggleExpand: function() { console.log('KAGAMI.faq not initialized yet'); },
            showLanguageSettings: function() { console.log('KAGAMI.faq not initialized yet'); },
            trainModel: function() { console.log('KAGAMI.faq not initialized yet'); },
            showAddModal: function() { console.log('KAGAMI.faq not initialized yet'); },
            bulkTranslate: function() { console.log('KAGAMI.faq not initialized yet'); },
            bulkPublish: function() { console.log('KAGAMI.faq not initialized yet'); },
            bulkArchive: function() { console.log('KAGAMI.faq not initialized yet'); },
            edit: function() { console.log('KAGAMI.faq not initialized yet'); },
            improve: function() { console.log('KAGAMI.faq not initialized yet'); },
            archive: function() { console.log('KAGAMI.faq not initialized yet'); },
            editTranslation: function() { console.log('KAGAMI.faq not initialized yet'); },
            autoTranslate: function() { console.log('KAGAMI.faq not initialized yet'); },
            createFromSuggestion: function() { console.log('KAGAMI.faq not initialized yet'); },
            updateSuggestion: function() { console.log('KAGAMI.faq not initialized yet'); },
            closeLanguageSettings: function() { console.log('KAGAMI.faq not initialized yet'); },
            saveLanguageSettings: function() { console.log('KAGAMI.faq not initialized yet'); },
            removeSource: function() { console.log('KAGAMI.faq not initialized yet'); },
            closeSimilarModal: function() { console.log('KAGAMI.faq not initialized yet'); },
            viewFAQ: function() { console.log('KAGAMI.faq not initialized yet'); },
            mergeFAQ: function() { console.log('KAGAMI.faq not initialized yet'); },
            continueEditing: function() { console.log('KAGAMI.faq not initialized yet'); },
            formatText: function() { console.log('KAGAMI.faq not initialized yet'); },
            insertLink: function() { console.log('KAGAMI.faq not initialized yet'); },
            aiImprove: function() { console.log('KAGAMI.faq not initialized yet'); },
            closeEditModal: function() { console.log('KAGAMI.faq not initialized yet'); },
            saveFAQ: function() { console.log('KAGAMI.faq not initialized yet'); },
            saveFAQAndPublish: function() { console.log('KAGAMI.faq not initialized yet'); },
            closeAIImproveModal: function() { console.log('KAGAMI.faq not initialized yet'); },
            applyAIImprovement: function() { console.log('KAGAMI.faq not initialized yet'); },
            getCategoryValue: function() { console.log('KAGAMI.faq not initialized yet'); },
            startAIAnalysis: function() { console.log('KAGAMI.faq not initialized yet'); },
            showAISuggestions: function() { console.log('KAGAMI.faq not initialized yet'); },
            updateAIMetrics: function() { console.log('KAGAMI.faq not initialized yet'); }
        }
    };
}
</script>

<!-- ãƒšãƒ¼ã‚¸ãƒ˜ãƒƒãƒ€ãƒ¼ -->
<div class="page-header">
    <div class="page-header-content">
        <p class="page-description">AIã«ã‚ˆã‚‹è‡ªå‹•FAQç”Ÿæˆã¨ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ </p>
    </div>
    <div class="page-header-actions">
        <button class="btn btn-secondary" id="languageSettingsBtn">
            <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                <circle cx="8" cy="8" r="7" stroke="currentColor" stroke-width="1.5"/>
                <path d="M8 1C8 1 5.5 4 5.5 8C5.5 12 8 15 8 15C8 15 10.5 12 10.5 8C10.5 4 8 1 8 1Z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                <path d="M1 8H15" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
            è¨€èªè¨­å®š
        </button>
        <button class="btn btn-secondary" id="trainModelBtn">
            <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M4 8V13.3333C4 13.6869 4.14048 14.0261 4.39052 14.2761C4.64057 14.5262 4.97971 14.6667 5.33333 14.6667H10.6667C11.0203 14.6667 11.3594 14.5262 11.6095 14.2761C11.8595 14.0261 12 13.6869 12 13.3333V8M10 4L8 2M8 2L6 4M8 2V10" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
            AIãƒ¢ãƒ‡ãƒ«æ›´æ–°
        </button>
        <button class="btn btn-primary" id="showAddModalBtn">
            <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M8 3.33334V12.6667M3.33333 8H12.6667" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
            FAQè¿½åŠ 
        </button>
    </div>
</div>

<!-- AIçµ±è¨ˆãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ -->
<div class="ai-stats-grid">
    <div class="ai-stat-card">
        <div class="ai-stat-header">
            <span class="ai-stat-icon">ğŸ§ </span>
            <span class="ai-stat-label">AIç”ŸæˆFAQæ•°</span>
        </div>
        <div class="ai-stat-value">1,234</div>
        <div class="ai-stat-chart">
            <canvas id="aiGeneratedChart" width="100" height="40"></canvas>
        </div>
    </div>
    
    <div class="ai-stat-card">
        <div class="ai-stat-header">
            <span class="ai-stat-icon">âœ…</span>
            <span class="ai-stat-label">å›ç­”ç²¾åº¦</span>
        </div>
        <div class="ai-stat-value">94.7%</div>
        <div class="ai-progress">
            <div class="progress-bar">
                <div class="progress-fill" style="width: 94.7%"></div>
            </div>
        </div>
    </div>
    
    <div class="ai-stat-card">
        <div class="ai-stat-header">
            <span class="ai-stat-icon">ğŸ‘</span>
            <span class="ai-stat-label">æº€è¶³åº¦ã‚¹ã‚³ã‚¢</span>
        </div>
        <div class="ai-stat-value">4.8<span class="ai-stat-unit">/5</span></div>
        <div class="ai-rating">
            <span class="star filled">â˜…</span>
            <span class="star filled">â˜…</span>
            <span class="star filled">â˜…</span>
            <span class="star filled">â˜…</span>
            <span class="star partial">â˜…</span>
        </div>
    </div>
    
    <div class="ai-stat-card">
        <div class="ai-stat-header">
            <span class="ai-stat-icon">âš¡</span>
            <span class="ai-stat-label">å¹³å‡å¿œç­”æ™‚é–“</span>
        </div>
        <div class="ai-stat-value">0.8<span class="ai-stat-unit">ç§’</span></div>
        <div class="ai-stat-comparison">
            <span class="comparison-label">å‰æœˆæ¯”</span>
            <span class="comparison-value positive">-0.2ç§’</span>
        </div>
    </div>
</div>

<!-- è¨€èªé¸æŠ -->
<div class="language-selector">
    <div class="language-tabs">
        <button class="language-tab active" data-lang="ja">
            <span class="flag">ğŸ‡¯ğŸ‡µ</span>
            æ—¥æœ¬èª
            <span class="lang-count">2,456</span>
        </button>
        <button class="language-tab" data-lang="en">
            <span class="flag">ğŸ‡ºğŸ‡¸</span>
            English
            <span class="lang-count">1,892</span>
        </button>
        <button class="language-tab" data-lang="zh">
            <span class="flag">ğŸ‡¨ğŸ‡³</span>
            ä¸­æ–‡
            <span class="lang-count">856</span>
        </button>
        <button class="language-tab" data-lang="ko">
            <span class="flag">ğŸ‡°ğŸ‡·</span>
            í•œêµ­ì–´
            <span class="lang-count">423</span>
        </button>
    </div>
    <div class="language-actions">
        <button class="btn btn-sm btn-outline" onclick="KAGAMI.faq.bulkTranslate()">
            <svg width="16" height="16" viewBox="0 0 16 16" fill="none">
                <path d="M7.293 2.707A1 1 0 0 1 8 2.414V7h4.586a1 1 0 0 1 .707 1.707l-5 5a1 1 0 0 1-1.414 0l-5-5A1 1 0 0 1 2.586 7H7V2.414a1 1 0 0 1 .293-.707z" stroke="currentColor" stroke-width="1.5"/>
            </svg>
            ä¸€æ‹¬ç¿»è¨³
        </button>
    </div>
</div>

<!-- FAQã‚«ãƒ†ã‚´ãƒªãƒ¼ã‚¿ãƒ– -->
<div class="faq-tabs">
    <button class="faq-tab active" data-category="all">
        ã™ã¹ã¦
        <span class="tab-count">2,456</span>
    </button>
    <button class="faq-tab" data-category="financial">
        è²¡å‹™ãƒ»æ¥­ç¸¾
        <span class="tab-count">823</span>
    </button>
    <button class="faq-tab" data-category="strategy">
        çµŒå–¶æˆ¦ç•¥
        <span class="tab-count">456</span>
    </button>
    <button class="faq-tab" data-category="esg">
        ESGãƒ»ã‚µã‚¹ãƒ†ãƒŠãƒ“ãƒªãƒ†ã‚£
        <span class="tab-count">387</span>
    </button>
    <button class="faq-tab" data-category="governance">
        ã‚¬ãƒãƒŠãƒ³ã‚¹
        <span class="tab-count">290</span>
    </button>
    <button class="faq-tab" data-category="other">
        ãã®ä»–
        <span class="tab-count">500</span>
    </button>
</div>

<!-- ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ã¨ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ -->
<div class="faq-controls">
    <div class="faq-filters">
        <div class="search-box">
            <svg class="search-icon" width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M17.5 17.5L13.875 13.875M15.8333 9.16667C15.8333 12.8486 12.8486 15.8333 9.16667 15.8333C5.48477 15.8333 2.5 12.8486 2.5 9.16667C2.5 5.48477 5.48477 2.5 9.16667 2.5C12.8486 2.5 15.8333 5.48477 15.8333 9.16667Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
            <input type="search" class="search-input" placeholder="FAQã‚’æ¤œç´¢..." id="faqSearch">
        </div>
        
        <select class="filter-select" id="statusFilter">
            <option value="">ã™ã¹ã¦ã®ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹</option>
            <option value="published">å…¬é–‹ä¸­</option>
            <option value="draft">ä¸‹æ›¸ã</option>
            <option value="review">ãƒ¬ãƒ“ãƒ¥ãƒ¼ä¸­</option>
            <option value="archived">ã‚¢ãƒ¼ã‚«ã‚¤ãƒ–</option>
        </select>
        
        <select class="filter-select" id="sourceFilter">
            <option value="">ã™ã¹ã¦ã®ã‚½ãƒ¼ã‚¹</option>
            <option value="ai">AIç”Ÿæˆ</option>
            <option value="manual">æ‰‹å‹•ä½œæˆ</option>
            <option value="meeting">è­°äº‹éŒ²ã‹ã‚‰ç”Ÿæˆ</option>
        </select>
    </div>
    
    <div class="bulk-actions">
        <button class="btn btn-sm btn-outline" onclick="KAGAMI.faq.bulkPublish()">
            ä¸€æ‹¬å…¬é–‹
        </button>
        <button class="btn btn-sm btn-outline" onclick="KAGAMI.faq.bulkArchive()">
            ä¸€æ‹¬ã‚¢ãƒ¼ã‚«ã‚¤ãƒ–
        </button>
    </div>
</div>

<!-- FAQä¸€è¦§ -->
<div class="faq-list">
    <!-- FAQã‚¢ã‚¤ãƒ†ãƒ  -->
    <div class="faq-item">
        <div class="faq-item-header">
            <div class="faq-item-info">
                <h3 class="faq-question">2024å¹´åº¦ã®å–¶æ¥­åˆ©ç›Šç‡ã®ç›®æ¨™ã¯ã©ã®ç¨‹åº¦ã§ã™ã‹ï¼Ÿ</h3>
                <div class="faq-meta">
                    <span class="faq-category">è²¡å‹™ãƒ»æ¥­ç¸¾</span>
                    <span class="faq-source ai">AIç”Ÿæˆ</span>
                    <span class="faq-date">2024/03/15 14:30</span>
                    <span class="faq-views">é–²è¦§æ•°: 1,234</span>
                </div>
            </div>
            <div class="faq-item-actions">
                <div class="translation-status">
                    <span class="translation-badge complete">ğŸ‡ºğŸ‡¸ ç¿»è¨³æ¸ˆ</span>
                    <span class="translation-badge pending">ğŸ‡¨ğŸ‡³ æœªç¿»è¨³</span>
                    <span class="translation-badge pending">ğŸ‡°ğŸ‡· æœªç¿»è¨³</span>
                </div>
                <span class="faq-status published">å…¬é–‹ä¸­</span>
                <button class="action-btn" onclick="KAGAMI.faq.toggleExpand(this)">
                    <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M5 7.5L10 12.5L15 7.5" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                </button>
            </div>
        </div>
        
        <div class="faq-item-content" style="display: none;">
            <div class="faq-answer">
                <p>2024å¹´åº¦ã®å–¶æ¥­åˆ©ç›Šç‡ç›®æ¨™ã¯15%ä»¥ä¸Šã‚’è¨­å®šã—ã¦ã„ã¾ã™ã€‚ã“ã‚Œã¯å‰å¹´åº¦å®Ÿç¸¾ã®13.8%ã‹ã‚‰ç´„1.2ãƒã‚¤ãƒ³ãƒˆã®æ”¹å–„ã‚’ç›®æŒ‡ã™ã‚‚ã®ã§ã€ä¸»ã«ä»¥ä¸‹ã®æ–½ç­–ã«ã‚ˆã‚Šé”æˆã‚’è¦‹è¾¼ã‚“ã§ã„ã¾ã™ï¼š</p>
                <ul>
                    <li>ç”Ÿç”£åŠ¹ç‡ã®å‘ä¸Šã«ã‚ˆã‚‹åŸä¾¡ç‡ã®æ”¹å–„ï¼ˆ0.5ãƒã‚¤ãƒ³ãƒˆï¼‰</li>
                    <li>é«˜ä»˜åŠ ä¾¡å€¤è£½å“ã¸ã®ã‚·ãƒ•ãƒˆï¼ˆ0.4ãƒã‚¤ãƒ³ãƒˆï¼‰</li>
                    <li>è²©ç®¡è²»ã®æœ€é©åŒ–ï¼ˆ0.3ãƒã‚¤ãƒ³ãƒˆï¼‰</li>
                </ul>
            </div>
            
            <div class="faq-ai-info">
                <div class="ai-confidence">
                    <span class="confidence-label">AIä¿¡é ¼åº¦:</span>
                    <div class="confidence-bar">
                        <div class="confidence-fill" style="width: 92%"></div>
                    </div>
                    <span class="confidence-value">92%</span>
                </div>
                <div class="ai-sources">
                    <span class="sources-label">å‚ç…§å…ƒ:</span>
                    <a href="#" class="source-link">2024å¹´3æœˆæœŸæ±ºç®—èª¬æ˜ä¼šè³‡æ–™ P.12</a>
                    <a href="#" class="source-link">ä¸­æœŸçµŒå–¶è¨ˆç”» P.8</a>
                </div>
            </div>
            
            <!-- å¤šè¨€èªç®¡ç† -->
            <div class="language-management">
                <div class="language-versions">
                    <div class="language-version">
                        <span class="lang-label">ğŸ‡ºğŸ‡¸ English</span>
                        <span class="lang-status complete">ç¿»è¨³æ¸ˆ</span>
                        <button class="btn btn-xs btn-outline" onclick="KAGAMI.faq.editTranslation(1, 'en')">ç·¨é›†</button>
                    </div>
                    <div class="language-version">
                        <span class="lang-label">ğŸ‡¨ğŸ‡³ ä¸­æ–‡</span>
                        <span class="lang-status pending">æœªç¿»è¨³</span>
                        <button class="btn btn-xs btn-primary" onclick="KAGAMI.faq.autoTranslate(1, 'zh')">è‡ªå‹•ç¿»è¨³</button>
                    </div>
                    <div class="language-version">
                        <span class="lang-label">ğŸ‡°ğŸ‡· í•œêµ­ì–´</span>
                        <span class="lang-status pending">æœªç¿»è¨³</span>
                        <button class="btn btn-xs btn-primary" onclick="KAGAMI.faq.autoTranslate(1, 'ko')">è‡ªå‹•ç¿»è¨³</button>
                    </div>
                </div>
            </div>
            
            <div class="faq-actions">
                <button class="btn btn-sm btn-outline" onclick="KAGAMI.faq.edit(1)">
                    <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M11.3333 2C11.5084 1.82491 11.7163 1.68601 11.9451 1.59125C12.1739 1.49649 12.4191 1.44772 12.6667 1.44772C12.9142 1.44772 13.1594 1.49649 13.3882 1.59125C13.617 1.68601 13.8249 1.82491 14 2C14.1751 2.1751 14.314 2.38297 14.4088 2.61178C14.5035 2.84059 14.5523 3.08582 14.5523 3.33333C14.5523 3.58085 14.5035 3.82608 14.4088 4.05489C14.314 4.2837 14.1751 4.49157 14 4.66667L5 13.6667L2 14.6667L3 11.6667L11.3333 2Z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                    ç·¨é›†
                </button>
                <button class="btn btn-sm btn-outline" onclick="KAGAMI.faq.improve(1)">
                    <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M8 2L9.73205 6.47109L14.596 6.87336L11.0359 10.0289L12.1353 14.7933L8 12.3L3.86474 14.7933L4.96415 10.0289L1.40402 6.87336L6.26795 6.47109L8 2Z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                    AIæ”¹å–„
                </button>
                <button class="btn btn-sm btn-outline danger" onclick="KAGAMI.faq.archive(1)">
                    <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M2 5.33333H14M2 5.33333V13.3333C2 13.6869 2.14048 14.0261 2.39052 14.2761C2.64057 14.5262 2.97971 14.6667 3.33333 14.6667H12.6667C13.0203 14.6667 13.3594 14.5262 13.6095 14.2761C13.8595 14.0261 14 13.6869 14 13.3333V5.33333M4.66667 5.33333V3.33333C4.66667 2.97971 4.80714 2.64057 5.05719 2.39052C5.30724 2.14048 5.64638 2 6 2H10C10.3536 2 10.6928 2.14048 10.9428 2.39052C11.1929 2.64057 11.3333 2.97971 11.3333 3.33333V5.33333" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                    ã‚¢ãƒ¼ã‚«ã‚¤ãƒ–
                </button>
            </div>
        </div>
    </div>
    
    <!-- è¿½åŠ ã®FAQã‚¢ã‚¤ãƒ†ãƒ  -->
    <div class="faq-item">
        <div class="faq-item-header">
            <div class="faq-item-info">
                <h3 class="faq-question">ESGæŠ•è³‡ã«å¯¾ã™ã‚‹å–ã‚Šçµ„ã¿ã«ã¤ã„ã¦æ•™ãˆã¦ãã ã•ã„</h3>
                <div class="faq-meta">
                    <span class="faq-category">ESGãƒ»ã‚µã‚¹ãƒ†ãƒŠãƒ“ãƒªãƒ†ã‚£</span>
                    <span class="faq-source meeting">è­°äº‹éŒ²ã‹ã‚‰ç”Ÿæˆ</span>
                    <span class="faq-date">2024/03/14 10:15</span>
                    <span class="faq-views">é–²è¦§æ•°: 892</span>
                </div>
            </div>
            <div class="faq-item-actions">
                <span class="faq-status review">ãƒ¬ãƒ“ãƒ¥ãƒ¼ä¸­</span>
                <button class="action-btn" onclick="KAGAMI.faq.toggleExpand(this)">
                    <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M5 7.5L10 12.5L15 7.5" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                </button>
            </div>
        </div>
    </div>
    
    <div class="faq-item">
        <div class="faq-item-header">
            <div class="faq-item-info">
                <h3 class="faq-question">é…å½“æ”¿ç­–ã¨æ ªä¸»é‚„å…ƒã®æ–¹é‡ã«ã¤ã„ã¦</h3>
                <div class="faq-meta">
                    <span class="faq-category">è²¡å‹™ãƒ»æ¥­ç¸¾</span>
                    <span class="faq-source manual">æ‰‹å‹•ä½œæˆ</span>
                    <span class="faq-date">2024/03/10 16:45</span>
                    <span class="faq-views">é–²è¦§æ•°: 2,341</span>
                </div>
            </div>
            <div class="faq-item-actions">
                <span class="faq-status published">å…¬é–‹ä¸­</span>
                <button class="action-btn" onclick="KAGAMI.faq.toggleExpand(this)">
                    <svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <path d="M5 7.5L10 12.5L15 7.5" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                </button>
            </div>
        </div>
    </div>
</div>

<!-- AIææ¡ˆã‚»ã‚¯ã‚·ãƒ§ãƒ³ -->
<div class="ai-suggestions">
    <h2 class="suggestions-title">
        <span class="suggestions-icon">ğŸ’¡</span>
        AIã‹ã‚‰ã®ææ¡ˆ
    </h2>
    <div class="suggestions-list">
        <div class="suggestion-item">
            <div class="suggestion-content">
                <p class="suggestion-text">æœ€è¿‘ã®æŠ•è³‡å®¶é¢è«‡ã§ã€ŒDXæˆ¦ç•¥ã€ã«é–¢ã™ã‚‹è³ªå•ãŒå¢—ãˆã¦ã„ã¾ã™ã€‚FAQã®è¿½åŠ ã‚’æ¨å¥¨ã—ã¾ã™ã€‚</p>
                <div class="suggestion-meta">
                    <span class="suggestion-frequency">éå»7æ—¥é–“ã§12å›è¨€åŠ</span>
                    <span class="suggestion-confidence">æ¨å¥¨åº¦: é«˜</span>
                </div>
            </div>
            <button class="btn btn-sm btn-primary" onclick="KAGAMI.faq.createFromSuggestion(1)">
                FAQä½œæˆ
            </button>
        </div>
        
        <div class="suggestion-item">
            <div class="suggestion-content">
                <p class="suggestion-text">ã€Œ2025å¹´åº¦ã®è¨­å‚™æŠ•è³‡è¨ˆç”»ã€ã®FAQãŒå¤ããªã£ã¦ã„ã¾ã™ã€‚æœ€æ–°æƒ…å ±ã§ã®æ›´æ–°ã‚’æ¨å¥¨ã—ã¾ã™ã€‚</p>
                <div class="suggestion-meta">
                    <span class="suggestion-frequency">FAQ ID: #234</span>
                    <span class="suggestion-confidence">æ¨å¥¨åº¦: ä¸­</span>
                </div>
            </div>
            <button class="btn btn-sm btn-secondary" onclick="KAGAMI.faq.updateSuggestion(234)">
                æ›´æ–°ã™ã‚‹
            </button>
        </div>
    </div>
</div>

<!-- FAQç·¨é›†ãƒ¢ãƒ¼ãƒ€ãƒ« -->
<div class="modal-wrapper" id="faqEditModal" style="opacity: 0; visibility: hidden;">
    <div class="modal-backdrop" onclick="KAGAMI.faq.closeEditModal()"></div>
    <div class="modal modal-large">
        <button class="modal-close" onclick="KAGAMI.faq.closeEditModal()">Ã—</button>
        <div class="modal-header">
            <h2 class="modal-title">FAQç·¨é›†</h2>
        </div>
        <div class="modal-body">
            <form id="faqEditForm" class="modal-form">
                <input type="hidden" id="faqId" value="">
                
                <div class="form-group">
                    <label class="form-label required">è³ªå•</label>
                    <textarea class="form-input" id="faqQuestion" rows="3" placeholder="æŠ•è³‡å®¶ã‹ã‚‰ã®è³ªå•ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„" required></textarea>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label class="form-label required">ã‚«ãƒ†ã‚´ãƒª</label>
                        <select class="form-select" id="faqCategory" required>
                            <option value="">ã‚«ãƒ†ã‚´ãƒªã‚’é¸æŠ</option>
                            <option value="financial">è²¡å‹™ãƒ»æ¥­ç¸¾</option>
                            <option value="strategy">çµŒå–¶æˆ¦ç•¥</option>
                            <option value="esg">ESGãƒ»ã‚µã‚¹ãƒ†ãƒŠãƒ“ãƒªãƒ†ã‚£</option>
                            <option value="governance">ã‚¬ãƒãƒŠãƒ³ã‚¹</option>
                            <option value="other">ãã®ä»–</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label required">ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹</label>
                        <select class="form-select" id="faqStatus" required>
                            <option value="draft">ä¸‹æ›¸ã</option>
                            <option value="review">ãƒ¬ãƒ“ãƒ¥ãƒ¼ä¸­</option>
                            <option value="published">å…¬é–‹ä¸­</option>
                            <option value="archived">ã‚¢ãƒ¼ã‚«ã‚¤ãƒ–</option>
                        </select>
                    </div>
                </div>
                
                <div class="form-group">
                    <label class="form-label required">å›ç­”</label>
                    <div class="editor-toolbar">
                        <button type="button" class="editor-btn" onclick="KAGAMI.faq.formatText('bold')" title="å¤ªå­—">
                            <strong>B</strong>
                        </button>
                        <button type="button" class="editor-btn" onclick="KAGAMI.faq.formatText('italic')" title="æ–œä½“">
                            <em>I</em>
                        </button>
                        <button type="button" class="editor-btn" onclick="KAGAMI.faq.formatText('underline')" title="ä¸‹ç·š">
                            <u>U</u>
                        </button>
                        <span class="editor-separator"></span>
                        <button type="button" class="editor-btn" onclick="KAGAMI.faq.formatText('bulletList')" title="ç®‡æ¡æ›¸ã">
                            â€¢ â€•
                        </button>
                        <button type="button" class="editor-btn" onclick="KAGAMI.faq.formatText('numberList')" title="ç•ªå·ä»˜ããƒªã‚¹ãƒˆ">
                            1. â€•
                        </button>
                        <span class="editor-separator"></span>
                        <button type="button" class="editor-btn" onclick="KAGAMI.faq.insertLink()" title="ãƒªãƒ³ã‚¯">
                            ğŸ”—
                        </button>
                        <button type="button" class="editor-btn" onclick="KAGAMI.faq.aiImprove()" title="AIæ”¹å–„">
                            âœ¨ AIæ”¹å–„
                        </button>
                    </div>
                    <textarea class="form-input editor-content" id="faqAnswer" rows="10" placeholder="å›ç­”ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„" required></textarea>
                </div>
                
                <div class="form-group">
                    <label class="form-label">å‚ç…§å…ƒãƒ»ã‚½ãƒ¼ã‚¹</label>
                    <div class="source-list" id="sourceList">
                        <div class="source-item">
                            <input type="text" class="form-input" placeholder="ä¾‹ï¼š2024å¹´3æœˆæœŸæ±ºç®—èª¬æ˜ä¼šè³‡æ–™ P.12">
                            <button type="button" class="btn btn-sm btn-outline" onclick="KAGAMI.faq.removeSource(this)">å‰Šé™¤</button>
                        </div>
                    </div>
                    <button type="button" class="btn btn-sm btn-secondary" onclick="KAGAMI.faq.addSource()">+ ã‚½ãƒ¼ã‚¹è¿½åŠ </button>
                </div>
                
                <div class="form-group">
                    <label class="form-label">ã‚¿ã‚°</label>
                    <input type="text" class="form-input" id="faqTags" placeholder="ã‚¿ã‚°ã‚’ã‚«ãƒ³ãƒåŒºåˆ‡ã‚Šã§å…¥åŠ›ï¼ˆä¾‹ï¼šæ±ºç®—, Q3, æ¥­ç¸¾äºˆæƒ³ï¼‰">
                </div>
            </form>
        </div>
        <div class="modal-footer">
            <button type="button" class="btn btn-secondary" onclick="KAGAMI.faq.closeEditModal()">ã‚­ãƒ£ãƒ³ã‚»ãƒ«</button>
            <button type="button" class="btn btn-primary" onclick="KAGAMI.faq.saveFAQ()">ä¿å­˜</button>
            <button type="button" class="btn btn-primary" onclick="KAGAMI.faq.saveFAQAndPublish()">ä¿å­˜ã—ã¦å…¬é–‹</button>
        </div>
    </div>
</div>

<!-- AIæ”¹å–„ãƒ¢ãƒ¼ãƒ€ãƒ« -->
<div class="modal-wrapper" id="aiImproveModal" style="opacity: 0; visibility: hidden;">
    <div class="modal-backdrop" onclick="KAGAMI.faq.closeAIImproveModal()"></div>
    <div class="modal modal-large">
        <button class="modal-close" onclick="KAGAMI.faq.closeAIImproveModal()">Ã—</button>
        <div class="modal-header">
            <h2 class="modal-title">AIæ”¹å–„ææ¡ˆ</h2>
        </div>
        <div class="modal-body">
            <div class="ai-improve-content">
                <div class="current-faq">
                    <h3>ç¾åœ¨ã®FAQ</h3>
                    <div class="faq-preview">
                        <h4 id="aiImproveQuestion">è³ªå•ãŒã“ã“ã«è¡¨ç¤ºã•ã‚Œã¾ã™</h4>
                        <p id="aiImproveAnswer">å›ç­”ãŒã“ã“ã«è¡¨ç¤ºã•ã‚Œã¾ã™</p>
                    </div>
                </div>
                
                <div class="ai-suggestions">
                    <h3>AIæ”¹å–„ææ¡ˆ</h3>
                    <div class="suggestion-tabs">
                        <button class="suggestion-tab active" data-type="clarity">æ˜ç¢ºæ€§ã®å‘ä¸Š</button>
                        <button class="suggestion-tab" data-type="completeness">å®Œå…¨æ€§ã®å‘ä¸Š</button>
                        <button class="suggestion-tab" data-type="tone">ãƒˆãƒ¼ãƒ³ã®èª¿æ•´</button>
                        <button class="suggestion-tab" data-type="structure">æ§‹é€ ã®æ”¹å–„</button>
                    </div>
                    
                    <div class="suggestion-content" id="suggestionContent">
                        <div class="loading-spinner">AIåˆ†æä¸­...</div>
                    </div>
                    
                    <div class="ai-metrics">
                        <div class="metric-item">
                            <span class="metric-label">èª­ã¿ã‚„ã™ã•ã‚¹ã‚³ã‚¢</span>
                            <div class="metric-bar">
                                <div class="metric-fill" style="width: 0%;"></div>
                            </div>
                            <span class="metric-value">0/100</span>
                        </div>
                        <div class="metric-item">
                            <span class="metric-label">å°‚é–€æ€§ã‚¹ã‚³ã‚¢</span>
                            <div class="metric-bar">
                                <div class="metric-fill" style="width: 0%;"></div>
                            </div>
                            <span class="metric-value">0/100</span>
                        </div>
                        <div class="metric-item">
                            <span class="metric-label">å®Œå…¨æ€§ã‚¹ã‚³ã‚¢</span>
                            <div class="metric-bar">
                                <div class="metric-fill" style="width: 0%;"></div>
                            </div>
                            <span class="metric-value">0/100</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="modal-footer">
            <button type="button" class="btn btn-secondary" onclick="KAGAMI.faq.closeAIImproveModal()">ã‚­ãƒ£ãƒ³ã‚»ãƒ«</button>
            <button type="button" class="btn btn-primary" onclick="KAGAMI.faq.applyAIImprovement()">æ”¹å–„ã‚’é©ç”¨</button>
        </div>
    </div>
</div>

<!-- å¤šè¨€èªè¨­å®šãƒ¢ãƒ¼ãƒ€ãƒ« -->
<div class="modal-wrapper" id="languageSettingsModal" style="opacity: 0; visibility: hidden;">
    <div class="modal-backdrop" onclick="KAGAMI.faq.closeLanguageSettings()"></div>
    <div class="modal modal-large">
        <button class="modal-close" onclick="KAGAMI.faq.closeLanguageSettings()">Ã—</button>
        <div class="modal-header">
            <h2 class="modal-title">å¤šè¨€èªã‚³ãƒ³ãƒ†ãƒ³ãƒ„ç®¡ç†è¨­å®š</h2>
        </div>
        <div class="modal-body">
            <div class="language-settings-grid">
                <div class="settings-section">
                    <h3>ã‚µãƒãƒ¼ãƒˆè¨€èª</h3>
                    <div class="supported-languages">
                        <div class="language-item">
                            <input type="checkbox" id="lang_ja" checked disabled>
                            <label for="lang_ja">
                                <span class="flag">ğŸ‡¯ğŸ‡µ</span>
                                æ—¥æœ¬èªï¼ˆãƒ—ãƒ©ã‚¤ãƒãƒªï¼‰
                            </label>
                        </div>
                        <div class="language-item">
                            <input type="checkbox" id="lang_en" checked>
                            <label for="lang_en">
                                <span class="flag">ğŸ‡ºğŸ‡¸</span>
                                English
                            </label>
                        </div>
                        <div class="language-item">
                            <input type="checkbox" id="lang_zh" checked>
                            <label for="lang_zh">
                                <span class="flag">ğŸ‡¨ğŸ‡³</span>
                                ä¸­æ–‡
                            </label>
                        </div>
                        <div class="language-item">
                            <input type="checkbox" id="lang_ko" checked>
                            <label for="lang_ko">
                                <span class="flag">ğŸ‡°ğŸ‡·</span>
                                í•œêµ­ì–´
                            </label>
                        </div>
                        <div class="language-item">
                            <input type="checkbox" id="lang_es">
                            <label for="lang_es">
                                <span class="flag">ğŸ‡ªğŸ‡¸</span>
                                EspaÃ±ol
                            </label>
                        </div>
                        <div class="language-item">
                            <input type="checkbox" id="lang_fr">
                            <label for="lang_fr">
                                <span class="flag">ğŸ‡«ğŸ‡·</span>
                                FranÃ§ais
                            </label>
                        </div>
                    </div>
                </div>
                
                <div class="settings-section">
                    <h3>è‡ªå‹•ç¿»è¨³è¨­å®š</h3>
                    <div class="translation-settings">
                        <div class="setting-item">
                            <label class="setting-label">ç¿»è¨³ã‚¨ãƒ³ã‚¸ãƒ³</label>
                            <select class="form-select">
                                <option>Google Translate API</option>
                                <option>DeepL API</option>
                                <option>Microsoft Translator</option>
                            </select>
                        </div>
                        <div class="setting-item">
                            <label class="setting-label">ç¿»è¨³å“è³ª</label>
                            <select class="form-select">
                                <option>é«˜å“è³ªï¼ˆæ‰‹å‹•ãƒ¬ãƒ“ãƒ¥ãƒ¼å¿…é ˆï¼‰</option>
                                <option selected>æ¨™æº–ï¼ˆè‡ªå‹•å…¬é–‹å¯ï¼‰</option>
                                <option>ç°¡æ˜“ï¼ˆãƒ‰ãƒ©ãƒ•ãƒˆã®ã¿ï¼‰</option>
                            </select>
                        </div>
                        <div class="setting-item">
                            <label class="toggle-label">
                                <input type="checkbox" checked>
                                <span class="toggle"></span>
                                æ–°è¦FAQã®è‡ªå‹•ç¿»è¨³
                            </label>
                        </div>
                        <div class="setting-item">
                            <label class="toggle-label">
                                <input type="checkbox">
                                <span class="toggle"></span>
                                æ›´æ–°æ™‚ã®è‡ªå‹•åŒæœŸ
                            </label>
                        </div>
                    </div>
                </div>
                
                <div class="settings-section full-width">
                    <h3>ç¿»è¨³çµ±è¨ˆ</h3>
                    <div class="translation-stats">
                        <div class="stat-item">
                            <div class="stat-value">2,456</div>
                            <div class="stat-label">ç·FAQæ•°</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-value">1,892</div>
                            <div class="stat-label">è‹±èªç¿»è¨³æ¸ˆ</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-value">856</div>
                            <div class="stat-label">ä¸­å›½èªç¿»è¨³æ¸ˆ</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-value">423</div>
                            <div class="stat-label">éŸ“å›½èªç¿»è¨³æ¸ˆ</div>
                        </div>
                    </div>
                    <div class="progress-overview">
                        <div class="progress-item">
                            <div class="progress-header">
                                <span>è‹±èªç¿»è¨³é€²æ—</span>
                                <span>77%</span>
                            </div>
                            <div class="progress-bar">
                                <div class="progress-fill" style="width: 77%"></div>
                            </div>
                        </div>
                        <div class="progress-item">
                            <div class="progress-header">
                                <span>ä¸­å›½èªç¿»è¨³é€²æ—</span>
                                <span>35%</span>
                            </div>
                            <div class="progress-bar">
                                <div class="progress-fill" style="width: 35%"></div>
                            </div>
                        </div>
                        <div class="progress-item">
                            <div class="progress-header">
                                <span>éŸ“å›½èªç¿»è¨³é€²æ—</span>
                                <span>17%</span>
                            </div>
                            <div class="progress-bar">
                                <div class="progress-fill" style="width: 17%"></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="modal-footer">
            <button class="btn btn-secondary" onclick="KAGAMI.faq.closeLanguageSettings()">ã‚­ãƒ£ãƒ³ã‚»ãƒ«</button>
            <button class="btn btn-primary" onclick="KAGAMI.faq.saveLanguageSettings()">è¨­å®šã‚’ä¿å­˜</button>
        </div>
    </div>
</div>

<!-- FAQç·¨é›†ãƒ¢ãƒ¼ãƒ€ãƒ« -->
<div class="modal" id="faqEditModal" style="display: none;">
    <div class="modal-content modal-lg">
        <div class="modal-header">
            <h2>FAQç·¨é›†</h2>
            <button class="modal-close" onclick="KAGAMI.faq.closeEditModal()">Ã—</button>
        </div>
        <div class="modal-body">
            <form id="faqEditForm">
                <input type="hidden" id="faqId" value="">
                
                <div class="form-group">
                    <label class="form-label required">è³ªå•</label>
                    <textarea class="form-input" id="faqQuestion" rows="3" placeholder="æŠ•è³‡å®¶ã‹ã‚‰ã®è³ªå•ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„" required></textarea>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label class="form-label required">ã‚«ãƒ†ã‚´ãƒª</label>
                        <select class="form-select" id="faqCategory" required>
                            <option value="">ã‚«ãƒ†ã‚´ãƒªã‚’é¸æŠ</option>
                            <option value="financial">è²¡å‹™ãƒ»æ¥­ç¸¾</option>
                            <option value="strategy">çµŒå–¶æˆ¦ç•¥</option>
                            <option value="esg">ESGãƒ»ã‚µã‚¹ãƒ†ãƒŠãƒ“ãƒªãƒ†ã‚£</option>
                            <option value="governance">ã‚¬ãƒãƒŠãƒ³ã‚¹</option>
                            <option value="other">ãã®ä»–</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label required">ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹</label>
                        <select class="form-select" id="faqStatus" required>
                            <option value="draft">ä¸‹æ›¸ã</option>
                            <option value="review">ãƒ¬ãƒ“ãƒ¥ãƒ¼ä¸­</option>
                            <option value="published">å…¬é–‹ä¸­</option>
                            <option value="archived">ã‚¢ãƒ¼ã‚«ã‚¤ãƒ–</option>
                        </select>
                    </div>
                </div>
                
                <div class="form-group">
                    <label class="form-label required">å›ç­”</label>
                    <div class="editor-toolbar">
                        <button type="button" class="editor-btn" onclick="KAGAMI.faq.formatText('bold')" title="å¤ªå­—">
                            <strong>B</strong>
                        </button>
                        <button type="button" class="editor-btn" onclick="KAGAMI.faq.formatText('italic')" title="æ–œä½“">
                            <em>I</em>
                        </button>
                        <button type="button" class="editor-btn" onclick="KAGAMI.faq.formatText('underline')" title="ä¸‹ç·š">
                            <u>U</u>
                        </button>
                        <span class="editor-separator"></span>
                        <button type="button" class="editor-btn" onclick="KAGAMI.faq.formatText('bulletList')" title="ç®‡æ¡æ›¸ã">
                            â€¢ â€•
                        </button>
                        <button type="button" class="editor-btn" onclick="KAGAMI.faq.formatText('numberList')" title="ç•ªå·ä»˜ããƒªã‚¹ãƒˆ">
                            1. â€•
                        </button>
                        <span class="editor-separator"></span>
                        <button type="button" class="editor-btn" onclick="KAGAMI.faq.insertLink()" title="ãƒªãƒ³ã‚¯">
                            ğŸ”—
                        </button>
                        <button type="button" class="editor-btn" onclick="KAGAMI.faq.aiImprove()" title="AIæ”¹å–„">
                            âœ¨ AIæ”¹å–„
                        </button>
                    </div>
                    <textarea class="form-input editor-content" id="faqAnswer" rows="10" placeholder="å›ç­”ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„" required></textarea>
                </div>
                
                <div class="form-group">
                    <label class="form-label">å‚ç…§å…ƒãƒ»ã‚½ãƒ¼ã‚¹</label>
                    <div class="source-list" id="sourceList">
                        <div class="source-item">
                            <input type="text" class="form-input" placeholder="ä¾‹ï¼š2024å¹´3æœˆæœŸæ±ºç®—èª¬æ˜ä¼šè³‡æ–™ P.12">
                            <button type="button" class="btn btn-sm btn-outline" onclick="KAGAMI.faq.removeSource(this)">å‰Šé™¤</button>
                        </div>
                    </div>
                    <button type="button" class="btn btn-sm btn-secondary" onclick="KAGAMI.faq.addSource()">+ ã‚½ãƒ¼ã‚¹è¿½åŠ </button>
                </div>
                
                <div class="form-group">
                    <label class="form-label">ã‚¿ã‚°</label>
                    <input type="text" class="form-input" id="faqTags" placeholder="ã‚¿ã‚°ã‚’ã‚«ãƒ³ãƒåŒºåˆ‡ã‚Šã§å…¥åŠ›ï¼ˆä¾‹ï¼šæ±ºç®—, Q3, æ¥­ç¸¾äºˆæƒ³ï¼‰">
                </div>
                
                <!-- AIæƒ…å ± -->
                <div class="ai-edit-info">
                    <h4>AIåˆ†ææƒ…å ±</h4>
                    <div class="ai-metrics">
                        <div class="ai-metric">
                            <span class="metric-label">é¡ä¼¼FAQæ¤œå‡º</span>
                            <span class="metric-value">3ä»¶ã®é¡ä¼¼FAQãŒè¦‹ã¤ã‹ã‚Šã¾ã—ãŸ</span>
                            <button type="button" class="btn btn-xs btn-outline" onclick="KAGAMI.faq.showSimilar()">ç¢ºèª</button>
                        </div>
                        <div class="ai-metric">
                            <span class="metric-label">å›ç­”å“è³ªã‚¹ã‚³ã‚¢</span>
                            <div class="quality-score">
                                <div class="score-bar">
                                    <div class="score-fill" style="width: 85%;"></div>
                                </div>
                                <span class="score-text">85/100</span>
                            </div>
                        </div>
                        <div class="ai-metric">
                            <span class="metric-label">æ¨å¥¨æ”¹å–„ç‚¹</span>
                            <ul class="improvement-list">
                                <li>æ•°å€¤ã®æ ¹æ‹ ã¨ãªã‚‹è³‡æ–™ã‚’è¿½åŠ ã™ã‚‹ã“ã¨ã‚’æ¨å¥¨</li>
                                <li>å°‚é–€ç”¨èªã«èª¬æ˜ã‚’è¿½åŠ </li>
                            </ul>
                        </div>
                    </div>
                </div>
            </form>
        </div>
        <div class="modal-footer">
            <button type="button" class="btn btn-secondary" onclick="KAGAMI.faq.closeEditModal()">ã‚­ãƒ£ãƒ³ã‚»ãƒ«</button>
            <button type="button" class="btn btn-primary" onclick="KAGAMI.faq.saveFAQ()">ä¿å­˜</button>
            <button type="button" class="btn btn-primary" onclick="KAGAMI.faq.saveFAQAndPublish()">ä¿å­˜ã—ã¦å…¬é–‹</button>
        </div>
    </div>
</div>

<!-- é¡ä¼¼FAQç¢ºèªãƒ¢ãƒ¼ãƒ€ãƒ« -->
<div class="modal" id="similarFAQModal" style="display: none;">
    <div class="modal-content">
        <div class="modal-header">
            <h2>é¡ä¼¼FAQ</h2>
            <button class="modal-close" onclick="KAGAMI.faq.closeSimilarModal()">Ã—</button>
        </div>
        <div class="modal-body">
            <p class="modal-description">ä»¥ä¸‹ã®é¡ä¼¼FAQãŒè¦‹ã¤ã‹ã‚Šã¾ã—ãŸã€‚é‡è¤‡ã‚’é¿ã‘ã‚‹ãŸã‚ã€æ—¢å­˜ã®FAQã®æ›´æ–°ã‚‚æ¤œè¨ã—ã¦ãã ã•ã„ã€‚</p>
            <div class="similar-faq-list">
                <div class="similar-faq-item">
                    <div class="similarity-score">é¡ä¼¼åº¦: 92%</div>
                    <h4>2024å¹´åº¦ã®å£²ä¸Šé«˜ç›®æ¨™ã«ã¤ã„ã¦æ•™ãˆã¦ãã ã•ã„</h4>
                    <p>2024å¹´åº¦ã®å£²ä¸Šé«˜ç›®æ¨™ã¯å‰å¹´æ¯”15%å¢—ã®1,500å„„å††ã‚’è¨ˆç”»ã—ã¦ã„ã¾ã™...</p>
                    <div class="similar-actions">
                        <button class="btn btn-sm btn-outline" onclick="KAGAMI.faq.viewFAQ(123)">è©³ç´°ã‚’è¦‹ã‚‹</button>
                        <button class="btn btn-sm btn-primary" onclick="KAGAMI.faq.mergeFAQ(123)">çµ±åˆã™ã‚‹</button>
                    </div>
                </div>
                <div class="similar-faq-item">
                    <div class="similarity-score">é¡ä¼¼åº¦: 78%</div>
                    <h4>ä¸­æœŸçµŒå–¶è¨ˆç”»ã®å£²ä¸Šç›®æ¨™ã¯ï¼Ÿ</h4>
                    <p>ä¸­æœŸçµŒå–¶è¨ˆç”»ã§ã¯ã€2026å¹´åº¦ã¾ã§ã«å£²ä¸Šé«˜2,000å„„å††ã‚’ç›®æŒ‡ã—ã¦ã„ã¾ã™...</p>
                    <div class="similar-actions">
                        <button class="btn btn-sm btn-outline" onclick="KAGAMI.faq.viewFAQ(124)">è©³ç´°ã‚’è¦‹ã‚‹</button>
                        <button class="btn btn-sm btn-primary" onclick="KAGAMI.faq.mergeFAQ(124)">çµ±åˆã™ã‚‹</button>
                    </div>
                </div>
            </div>
        </div>
        <div class="modal-footer">
            <button class="btn btn-secondary" onclick="KAGAMI.faq.closeSimilarModal()">é–‰ã˜ã‚‹</button>
            <button class="btn btn-primary" onclick="KAGAMI.faq.continueEditing()">æ–°è¦FAQã¨ã—ã¦ç¶šè¡Œ</button>
        </div>
    </div>
</div>

<style>
/* ãƒšãƒ¼ã‚¸ãƒ˜ãƒƒãƒ€ãƒ¼ */
.page-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: var(--space-xl);
}

.page-description {
    color: var(--gray-600);
    font-size: var(--text-sm);
}

.page-header-actions {
    display: flex;
    gap: var(--space-sm);
}

/* AIçµ±è¨ˆã‚°ãƒªãƒƒãƒ‰ */
.ai-stats-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
    gap: var(--space-lg);
    margin-bottom: var(--space-xl);
}

.ai-stat-card {
    background: white;
    border-radius: var(--border-radius-lg);
    padding: var(--space-lg);
    border: 1px solid var(--gray-200);
    transition: all var(--transition-fast);
}

.ai-stat-card:hover {
    transform: translateY(-2px);
    box-shadow: var(--shadow-md);
}

.ai-stat-header {
    display: flex;
    align-items: center;
    gap: var(--space-sm);
    margin-bottom: var(--space-md);
}

.ai-stat-icon {
    font-size: 1.5rem;
}

.ai-stat-label {
    font-size: var(--text-sm);
    color: var(--gray-600);
    font-weight: var(--font-medium);
}

.ai-stat-value {
    font-size: var(--text-3xl);
    font-weight: var(--font-bold);
    color: var(--gray-900);
    margin-bottom: var(--space-md);
}

.ai-stat-unit {
    font-size: var(--text-lg);
    font-weight: var(--font-normal);
    color: var(--gray-600);
}

.ai-stat-chart {
    height: 40px;
    position: relative;
}

.ai-progress {
    margin-top: var(--space-sm);
}

.progress-bar {
    height: 8px;
    background: var(--gray-200);
    border-radius: var(--border-radius-full);
    overflow: hidden;
}

.progress-fill {
    height: 100%;
    background: linear-gradient(90deg, var(--accent-teal), var(--info));
    transition: width var(--transition-normal);
}

.ai-rating {
    display: flex;
    gap: 2px;
    font-size: 1.25rem;
}

.star {
    color: var(--gray-300);
}

.star.filled {
    color: #fbbf24;
}

.star.partial {
    background: linear-gradient(90deg, #fbbf24 80%, var(--gray-300) 80%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
}

.ai-stat-comparison {
    display: flex;
    align-items: center;
    gap: var(--space-sm);
    font-size: var(--text-sm);
}

.comparison-label {
    color: var(--gray-600);
}

.comparison-value {
    font-weight: var(--font-medium);
}

.comparison-value.positive {
    color: var(--success);
}

.comparison-value.negative {
    color: var(--error);
}

/* FAQã‚¿ãƒ– */
.faq-tabs {
    display: flex;
    gap: var(--space-xs);
    border-bottom: 2px solid var(--gray-200);
    margin-bottom: var(--space-lg);
    overflow-x: auto;
}

.faq-tab {
    padding: var(--space-sm) var(--space-md);
    background: none;
    border: none;
    border-bottom: 2px solid transparent;
    font-size: var(--text-sm);
    font-weight: var(--font-medium);
    color: var(--gray-600);
    cursor: pointer;
    transition: all var(--transition-fast);
    display: flex;
    align-items: center;
    gap: var(--space-xs);
    white-space: nowrap;
}

.faq-tab:hover {
    color: var(--gray-900);
    background: var(--gray-50);
}

.faq-tab.active {
    color: var(--accent-teal);
    border-bottom-color: var(--accent-teal);
}

.tab-count {
    padding: 2px 8px;
    background: var(--gray-100);
    border-radius: var(--border-radius-full);
    font-size: var(--text-xs);
}

.faq-tab.active .tab-count {
    background: rgba(20, 184, 166, 0.1);
    color: var(--accent-teal);
}

/* FAQã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ« */
.faq-controls {
    display: flex;
    justify-content: space-between;
    align-items: center;
    gap: var(--space-lg);
    margin-bottom: var(--space-lg);
}

.faq-filters {
    display: flex;
    gap: var(--space-md);
    flex: 1;
}

.bulk-actions {
    display: flex;
    gap: var(--space-sm);
}

/* FAQä¸€è¦§ */
.faq-list {
    display: flex;
    flex-direction: column;
    gap: var(--space-md);
    margin-bottom: var(--space-xl);
}

.faq-item {
    background: white;
    border-radius: var(--border-radius-lg);
    border: 1px solid var(--gray-200);
    overflow: hidden;
    transition: all var(--transition-fast);
}

.faq-item:hover {
    border-color: var(--gray-300);
    box-shadow: var(--shadow-sm);
}

.faq-item-header {
    padding: var(--space-lg);
    display: flex;
    justify-content: space-between;
    align-items: flex-start;
    gap: var(--space-md);
}

.faq-item-info {
    flex: 1;
}

.faq-question {
    font-size: var(--text-base);
    font-weight: var(--font-semibold);
    color: var(--gray-900);
    margin-bottom: var(--space-sm);
}

.faq-meta {
    display: flex;
    flex-wrap: wrap;
    gap: var(--space-md);
    font-size: var(--text-sm);
    color: var(--gray-600);
}

.faq-category {
    padding: 2px 8px;
    background: var(--gray-100);
    border-radius: var(--border-radius-sm);
    font-size: var(--text-xs);
}

.faq-source {
    display: flex;
    align-items: center;
    gap: var(--space-xs);
}

.faq-source::before {
    content: '';
    width: 6px;
    height: 6px;
    border-radius: 50%;
    background: var(--gray-400);
}

.faq-source.ai::before {
    background: var(--info);
}

.faq-source.meeting::before {
    background: var(--accent-teal);
}

.faq-source.manual::before {
    background: var(--warning);
}

.faq-item-actions {
    display: flex;
    align-items: center;
    gap: var(--space-md);
}

.faq-status {
    padding: var(--space-xs) var(--space-sm);
    border-radius: var(--border-radius-full);
    font-size: var(--text-xs);
    font-weight: var(--font-medium);
}

.faq-status.published {
    background: rgba(16, 185, 129, 0.1);
    color: var(--success);
}

.faq-status.draft {
    background: rgba(107, 114, 128, 0.1);
    color: var(--gray-600);
}

.faq-status.review {
    background: rgba(245, 158, 11, 0.1);
    color: var(--warning);
}

.action-btn {
    width: 32px;
    height: 32px;
    display: flex;
    align-items: center;
    justify-content: center;
    background: transparent;
    border: none;
    border-radius: var(--border-radius-md);
    color: var(--gray-600);
    cursor: pointer;
    transition: all var(--transition-fast);
}

.action-btn:hover {
    background: var(--gray-100);
    color: var(--gray-900);
}

.faq-item-content {
    padding: 0 var(--space-lg) var(--space-lg);
    border-top: 1px solid var(--gray-200);
}

.faq-answer {
    padding: var(--space-lg) 0;
    color: var(--gray-700);
    line-height: var(--leading-relaxed);
}

.faq-answer ul {
    margin-top: var(--space-sm);
    padding-left: var(--space-lg);
}

.faq-ai-info {
    display: flex;
    gap: var(--space-xl);
    padding: var(--space-md);
    background: var(--gray-50);
    border-radius: var(--border-radius-md);
    margin-bottom: var(--space-md);
}

.ai-confidence {
    display: flex;
    align-items: center;
    gap: var(--space-sm);
}

.confidence-label,
.sources-label {
    font-size: var(--text-sm);
    color: var(--gray-600);
    font-weight: var(--font-medium);
}

.confidence-bar {
    width: 100px;
    height: 6px;
    background: var(--gray-200);
    border-radius: var(--border-radius-full);
    overflow: hidden;
}

.confidence-fill {
    height: 100%;
    background: linear-gradient(90deg, var(--accent-teal), var(--info));
}

.confidence-value {
    font-size: var(--text-sm);
    font-weight: var(--font-semibold);
    color: var(--gray-900);
}

.ai-sources {
    display: flex;
    align-items: center;
    gap: var(--space-sm);
    flex-wrap: wrap;
}

.source-link {
    font-size: var(--text-sm);
    color: var(--info);
    text-decoration: none;
}

.source-link:hover {
    text-decoration: underline;
}

.faq-actions {
    display: flex;
    gap: var(--space-sm);
}

.btn.danger {
    color: var(--error);
    border-color: var(--error);
}

.btn.danger:hover {
    background: rgba(239, 68, 68, 0.05);
}

/* AIææ¡ˆã‚»ã‚¯ã‚·ãƒ§ãƒ³ */
.ai-suggestions {
    background: linear-gradient(135deg, rgba(20, 184, 166, 0.05) 0%, rgba(59, 130, 246, 0.05) 100%);
    border-radius: var(--border-radius-xl);
    padding: var(--space-xl);
    border: 1px solid rgba(20, 184, 166, 0.2);
}

.suggestions-title {
    display: flex;
    align-items: center;
    gap: var(--space-sm);
    font-size: var(--text-xl);
    font-weight: var(--font-semibold);
    color: var(--gray-900);
    margin-bottom: var(--space-lg);
}

.suggestions-icon {
    font-size: 1.5rem;
}

.suggestions-list {
    display: flex;
    flex-direction: column;
    gap: var(--space-md);
}

.suggestion-item {
    background: white;
    border-radius: var(--border-radius-lg);
    padding: var(--space-md);
    border: 1px solid var(--gray-200);
    display: flex;
    justify-content: space-between;
    align-items: center;
    gap: var(--space-md);
}

.suggestion-content {
    flex: 1;
}

.suggestion-text {
    font-size: var(--text-sm);
    color: var(--gray-700);
    margin-bottom: var(--space-sm);
}

.suggestion-meta {
    display: flex;
    gap: var(--space-md);
    font-size: var(--text-xs);
    color: var(--gray-600);
}

/* è¨€èªã‚»ãƒ¬ã‚¯ã‚¿ãƒ¼ */
.language-selector {
    display: flex;
    justify-content: space-between;
    align-items: center;
    background: var(--gray-50);
    padding: var(--space-md) var(--space-lg);
    border-radius: var(--border-radius-lg);
    margin-bottom: var(--space-lg);
}

.language-tabs {
    display: flex;
    gap: var(--space-sm);
}

.language-tab {
    display: flex;
    align-items: center;
    gap: var(--space-xs);
    padding: var(--space-sm) var(--space-md);
    background: white;
    border: 1px solid var(--gray-300);
    border-radius: var(--border-radius-md);
    font-size: var(--text-sm);
    font-weight: var(--font-medium);
    color: var(--gray-700);
    cursor: pointer;
    transition: all var(--transition-fast);
}

.language-tab:hover {
    background: var(--gray-100);
    border-color: var(--gray-400);
}

.language-tab.active {
    background: var(--accent-teal);
    color: white;
    border-color: var(--accent-teal);
}

.flag {
    font-size: 1.2em;
}

.lang-count {
    padding: 2px 6px;
    background: rgba(255, 255, 255, 0.2);
    border-radius: var(--border-radius-full);
    font-size: var(--text-xs);
}

.language-tab.active .lang-count {
    background: rgba(255, 255, 255, 0.3);
}

.language-actions {
    display: flex;
    gap: var(--space-sm);
}

/* ç¿»è¨³ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ */
.translation-status {
    display: flex;
    gap: var(--space-xs);
    margin-right: var(--space-md);
}

.translation-badge {
    display: inline-flex;
    align-items: center;
    gap: 4px;
    padding: 2px 8px;
    border-radius: var(--border-radius-full);
    font-size: var(--text-xs);
    font-weight: var(--font-medium);
}

.translation-badge.complete {
    background: rgba(16, 185, 129, 0.1);
    color: var(--success);
}

.translation-badge.pending {
    background: rgba(107, 114, 128, 0.1);
    color: var(--gray-600);
}

.translation-badge.reviewing {
    background: rgba(245, 158, 11, 0.1);
    color: var(--warning);
}

/* å¤šè¨€èªç®¡ç† */
.language-management {
    padding: var(--space-md);
    background: var(--gray-50);
    border-radius: var(--border-radius-md);
    margin-bottom: var(--space-md);
}

.language-versions {
    display: grid;
    gap: var(--space-sm);
}

.language-version {
    display: flex;
    align-items: center;
    gap: var(--space-md);
    padding: var(--space-sm);
    background: white;
    border: 1px solid var(--gray-200);
    border-radius: var(--border-radius-sm);
}

.lang-label {
    font-size: var(--text-sm);
    font-weight: var(--font-medium);
    color: var(--gray-700);
    min-width: 120px;
}

.lang-status {
    font-size: var(--text-xs);
    padding: 2px 8px;
    border-radius: var(--border-radius-full);
}

.lang-status.complete {
    background: rgba(16, 185, 129, 0.1);
    color: var(--success);
}

.lang-status.pending {
    background: rgba(107, 114, 128, 0.1);
    color: var(--gray-600);
}

.lang-status.reviewing {
    background: rgba(245, 158, 11, 0.1);
    color: var(--warning);
}

.btn-xs {
    padding: 2px 8px;
    font-size: var(--text-xs);
}

/* å¤šè¨€èªè¨­å®šãƒ¢ãƒ¼ãƒ€ãƒ« */
.language-settings-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: var(--space-xl);
}

.settings-section {
    background: var(--gray-50);
    padding: var(--space-lg);
    border-radius: var(--border-radius-md);
}

.settings-section.full-width {
    grid-column: 1 / -1;
}

.settings-section h3 {
    margin-bottom: var(--space-md);
    color: var(--gray-700);
    font-size: var(--text-lg);
}

.supported-languages {
    display: grid;
    gap: var(--space-sm);
}

.language-item {
    display: flex;
    align-items: center;
    gap: var(--space-sm);
}

.language-item label {
    display: flex;
    align-items: center;
    gap: var(--space-sm);
    cursor: pointer;
    font-size: var(--text-sm);
}

.translation-settings {
    display: grid;
    gap: var(--space-md);
}

.setting-item {
    display: flex;
    flex-direction: column;
    gap: var(--space-xs);
}

.setting-label {
    font-size: var(--text-sm);
    font-weight: var(--font-medium);
    color: var(--gray-700);
}

.form-select {
    padding: var(--space-sm);
    border: 1px solid var(--gray-300);
    border-radius: var(--border-radius-sm);
    background: white;
    font-size: var(--text-sm);
}

.toggle-label {
    display: flex;
    align-items: center;
    gap: var(--space-sm);
    cursor: pointer;
    font-size: var(--text-sm);
}

.toggle {
    position: relative;
    width: 44px;
    height: 24px;
    background: var(--gray-300);
    border-radius: var(--border-radius-full);
    transition: all var(--transition-fast);
}

.toggle::after {
    content: '';
    position: absolute;
    top: 2px;
    left: 2px;
    width: 20px;
    height: 20px;
    background: white;
    border-radius: var(--border-radius-full);
    transition: all var(--transition-fast);
}

.toggle-label input:checked + .toggle {
    background: var(--accent-teal);
}

.toggle-label input:checked + .toggle::after {
    left: 22px;
}

.toggle-label input {
    display: none;
}

.translation-stats {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
    gap: var(--space-lg);
    margin-bottom: var(--space-xl);
}

.translation-stats .stat-item {
    text-align: center;
}

.translation-stats .stat-value {
    font-size: var(--text-2xl);
    font-weight: var(--font-bold);
    color: var(--accent-teal);
    margin-bottom: var(--space-xs);
}

.translation-stats .stat-label {
    font-size: var(--text-sm);
    color: var(--gray-600);
}

.progress-overview {
    display: grid;
    gap: var(--space-md);
}

.progress-item {
    display: flex;
    flex-direction: column;
    gap: var(--space-xs);
}

.progress-header {
    display: flex;
    justify-content: space-between;
    font-size: var(--text-sm);
    color: var(--gray-700);
}

/* ãƒ•ã‚©ãƒ¼ãƒ ã‚¹ã‚¿ã‚¤ãƒ« */
.form-group {
    margin-bottom: var(--space-md);
}

.form-group label {
    display: block;
    font-size: var(--text-sm);
    font-weight: var(--font-medium);
    color: var(--gray-700);
    margin-bottom: var(--space-xs);
}

.form-control {
    width: 100%;
    padding: var(--space-sm);
    border: 1px solid var(--gray-300);
    border-radius: var(--border-radius-sm);
    font-size: var(--text-sm);
    transition: border-color var(--transition-fast);
}

.form-control:focus {
    outline: none;
    border-color: var(--accent-teal);
    box-shadow: 0 0 0 3px rgba(20, 184, 166, 0.1);
}

.form-control textarea {
    resize: vertical;
    min-height: 80px;
}

/* ã‚¢ã‚³ãƒ¼ãƒ‡ã‚£ã‚ªãƒ³ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ */
.faq-item-content {
    transition: all var(--transition-normal);
    overflow: hidden;
}

.faq-item.expanded .action-btn svg {
    transform: rotate(180deg);
}

.action-btn svg {
    transition: transform var(--transition-fast);
}

/* FAQç·¨é›†ãƒ¢ãƒ¼ãƒ€ãƒ« */
.editor-toolbar {
    display: flex;
    align-items: center;
    gap: var(--space-xs);
    padding: var(--space-sm);
    background: var(--gray-50);
    border: 1px solid var(--gray-300);
    border-bottom: none;
    border-radius: var(--border-radius-sm) var(--border-radius-sm) 0 0;
}

.editor-btn {
    width: 32px;
    height: 32px;
    display: flex;
    align-items: center;
    justify-content: center;
    background: white;
    border: 1px solid var(--gray-300);
    border-radius: var(--border-radius-sm);
    font-size: var(--text-sm);
    color: var(--gray-700);
    cursor: pointer;
    transition: all var(--transition-fast);
}

.editor-btn:hover {
    background: var(--gray-100);
    border-color: var(--gray-400);
}

.editor-btn:active {
    background: var(--gray-200);
}

.editor-separator {
    width: 1px;
    height: 20px;
    background: var(--gray-300);
    margin: 0 var(--space-xs);
}

.editor-content {
    border-radius: 0 0 var(--border-radius-sm) var(--border-radius-sm);
    border-top: none;
}

.source-list {
    display: flex;
    flex-direction: column;
    gap: var(--space-sm);
    margin-bottom: var(--space-sm);
}

.source-item {
    display: flex;
    gap: var(--space-sm);
    align-items: center;
}

.source-item .form-input {
    flex: 1;
}

.ai-edit-info {
    background: linear-gradient(135deg, rgba(20, 184, 166, 0.05) 0%, rgba(59, 130, 246, 0.05) 100%);
    border: 1px solid rgba(20, 184, 166, 0.2);
    border-radius: var(--border-radius-md);
    padding: var(--space-lg);
    margin-top: var(--space-lg);
}

.ai-edit-info h4 {
    margin-bottom: var(--space-md);
    color: var(--gray-700);
    font-size: var(--text-md);
}

.ai-metrics {
    display: grid;
    gap: var(--space-md);
}

.ai-metric {
    display: flex;
    align-items: center;
    gap: var(--space-md);
    padding: var(--space-sm);
    background: white;
    border-radius: var(--border-radius-sm);
}

.metric-label {
    font-size: var(--text-sm);
    font-weight: var(--font-medium);
    color: var(--gray-600);
    min-width: 120px;
}

.metric-value {
    flex: 1;
    font-size: var(--text-sm);
    color: var(--gray-700);
}

.quality-score {
    display: flex;
    align-items: center;
    gap: var(--space-sm);
    flex: 1;
}

.quality-score .score-bar {
    flex: 1;
    height: 8px;
    background: var(--gray-200);
    border-radius: var(--border-radius-full);
    overflow: hidden;
}

.quality-score .score-fill {
    height: 100%;
    background: linear-gradient(90deg, var(--accent-teal), var(--info));
}

.quality-score .score-text {
    font-size: var(--text-sm);
    font-weight: var(--font-semibold);
    color: var(--gray-700);
}

.improvement-list {
    margin: 0;
    padding-left: var(--space-lg);
    font-size: var(--text-sm);
    color: var(--gray-600);
}

.improvement-list li {
    margin-bottom: var(--space-xs);
}

/* é¡ä¼¼FAQãƒ¢ãƒ¼ãƒ€ãƒ« */
.modal-description {
    color: var(--gray-600);
    margin-bottom: var(--space-lg);
}

.similar-faq-list {
    display: flex;
    flex-direction: column;
    gap: var(--space-md);
}

.similar-faq-item {
    padding: var(--space-md);
    background: var(--gray-50);
    border-radius: var(--border-radius-md);
    border: 1px solid var(--gray-200);
}

.similarity-score {
    display: inline-block;
    padding: var(--space-xs) var(--space-sm);
    background: var(--info);
    color: white;
    font-size: var(--text-xs);
    font-weight: var(--font-medium);
    border-radius: var(--border-radius-sm);
    margin-bottom: var(--space-sm);
}

.similar-faq-item h4 {
    margin-bottom: var(--space-sm);
    color: var(--gray-900);
    font-size: var(--text-base);
}

.similar-faq-item p {
    color: var(--gray-600);
    font-size: var(--text-sm);
    margin-bottom: var(--space-md);
}

.similar-actions {
    display: flex;
    gap: var(--space-sm);
}

/* ãƒ•ã‚©ãƒ¼ãƒ è¦ç´ ã®è¿½åŠ ã‚¹ã‚¿ã‚¤ãƒ« */
.form-row {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: var(--space-md);
}

.form-group {
    margin-bottom: var(--space-lg);
}

.form-label {
    display: block;
    margin-bottom: var(--space-sm);
    font-size: var(--text-sm);
    font-weight: var(--font-medium);
    color: var(--gray-700);
}

.form-label.required::after {
    content: " *";
    color: var(--error);
}

.form-input,
.form-select {
    width: 100%;
    padding: var(--space-sm) var(--space-md);
    border: 1px solid var(--gray-300);
    border-radius: var(--border-radius-sm);
    font-size: var(--text-sm);
    transition: all var(--transition-fast);
}

.form-input:focus,
.form-select:focus {
    outline: none;
    border-color: var(--accent-teal);
    box-shadow: 0 0 0 3px rgba(20, 184, 166, 0.1);
}

textarea.form-input {
    resize: vertical;
    min-height: 100px;
}

.form-label.required::after {
    content: " *";
    color: var(--error);
}

.form-row {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: var(--space-md);
}

/* ã‚¨ãƒ‡ã‚£ã‚¿ãƒ„ãƒ¼ãƒ«ãƒãƒ¼ */
.editor-toolbar {
    display: flex;
    align-items: center;
    gap: var(--space-xs);
    padding: var(--space-sm);
    background: var(--gray-50);
    border: 1px solid var(--gray-300);
    border-bottom: none;
    border-radius: var(--border-radius-sm) var(--border-radius-sm) 0 0;
}

.editor-btn {
    width: 32px;
    height: 32px;
    display: flex;
    align-items: center;
    justify-content: center;
    background: white;
    border: 1px solid var(--gray-300);
    border-radius: var(--border-radius-sm);
    font-size: var(--text-sm);
    color: var(--gray-700);
    cursor: pointer;
    transition: all var(--transition-fast);
}

.editor-btn:hover {
    background: var(--gray-100);
    border-color: var(--gray-400);
}

.editor-btn:active {
    background: var(--gray-200);
}

.editor-separator {
    width: 1px;
    height: 20px;
    background: var(--gray-300);
    margin: 0 var(--space-xs);
}

.editor-content {
    border-radius: 0 0 var(--border-radius-sm) var(--border-radius-sm);
    border-top: none;
}

.source-list {
    display: flex;
    flex-direction: column;
    gap: var(--space-sm);
    margin-bottom: var(--space-sm);
}

.source-item {
    display: flex;
    gap: var(--space-sm);
    align-items: center;
}

.source-item .form-input {
    flex: 1;
}

/* z-indexå€¤ã®è¿½åŠ  */
:root {
    --z-dropdown: 1000;
    --z-sticky: 1020;
    --z-fixed: 1030;
    --z-modal-backdrop: 1040;
    --z-modal: 1050;
    --z-popover: 1060;
    --z-tooltip: 1070;
    --z-notification: 1080;
    --z-overlay: 9999;
}

/* AIæ”¹å–„ãƒ¢ãƒ¼ãƒ€ãƒ« */
.ai-improve-content {
    display: grid;
    gap: var(--space-xl);
}

.current-faq {
    background: var(--gray-50);
    padding: var(--space-lg);
    border-radius: var(--border-radius-md);
}

.current-faq h3 {
    margin-bottom: var(--space-md);
    color: var(--gray-700);
    font-size: var(--text-lg);
}

.faq-preview {
    background: white;
    padding: var(--space-md);
    border-radius: var(--border-radius-sm);
    border: 1px solid var(--gray-200);
}

.faq-preview h4 {
    margin-bottom: var(--space-sm);
    color: var(--gray-900);
    font-size: var(--text-base);
}

.faq-preview p {
    color: var(--gray-600);
    font-size: var(--text-sm);
    line-height: var(--leading-relaxed);
}

.ai-suggestions h3 {
    margin-bottom: var(--space-md);
    color: var(--gray-700);
    font-size: var(--text-lg);
}

.suggestion-tabs {
    display: flex;
    gap: var(--space-xs);
    margin-bottom: var(--space-lg);
    border-bottom: 2px solid var(--gray-200);
}

.suggestion-tab {
    padding: var(--space-sm) var(--space-md);
    background: none;
    border: none;
    border-bottom: 2px solid transparent;
    font-size: var(--text-sm);
    font-weight: var(--font-medium);
    color: var(--gray-600);
    cursor: pointer;
    transition: all var(--transition-fast);
}

.suggestion-tab:hover {
    color: var(--gray-900);
}

.suggestion-tab.active {
    color: var(--accent-teal);
    border-bottom-color: var(--accent-teal);
}

.suggestion-content {
    min-height: 200px;
    padding: var(--space-lg);
    background: var(--gray-50);
    border-radius: var(--border-radius-md);
}

.ai-suggestion h4 {
    margin-bottom: var(--space-md);
    color: var(--gray-800);
    font-size: var(--text-md);
}

.ai-suggestion ul {
    margin: var(--space-md) 0;
    padding-left: var(--space-lg);
}

.ai-suggestion li {
    margin-bottom: var(--space-sm);
    color: var(--gray-700);
}

.suggested-text {
    margin-top: var(--space-lg);
    padding: var(--space-md);
    background: white;
    border-radius: var(--border-radius-sm);
    border: 1px solid var(--gray-200);
}

.suggested-text h5 {
    margin-bottom: var(--space-sm);
    color: var(--accent-teal);
    font-size: var(--text-sm);
    font-weight: var(--font-semibold);
}

.ai-metrics {
    display: grid;
    gap: var(--space-md);
    margin-top: var(--space-lg);
}

.metric-item {
    display: flex;
    align-items: center;
    gap: var(--space-md);
}

.metric-label {
    font-size: var(--text-sm);
    color: var(--gray-600);
    min-width: 120px;
}

.metric-bar {
    flex: 1;
    height: 8px;
    background: var(--gray-200);
    border-radius: var(--border-radius-full);
    overflow: hidden;
}

.metric-fill {
    height: 100%;
    background: linear-gradient(90deg, var(--accent-teal), var(--info));
    transition: width var(--transition-normal);
}

.metric-value {
    font-size: var(--text-sm);
    font-weight: var(--font-semibold);
    color: var(--gray-700);
    min-width: 50px;
}

.loading-spinner {
    display: flex;
    align-items: center;
    justify-content: center;
    min-height: 200px;
    color: var(--gray-500);
    font-size: var(--text-sm);
}

/* ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ– */
@media (max-width: 1024px) {
    .faq-controls {
        flex-direction: column;
        align-items: stretch;
    }
    
    .faq-filters {
        flex-wrap: wrap;
    }
    
    .search-box {
        width: 100%;
    }
}

@media (max-width: 768px) {
    .page-header {
        flex-direction: column;
        align-items: flex-start;
        gap: var(--space-md);
    }
    
    .ai-stats-grid {
        grid-template-columns: 1fr;
    }
    
    .faq-tabs {
        -webkit-overflow-scrolling: touch;
    }
    
    .faq-item-header {
        flex-direction: column;
    }
    
    .faq-ai-info {
        flex-direction: column;
    }
    
    .suggestion-item {
        flex-direction: column;
        align-items: stretch;
    }
}
</style>

<script>
// FAQç®¡ç†ãƒšãƒ¼ã‚¸ç”¨JavaScript
(function() {
    'use strict';
    
    // FAQãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã®å®šç¾©
    const FAQModule = {
        currentEditId: null,
        
        // FAQã®å±•é–‹/æŠ˜ã‚ŠãŸãŸã¿
        toggleExpand: function(button) {
            console.log('toggleExpand called');
            const item = button.closest('.faq-item');
            const content = item.querySelector('.faq-item-content');
            const arrow = button.querySelector('svg');
            
            if (!content) {
                console.error('Content not found');
                return;
            }
            
            // ç¾åœ¨ã®è¡¨ç¤ºçŠ¶æ…‹ã‚’ç¢ºèª
            const isCurrentlyHidden = content.style.display === 'none' || getComputedStyle(content).display === 'none';
            
            if (isCurrentlyHidden) {
                // è¡¨ç¤ºã™ã‚‹
                content.style.display = 'block';
                arrow.style.transform = 'rotate(180deg)';
                item.classList.add('expanded');
            } else {
                // éè¡¨ç¤ºã«ã™ã‚‹
                content.style.display = 'none';
                arrow.style.transform = 'rotate(0deg)';
                item.classList.remove('expanded');
            }
        },
        
        // AIãƒ¢ãƒ‡ãƒ«ã®æ›´æ–°
        trainModel: function() {
            if (window.KAGAMI && window.KAGAMI.notification) {
                window.KAGAMI.notification.show('AIãƒ¢ãƒ‡ãƒ«ã®æ›´æ–°ã‚’é–‹å§‹ã—ã¾ã—ãŸ', 'info');
            }
        },
        
        // FAQè¿½åŠ ãƒ¢ãƒ¼ãƒ€ãƒ«
        showAddModal: function() {
            const modal = document.getElementById('faqEditModal');
            if (modal) {
                // æ–°è¦ä½œæˆç”¨ã«ãƒ•ã‚©ãƒ¼ãƒ ã‚’ã‚¯ãƒªã‚¢
                document.getElementById('faqId').value = '';
                document.getElementById('faqQuestion').value = '';
                document.getElementById('faqAnswer').value = '';
                document.getElementById('faqCategory').value = '';
                document.getElementById('faqStatus').value = 'draft';
                document.getElementById('faqTags').value = '';
                
                // ãƒ¢ãƒ¼ãƒ€ãƒ«ã‚’è¡¨ç¤º
                modal.style.opacity = '1';
                modal.style.visibility = 'visible';
                modal.classList.add('modal-show');
                modal.classList.remove('modal-hide');
            }
        },
        
        // FAQç·¨é›†
        edit: function(id) {
            console.log('Edit FAQ:', id);
            const modal = document.getElementById('faqEditModal');
            if (modal) {
                // ãƒ¢ãƒƒã‚¯ãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—ï¼ˆå®Ÿéš›ã®å®Ÿè£…ã§ã¯APIã‹ã‚‰å–å¾—ï¼‰
                const faqItem = document.querySelector(`.faq-item:nth-child(${id})`);
                if (faqItem) {
                    const question = faqItem.querySelector('.faq-question').textContent;
                    const answer = faqItem.querySelector('.faq-answer p')?.textContent || '';
                    const category = faqItem.querySelector('.faq-category')?.textContent || '';
                    const status = faqItem.querySelector('.faq-status');
                    const statusValue = status?.classList.contains('published') ? 'published' :
                                      status?.classList.contains('draft') ? 'draft' :
                                      status?.classList.contains('review') ? 'review' : 'archived';
                    
                    // ãƒ•ã‚©ãƒ¼ãƒ ã«å€¤ã‚’è¨­å®š
                    document.getElementById('faqId').value = id;
                    document.getElementById('faqQuestion').value = question;
                    document.getElementById('faqAnswer').value = answer;
                    document.getElementById('faqCategory').value = this.getCategoryValue(category);
                    document.getElementById('faqStatus').value = statusValue;
                }
                
                // ãƒ¢ãƒ¼ãƒ€ãƒ«ã‚’è¡¨ç¤º
                modal.style.opacity = '1';
                modal.style.visibility = 'visible';
                modal.classList.add('modal-show');
                modal.classList.remove('modal-hide');
                
                if (window.KAGAMI && window.KAGAMI.notification) {
                    window.KAGAMI.notification.show('FAQç·¨é›†ç”»é¢ã‚’é–‹ãã¾ã—ãŸ', 'info');
                }
            }
        },
        
        // ã‚«ãƒ†ã‚´ãƒªå€¤ã‚’å–å¾—
        getCategoryValue: function(name) {
            const categories = {
                'è²¡å‹™ãƒ»æ¥­ç¸¾': 'financial',
                'çµŒå–¶æˆ¦ç•¥': 'strategy',
                'ESGãƒ»ã‚µã‚¹ãƒ†ãƒŠãƒ“ãƒªãƒ†ã‚£': 'esg',
                'ã‚¬ãƒãƒŠãƒ³ã‚¹': 'governance',
                'ãã®ä»–': 'other'
            };
            return categories[name] || 'other';
        },
        
        // FAQä¿å­˜
        saveFAQ: function() {
            const question = document.getElementById('faqQuestion').value;
            const answer = document.getElementById('faqAnswer').value;
            
            if (!question.trim() || !answer.trim()) {
                if (window.KAGAMI && window.KAGAMI.notification) {
                    window.KAGAMI.notification.error('è³ªå•ã¨å›ç­”ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„');
                }
                return;
            }
            
            // ä¿å­˜å‡¦ç†ï¼ˆå®Ÿéš›ã®å®Ÿè£…ã§ã¯APIå‘¼ã³å‡ºã—ï¼‰
            if (window.KAGAMI && window.KAGAMI.notification) {
                window.KAGAMI.notification.success('FAQã‚’ä¿å­˜ã—ã¾ã—ãŸ');
            }
            this.closeEditModal();
        },
        
        // FAQä¿å­˜ã—ã¦å…¬é–‹
        saveFAQAndPublish: function() {
            document.getElementById('faqStatus').value = 'published';
            this.saveFAQ();
        },
        
        // FAQç·¨é›†ãƒ¢ãƒ¼ãƒ€ãƒ«ã‚’é–‰ã˜ã‚‹
        closeEditModal: function() {
            const modal = document.getElementById('faqEditModal');
            if (modal) {
                modal.classList.add('modal-hide');
                modal.classList.remove('modal-show');
                setTimeout(() => {
                    modal.style.opacity = '0';
                    modal.style.visibility = 'hidden';
                }, 300);
            }
        },
        
        // AIæ”¹å–„
        improve: function(id) {
            console.log('Improve FAQ:', id);
            const modal = document.getElementById('aiImproveModal');
            if (modal) {
                // FAQãƒ‡ãƒ¼ã‚¿ã‚’å–å¾—
                const faqItem = document.querySelector(`.faq-item:nth-child(${id})`);
                if (faqItem) {
                    const question = faqItem.querySelector('.faq-question').textContent;
                    const answer = faqItem.querySelector('.faq-answer p')?.textContent || '';
                    
                    // ãƒ¢ãƒ¼ãƒ€ãƒ«ã«è¡¨ç¤º
                    document.getElementById('aiImproveQuestion').textContent = question;
                    document.getElementById('aiImproveAnswer').textContent = answer;
                    
                    // AIåˆ†æã‚’ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ãƒˆ
                    this.startAIAnalysis(id, question, answer);
                }
                
                // ãƒ¢ãƒ¼ãƒ€ãƒ«ã‚’è¡¨ç¤º
                modal.style.opacity = '1';
                modal.style.visibility = 'visible';
                modal.classList.add('modal-show');
                modal.classList.remove('modal-hide');
            }
        },
        
        // AIåˆ†æé–‹å§‹
        startAIAnalysis: function(id, question, answer) {
            const suggestionContent = document.getElementById('suggestionContent');
            suggestionContent.innerHTML = '<div class="loading-spinner">AIåˆ†æä¸­...</div>';
            
            // 2ç§’å¾Œã«çµæœã‚’è¡¨ç¤ºï¼ˆãƒ¢ãƒƒã‚¯ï¼‰
            setTimeout(() => {
                this.showAISuggestions('clarity');
                this.updateAIMetrics(85, 78, 92);
            }, 2000);
        },
        
        // AIææ¡ˆè¡¨ç¤º
        showAISuggestions: function(type) {
            const suggestionContent = document.getElementById('suggestionContent');
            const suggestions = {
                clarity: `
                    <div class="ai-suggestion">
                        <h4>ææ¡ˆå†…å®¹</h4>
                        <p>ç¾åœ¨ã®å›ç­”ã‚’ã‚ˆã‚Šæ˜ç¢ºã«ã™ã‚‹ãŸã‚ã®æ”¹å–„ææ¡ˆï¼š</p>
                        <ul>
                            <li>å°‚é–€ç”¨èªã«ç°¡æ½”ãªèª¬æ˜ã‚’è¿½åŠ </li>
                            <li>æ–‡ç« ã‚’çŸ­ãåŒºåˆ‡ã£ã¦èª­ã¿ã‚„ã™ã</li>
                            <li>é‡è¦ãªãƒã‚¤ãƒ³ãƒˆã‚’ç®‡æ¡æ›¸ãã§æ•´ç†</li>
                        </ul>
                        <div class="suggested-text">
                            <h5>æ”¹å–„å¾Œã®å›ç­”ä¾‹</h5>
                            <p>2024å¹´åº¦ã®å–¶æ¥­åˆ©ç›Šç‡ç›®æ¨™ã¯<strong>15%ä»¥ä¸Š</strong>ã‚’è¨­å®šã—ã¦ã„ã¾ã™ã€‚</p>
                            <p>ã“ã‚Œã¯å‰å¹´åº¦å®Ÿç¸¾ã®13.8%ã‹ã‚‰ç´„1.2ãƒã‚¤ãƒ³ãƒˆã®æ”¹å–„ã‚’ç›®æŒ‡ã™ã‚‚ã®ã§ã€ä¸»ã«ä»¥ä¸‹ã®æ–½ç­–ã«ã‚ˆã‚Šé”æˆã‚’è¦‹è¾¼ã‚“ã§ã„ã¾ã™ï¼š</p>
                            <ul>
                                <li><strong>ç”Ÿç”£åŠ¹ç‡ã®å‘ä¸Š</strong>ï¼šåŸä¾¡ç‡ã‚’0.5ãƒã‚¤ãƒ³ãƒˆæ”¹å–„</li>
                                <li><strong>é«˜ä»˜åŠ ä¾¡å€¤è£½å“ã¸ã®ã‚·ãƒ•ãƒˆ</strong>ï¼š0.4ãƒã‚¤ãƒ³ãƒˆå¢—</li>
                                <li><strong>è²©ç®¡è²»ã®æœ€é©åŒ–</strong>ï¼š0.3ãƒã‚¤ãƒ³ãƒˆå‰Šæ¸›</li>
                            </ul>
                        </div>
                    </div>
                `,
                completeness: `
                    <div class="ai-suggestion">
                        <h4>ææ¡ˆå†…å®¹</h4>
                        <p>å›ç­”ã®å®Œå…¨æ€§ã‚’é«˜ã‚ã‚‹ãŸã‚ã®è¿½åŠ è¦ç´ ï¼š</p>
                        <ul>
                            <li>ãƒªã‚¹ã‚¯è¦å› ã¨å¯¾ç­–ã®è¨˜è¼‰</li>
                            <li>é€²æ—ãƒ¢ãƒ‹ã‚¿ãƒªãƒ³ã‚°æ–¹æ³•ã®èª¬æ˜</li>
                            <li>é–¢é€£ã™ã‚‹ä¸­é•·æœŸç›®æ¨™ã¨ã®æ•´åˆæ€§</li>
                        </ul>
                    </div>
                `,
                tone: `
                    <div class="ai-suggestion">
                        <h4>ææ¡ˆå†…å®¹</h4>
                        <p>æŠ•è³‡å®¶å‘ã‘ã®é©åˆ‡ãªãƒˆãƒ¼ãƒ³èª¿æ•´ï¼š</p>
                        <ul>
                            <li>ã‚ˆã‚Šãƒ—ãƒ­ãƒ•ã‚§ãƒƒã‚·ãƒ§ãƒŠãƒ«ãªè¡¨ç¾ã«</li>
                            <li>æ•°å€¤æ ¹æ‹ ã‚’å¼·èª¿</li>
                            <li>è‡ªä¿¡ã‚’æŒã£ãŸè¡¨ç¾ã«å¤‰æ›´</li>
                        </ul>
                    </div>
                `,
                structure: `
                    <div class="ai-suggestion">
                        <h4>ææ¡ˆå†…å®¹</h4>
                        <p>å›ç­”ã®æ§‹é€ ã‚’æ”¹å–„ï¼š</p>
                        <ul>
                            <li>çµè«–ã‚’å…ˆã«è¿°ã¹ã‚‹</li>
                            <li>è«–ç†çš„ãªæµã‚Œã§èª¬æ˜</li>
                            <li>è¦ç´„ã‚’æœ€å¾Œã«è¿½åŠ </li>
                        </ul>
                    </div>
                `
            };
            
            suggestionContent.innerHTML = suggestions[type] || suggestions.clarity;
        },
        
        // AIãƒ¡ãƒˆãƒªã‚¯ã‚¹æ›´æ–°
        updateAIMetrics: function(readability, expertise, completeness) {
            const metrics = [
                { value: readability, selector: '.ai-metrics .metric-item:nth-child(1)' },
                { value: expertise, selector: '.ai-metrics .metric-item:nth-child(2)' },
                { value: completeness, selector: '.ai-metrics .metric-item:nth-child(3)' }
            ];
            
            metrics.forEach(metric => {
                const item = document.querySelector(metric.selector);
                if (item) {
                    const fill = item.querySelector('.metric-fill');
                    const value = item.querySelector('.metric-value');
                    fill.style.width = metric.value + '%';
                    value.textContent = metric.value + '/100';
                }
            });
        },
        
        // AIæ”¹å–„ãƒ¢ãƒ¼ãƒ€ãƒ«ã‚’é–‰ã˜ã‚‹
        closeAIImproveModal: function() {
            const modal = document.getElementById('aiImproveModal');
            if (modal) {
                modal.classList.add('modal-hide');
                modal.classList.remove('modal-show');
                setTimeout(() => {
                    modal.style.opacity = '0';
                    modal.style.visibility = 'hidden';
                }, 300);
            }
        },
        
        // AIæ”¹å–„ã‚’é©ç”¨
        applyAIImprovement: function() {
            if (window.KAGAMI && window.KAGAMI.notification) {
                window.KAGAMI.notification.success('AIæ”¹å–„ã‚’é©ç”¨ã—ã¾ã—ãŸ');
            }
            this.closeAIImproveModal();
        },
        
        // ã‚¢ãƒ¼ã‚«ã‚¤ãƒ–
        archive: function(id) {
            console.log('Archive FAQ:', id);
            if (window.KAGAMI && window.KAGAMI.notification) {
                window.KAGAMI.notification.warning('FAQã‚’ã‚¢ãƒ¼ã‚«ã‚¤ãƒ–ã—ã¾ã—ãŸ');
            }
        },
        
        // ä¸€æ‹¬å…¬é–‹
        bulkPublish: function() {
            console.log('Bulk publish');
        },
        
        // ä¸€æ‹¬ã‚¢ãƒ¼ã‚«ã‚¤ãƒ–
        bulkArchive: function() {
            console.log('Bulk archive');
        },
        
        // ææ¡ˆã‹ã‚‰ä½œæˆ
        createFromSuggestion: function(id) {
            console.log('Create from suggestion:', id);
        },
        
        // ææ¡ˆã‚’æ›´æ–°
        updateSuggestion: function(id) {
            console.log('Update suggestion:', id);
        },
        
        // å¤šè¨€èªè¨­å®šè¡¨ç¤º
        showLanguageSettings: function() {
            const modal = document.getElementById('languageSettingsModal');
            if (modal) {
                modal.style.opacity = '1';
                modal.style.visibility = 'visible';
                modal.classList.add('modal-show');
                modal.classList.remove('modal-hide');
            }
        },
        
        // å¤šè¨€èªè¨­å®šã‚’é–‰ã˜ã‚‹
        closeLanguageSettings: function() {
            const modal = document.getElementById('languageSettingsModal');
            if (modal) {
                modal.classList.add('modal-hide');
                modal.classList.remove('modal-show');
                setTimeout(() => {
                    modal.style.opacity = '0';
                    modal.style.visibility = 'hidden';
                }, 300);
            }
        },
        
        // å¤šè¨€èªè¨­å®šã‚’ä¿å­˜
        saveLanguageSettings: function() {
            if (window.KAGAMI && window.KAGAMI.notification) {
                window.KAGAMI.notification.success('è¨€èªè¨­å®šã‚’ä¿å­˜ã—ã¾ã—ãŸ');
            }
            this.closeLanguageSettings();
        },
        
        // ç¿»è¨³ç·¨é›†
        editTranslation: function(faqId, language) {
            console.log('Edit translation:', faqId, language);
        },
        
        // è‡ªå‹•ç¿»è¨³
        autoTranslate: function(faqId, language) {
            const langName = this.getLanguageName(language);
            if (window.KAGAMI && window.KAGAMI.notification) {
                window.KAGAMI.notification.info(`FAQ #${faqId} ã‚’${langName}ã«è‡ªå‹•ç¿»è¨³ä¸­...`);
            }
        },
        
        // ä¸€æ‹¬ç¿»è¨³
        bulkTranslate: function() {
            if (window.KAGAMI && window.KAGAMI.notification) {
                window.KAGAMI.notification.info('æœªç¿»è¨³ã®FAQã‚’ä¸€æ‹¬ç¿»è¨³ä¸­...');
            }
        },
        
        // è¨€èªåå–å¾—
        getLanguageName: function(langCode) {
            const langNames = {
                'ja': 'æ—¥æœ¬èª',
                'en': 'è‹±èª',
                'zh': 'ä¸­å›½èª',
                'ko': 'éŸ“å›½èª'
            };
            return langNames[langCode] || langCode;
        },
        
        // ã‚«ãƒ†ã‚´ãƒªåå–å¾—
        getCategoryName: function(value) {
            const categories = {
                'financial': 'è²¡å‹™ãƒ»æ¥­ç¸¾',
                'strategy': 'çµŒå–¶æˆ¦ç•¥',
                'esg': 'ESGãƒ»ã‚µã‚¹ãƒ†ãƒŠãƒ“ãƒªãƒ†ã‚£',
                'governance': 'ã‚¬ãƒãƒŠãƒ³ã‚¹',
                'other': 'ãã®ä»–'
            };
            return categories[value] || value;
        },
        
        // ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹åå–å¾—
        getStatusName: function(value) {
            const statuses = {
                'published': 'å…¬é–‹ä¸­',
                'draft': 'ä¸‹æ›¸ã',
                'review': 'ãƒ¬ãƒ“ãƒ¥ãƒ¼ä¸­',
                'archived': 'ã‚¢ãƒ¼ã‚«ã‚¤ãƒ–'
            };
            return statuses[value] || value;
        },
        
        // ãƒ†ã‚­ã‚¹ãƒˆãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ
        formatText: function(format) {
            console.log('Format text:', format);
        },
        
        // ãƒªãƒ³ã‚¯æŒ¿å…¥
        insertLink: function() {
            console.log('Insert link');
        },
        
        // AIæ”¹å–„ï¼ˆã‚¨ãƒ‡ã‚£ã‚¿å†…ï¼‰
        aiImprove: function() {
            console.log('AI Improve');
        },
        
        // ã‚½ãƒ¼ã‚¹è¿½åŠ 
        addSource: function() {
            const sourceList = document.getElementById('sourceList');
            const newSource = document.createElement('div');
            newSource.className = 'source-item';
            newSource.innerHTML = `
                <input type="text" class="form-input" placeholder="ä¾‹ï¼š2024å¹´3æœˆæœŸæ±ºç®—èª¬æ˜ä¼šè³‡æ–™ P.12">
                <button type="button" class="btn btn-sm btn-outline" onclick="KAGAMI.faq.removeSource(this)">å‰Šé™¤</button>
            `;
            sourceList.appendChild(newSource);
        },
        
        // ã‚½ãƒ¼ã‚¹å‰Šé™¤
        removeSource: function(button) {
            button.closest('.source-item').remove();
        },
        
        // é¡ä¼¼FAQè¡¨ç¤º
        showSimilar: function() {
            const modal = document.getElementById('similarFAQModal');
            if (modal) {
                modal.style.display = 'flex';
            }
        },
        
        // é¡ä¼¼FAQãƒ¢ãƒ¼ãƒ€ãƒ«ã‚’é–‰ã˜ã‚‹
        closeSimilarModal: function() {
            const modal = document.getElementById('similarFAQModal');
            if (modal) {
                modal.style.display = 'none';
            }
        },
        
        // FAQè©³ç´°è¡¨ç¤º
        viewFAQ: function(id) {
            console.log('View FAQ:', id);
        },
        
        // FAQçµ±åˆ
        mergeFAQ: function(id) {
            console.log('Merge FAQ:', id);
        },
        
        // ç·¨é›†ã‚’ç¶šè¡Œ
        continueEditing: function() {
            this.closeSimilarModal();
        }
    };
    
    // DOMContentLoadedã§åˆæœŸåŒ–
    document.addEventListener('DOMContentLoaded', function() {
        console.log('FAQ page initialization started');
        
        // KAGAMIã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆãŒå­˜åœ¨ã™ã‚‹ã¾ã§å¾…ã¤
        function initializeWhenReady() {
            if (window.KAGAMI) {
                // FAQãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚’KAGAMIã«è¿½åŠ 
                window.KAGAMI.faq = FAQModule;
                console.log('FAQ module added to KAGAMI:', window.KAGAMI.faq);
                
                // ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼ã®è¨­å®š
                setupEventListeners();
                
                // åˆæœŸåŒ–å®Œäº†ã‚’é€šçŸ¥
                console.log('FAQ module initialization completed');
            } else {
                // 50mså¾Œã«å†è©¦è¡Œ
                setTimeout(initializeWhenReady, 50);
            }
        }
        
        // ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼ã®è¨­å®š
        function setupEventListeners() {
            // ã‚¢ã‚³ãƒ¼ãƒ‡ã‚£ã‚ªãƒ³ãƒœã‚¿ãƒ³ã®ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼
            const toggleButtons = document.querySelectorAll('.faq-toggle-btn');
            toggleButtons.forEach(button => {
                button.addEventListener('click', function() {
                    if (window.KAGAMI && window.KAGAMI.faq) {
                        window.KAGAMI.faq.toggleExpand(this);
                    } else {
                        console.error('KAGAMI.faq is not initialized');
                    }
                });
            });
            
            // ãƒ˜ãƒƒãƒ€ãƒ¼ãƒœã‚¿ãƒ³ã®ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒŠãƒ¼
            const languageSettingsBtn = document.getElementById('languageSettingsBtn');
            if (languageSettingsBtn) {
                languageSettingsBtn.addEventListener('click', function() {
                    if (window.KAGAMI && window.KAGAMI.faq) {
                        window.KAGAMI.faq.showLanguageSettings();
                    }
                });
            }
            
            const trainModelBtn = document.getElementById('trainModelBtn');
            if (trainModelBtn) {
                trainModelBtn.addEventListener('click', function() {
                    if (window.KAGAMI && window.KAGAMI.faq) {
                        window.KAGAMI.faq.trainModel();
                    }
                });
            }
            
            const showAddModalBtn = document.getElementById('showAddModalBtn');
            if (showAddModalBtn) {
                showAddModalBtn.addEventListener('click', function() {
                    if (window.KAGAMI && window.KAGAMI.faq) {
                        window.KAGAMI.faq.showAddModal();
                    }
                });
            }
            
            // è¨€èªã‚¿ãƒ–ã®åˆ‡ã‚Šæ›¿ãˆ
            const languageTabs = document.querySelectorAll('.language-tab');
            languageTabs.forEach(tab => {
                tab.addEventListener('click', function() {
                    languageTabs.forEach(t => t.classList.remove('active'));
                    this.classList.add('active');
                    
                    const selectedLang = this.dataset.lang;
                    if (window.KAGAMI && window.KAGAMI.notification) {
                        window.KAGAMI.notification.show(`${FAQModule.getLanguageName(selectedLang)}ç‰ˆã®FAQã‚’è¡¨ç¤ºä¸­`, 'info');
                    }
                    
                    filterFAQsByLanguage(selectedLang);
                });
            });
            
            // FAQã‚«ãƒ†ã‚´ãƒªã‚¿ãƒ–ã®åˆ‡ã‚Šæ›¿ãˆ
            const faqTabs = document.querySelectorAll('.faq-tab');
            faqTabs.forEach(tab => {
                tab.addEventListener('click', function() {
                    faqTabs.forEach(t => t.classList.remove('active'));
                    this.classList.add('active');
                    
                    const category = this.dataset.category;
                    filterFAQsByCategory(category);
                });
            });
            
            // AIæ”¹å–„ãƒ¢ãƒ¼ãƒ€ãƒ«ã®ã‚¿ãƒ–åˆ‡ã‚Šæ›¿ãˆ
            const suggestionTabs = document.querySelectorAll('.suggestion-tab');
            suggestionTabs.forEach(tab => {
                tab.addEventListener('click', function() {
                    suggestionTabs.forEach(t => t.classList.remove('active'));
                    this.classList.add('active');
                    
                    const type = this.dataset.type;
                    if (window.KAGAMI && window.KAGAMI.faq) {
                        window.KAGAMI.faq.showAISuggestions(type);
                    }
                });
            });
            
            console.log('Event listeners setup completed');
        }
        
        // åˆæœŸåŒ–é–‹å§‹
        initializeWhenReady();
    });
    
    // ã‚°ãƒ­ãƒ¼ãƒãƒ«é–¢æ•°ï¼ˆäº’æ›æ€§ã®ãŸã‚ï¼‰
    window.filterFAQsByLanguage = function(language) {
        console.log('Filtering FAQs by language:', language);
    };
    
    window.filterFAQsByCategory = function(category) {
        console.log('Filtering FAQs by category:', category);
    };
})();

// ãƒŸãƒ‹ãƒãƒ£ãƒ¼ãƒˆã®æç”»
(function() {
    document.addEventListener('DOMContentLoaded', function() {
        // Chart.jsãŒèª­ã¿è¾¼ã¾ã‚Œã‚‹ã¾ã§å¾…ã¤
        function initChart() {
            const canvas = document.getElementById('aiGeneratedChart');
            if (canvas && typeof Chart !== 'undefined') {
                const ctx = canvas.getContext('2d');
                new Chart(ctx, {
                    type: 'line',
                    data: {
                        labels: ['', '', '', '', '', '', ''],
                        datasets: [{
                            data: [65, 72, 78, 85, 92, 98, 105],
                            borderColor: '#14b8a6',
                            borderWidth: 2,
                            tension: 0.4,
                            pointRadius: 0
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: {
                            legend: { display: false }
                        },
                        scales: {
                            x: { display: false },
                            y: { display: false }
                        }
                    }
                });
            } else {
                // Chart.jsãŒã¾ã èª­ã¿è¾¼ã¾ã‚Œã¦ã„ãªã„å ´åˆã¯å†è©¦è¡Œ
                setTimeout(initChart, 100);
            }
        }
        
        initChart();
    });
})();
</script>
{% endblock %}
