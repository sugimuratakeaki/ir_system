{% extends "base.html" %}

{% block title %}çµŒå–¶é™£ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰{% endblock %}

{% block extra_css %}
<style>
    /* çµŒå–¶é™£ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰å°‚ç”¨ã‚¹ã‚¿ã‚¤ãƒ« */
    .executive-card {
        background: white;
        border-radius: 12px;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.06);
        padding: 24px;
        transition: all 0.3s ease;
        border: 1px solid #e5e7eb;
    }
    
    .executive-card:hover {
        box-shadow: 0 4px 16px rgba(0, 0, 0, 0.1);
        transform: translateY(-2px);
    }
    
    .metric-value {
        font-size: 2.5rem;
        font-weight: 700;
        color: #1a365d;
        line-height: 1;
    }
    
    .metric-trend {
        display: inline-flex;
        align-items: center;
        padding: 4px 8px;
        border-radius: 6px;
        font-size: 0.875rem;
        font-weight: 500;
    }
    
    .trend-up {
        background: #d1fae5;
        color: #065f46;
    }
    
    .trend-down {
        background: #fee2e2;
        color: #991b1b;
    }
    
    .priority-badge {
        display: inline-flex;
        align-items: center;
        padding: 6px 12px;
        border-radius: 20px;
        font-size: 0.875rem;
        font-weight: 500;
    }
    
    .priority-high {
        background: #fee2e2;
        color: #991b1b;
    }
    
    .priority-medium {
        background: #fef3c7;
        color: #92400e;
    }
    
    .priority-low {
        background: #dbeafe;
        color: #1e40af;
    }
    
    .chart-container {
        position: relative;
        height: 300px;
        width: 100%;
    }
    
    .action-item {
        display: flex;
        align-items: start;
        padding: 16px;
        background: #f9fafb;
        border-radius: 8px;
        margin-bottom: 12px;
        transition: all 0.2s ease;
    }
    
    .action-item:hover {
        background: #f3f4f6;
        transform: translateX(4px);
    }
    
    .summary-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
        gap: 20px;
    }
    
    @media (max-width: 768px) {
        .metric-value {
            font-size: 2rem;
        }
        
        .chart-container {
            height: 250px;
        }
    }
</style>
{% endblock %}

{% block content %}
<!-- ãƒšãƒ¼ã‚¸ãƒ˜ãƒƒãƒ€ãƒ¼ -->
<div class="mb-8">
    <div class="flex flex-col md:flex-row md:items-center md:justify-between">
        <div>
            <h1 class="text-3xl font-bold text-gray-900 mb-2">çµŒå–¶é™£ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰</h1>
            <p class="text-gray-600">IRæ´»å‹•ã®å…¨ä½“åƒã¨é‡è¦æŒ‡æ¨™ã‚’ä¸€è¦§ã§ç¢ºèª</p>
        </div>
        <div class="mt-4 md:mt-0 flex gap-3">
            <button onclick="exportReport()" class="px-4 py-2 bg-white border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors">
                ğŸ“Š ãƒ¬ãƒãƒ¼ãƒˆå‡ºåŠ›
            </button>
            <button onclick="showSettings()" class="px-4 py-2 bg-kagami-blue text-white rounded-lg hover:bg-kagami-blue-dark transition-colors">
                âš™ï¸ ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚º
            </button>
        </div>
    </div>
</div>

<!-- KPIã‚µãƒãƒªãƒ¼ -->
<div class="summary-grid mb-8">
    <!-- æŠ•è³‡å®¶æº€è¶³åº¦ -->
    <div class="executive-card">
        <div class="flex items-start justify-between mb-4">
            <div>
                <h3 class="text-sm font-medium text-gray-600 mb-2">æŠ•è³‡å®¶æº€è¶³åº¦</h3>
                <div class="metric-value">4.2<span class="text-2xl text-gray-500">/5.0</span></div>
            </div>
            <div class="metric-trend trend-up">
                <svg class="w-4 h-4 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7h8m0 0v8m0-8l-8 8-4-4-6 6" />
                </svg>
                +0.3
            </div>
        </div>
        <div class="flex items-center justify-between">
            <span class="text-sm text-gray-500">å‰å››åŠæœŸæ¯”</span>
            <a href="/analytics" class="text-sm text-accent-teal hover:text-accent-teal/80">è©³ç´°ã‚’è¦‹ã‚‹ â†’</a>
        </div>
    </div>
    
    <!-- IRæ´»å‹•å›æ•° -->
    <div class="executive-card">
        <div class="flex items-start justify-between mb-4">
            <div>
                <h3 class="text-sm font-medium text-gray-600 mb-2">IRæ´»å‹•å›æ•°ï¼ˆå››åŠæœŸï¼‰</h3>
                <div class="metric-value">156<span class="text-xl text-gray-500">å›</span></div>
            </div>
            <div class="metric-trend trend-up">
                <svg class="w-4 h-4 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7h8m0 0v8m0-8l-8 8-4-4-6 6" />
                </svg>
                +12%
            </div>
        </div>
        <div class="flex items-center justify-between">
            <span class="text-sm text-gray-500">ç›®æ¨™: 150å›</span>
            <a href="/meetings" class="text-sm text-accent-teal hover:text-accent-teal/80">è©³ç´°ã‚’è¦‹ã‚‹ â†’</a>
        </div>
    </div>
    
    <!-- æƒ…å ±é–‹ç¤ºã‚¹ã‚³ã‚¢ -->
    <div class="executive-card">
        <div class="flex items-start justify-between mb-4">
            <div>
                <h3 class="text-sm font-medium text-gray-600 mb-2">æƒ…å ±é–‹ç¤ºã‚¹ã‚³ã‚¢</h3>
                <div class="metric-value">92<span class="text-xl text-gray-500">%</span></div>
            </div>
            <div class="metric-trend trend-up">
                <svg class="w-4 h-4 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7h8m0 0v8m0-8l-8 8-4-4-6 6" />
                </svg>
                +5%
            </div>
        </div>
        <div class="flex items-center justify-between">
            <span class="text-sm text-gray-500">æ¥­ç•Œå¹³å‡: 78%</span>
            <a href="/strategy" class="text-sm text-accent-teal hover:text-accent-teal/80">è©³ç´°ã‚’è¦‹ã‚‹ â†’</a>
        </div>
    </div>
    
    <!-- æ ªä¸»æ§‹æˆ -->
    <div class="executive-card">
        <div class="flex items-start justify-between mb-4">
            <div>
                <h3 class="text-sm font-medium text-gray-600 mb-2">æ©Ÿé–¢æŠ•è³‡å®¶æ¯”ç‡</h3>
                <div class="metric-value">68.5<span class="text-xl text-gray-500">%</span></div>
            </div>
            <div class="metric-trend trend-down">
                <svg class="w-4 h-4 mr-1" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 17h8m0 0V9m0 8l-8-8-4 4-6-6" />
                </svg>
                -1.2%
            </div>
        </div>
        <div class="flex items-center justify-between">
            <span class="text-sm text-gray-500">å¤–å›½äººæŠ•è³‡å®¶: 42.3%</span>
            <a href="/investors" class="text-sm text-accent-teal hover:text-accent-teal/80">è©³ç´°ã‚’è¦‹ã‚‹ â†’</a>
        </div>
    </div>
</div>

<!-- é‡è¦ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã‚¢ã‚¤ãƒ†ãƒ  -->
<div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8">
    <!-- æ‰¿èªå¾…ã¡ã‚¿ã‚¹ã‚¯ -->
    <div class="executive-card">
        <h2 class="text-lg font-semibold text-gray-900 mb-4 flex items-center">
            <span class="mr-2">â³</span>
            æ‰¿èªå¾…ã¡ã‚¿ã‚¹ã‚¯
        </h2>
        <div class="space-y-3">
            <div class="action-item">
                <div class="flex-1">
                    <div class="flex items-center gap-3 mb-1">
                        <h4 class="font-medium text-gray-900">Q4æ±ºç®—èª¬æ˜è³‡æ–™ã®æœ€çµ‚ç¢ºèª</h4>
                        <span class="priority-badge priority-high">ç·Šæ€¥</span>
                    </div>
                    <p class="text-sm text-gray-600 mb-2">IRéƒ¨é–€ã‚ˆã‚Šæœ€çµ‚ç¨¿ãŒæå‡ºã•ã‚Œã¾ã—ãŸ</p>
                    <div class="flex items-center gap-4 text-sm text-gray-500">
                        <span>æå‡ºè€…: ç”°ä¸­IRéƒ¨é•·</span>
                        <span>æœŸé™: 2024/01/25</span>
                    </div>
                </div>
                <button class="ml-4 px-4 py-2 bg-kagami-blue text-white rounded-lg hover:bg-kagami-blue-dark transition-colors text-sm">
                    ç¢ºèªã™ã‚‹
                </button>
            </div>
            
            <div class="action-item">
                <div class="flex-1">
                    <div class="flex items-center gap-3 mb-1">
                        <h4 class="font-medium text-gray-900">ESGå ±å‘Šæ›¸ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸æ–‡æ¡ˆ</h4>
                        <span class="priority-badge priority-medium">é‡è¦</span>
                    </div>
                    <p class="text-sm text-gray-600 mb-2">ç¤¾é•·ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®å†…å®¹ç¢ºèªã‚’ãŠé¡˜ã„ã—ã¾ã™</p>
                    <div class="flex items-center gap-4 text-sm text-gray-500">
                        <span>æå‡ºè€…: ESGæ¨é€²å®¤</span>
                        <span>æœŸé™: 2024/01/28</span>
                    </div>
                </div>
                <button class="ml-4 px-4 py-2 bg-kagami-blue text-white rounded-lg hover:bg-kagami-blue-dark transition-colors text-sm">
                    ç¢ºèªã™ã‚‹
                </button>
            </div>
        </div>
        <div class="mt-4 text-center">
            <a href="/tasks" class="text-sm text-accent-teal hover:text-accent-teal/80">ã™ã¹ã¦ã®ã‚¿ã‚¹ã‚¯ã‚’è¡¨ç¤º â†’</a>
        </div>
    </div>
    
    <!-- é‡è¦ã‚¤ãƒ™ãƒ³ãƒˆ -->
    <div class="executive-card">
        <h2 class="text-lg font-semibold text-gray-900 mb-4 flex items-center">
            <span class="mr-2">ğŸ“…</span>
            ä»Šå¾Œã®é‡è¦ã‚¤ãƒ™ãƒ³ãƒˆ
        </h2>
        <div class="space-y-3">
            <div class="action-item">
                <div class="flex-1">
                    <div class="flex items-center gap-3 mb-1">
                        <h4 class="font-medium text-gray-900">Q4æ±ºç®—ç™ºè¡¨</h4>
                        <span class="text-sm text-gray-500">2æ—¥å¾Œ</span>
                    </div>
                    <p class="text-sm text-gray-600 mb-2">14:00ã‚ˆã‚Šæ±è¨¼ãƒ›ãƒ¼ãƒ«ã«ã¦å®Ÿæ–½</p>
                    <div class="flex items-center gap-4 text-sm">
                        <span class="text-green-600">âœ“ è³‡æ–™æº–å‚™å®Œäº†</span>
                        <span class="text-orange-600">âš  å‚åŠ è€…ãƒªã‚¹ãƒˆç¢ºèªä¸­</span>
                    </div>
                </div>
            </div>
            
            <div class="action-item">
                <div class="flex-1">
                    <div class="flex items-center gap-3 mb-1">
                        <h4 class="font-medium text-gray-900">æµ·å¤–æŠ•è³‡å®¶å‘ã‘ã‚«ãƒ³ãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹</h4>
                        <span class="text-sm text-gray-500">æ¥é€±</span>
                    </div>
                    <p class="text-sm text-gray-600 mb-2">ãƒ­ãƒ³ãƒ‰ãƒ³ãƒ»NYã§ã®ãƒ­ãƒ¼ãƒ‰ã‚·ãƒ§ãƒ¼</p>
                    <div class="flex items-center gap-4 text-sm">
                        <span class="text-green-600">âœ“ ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«ç¢ºå®š</span>
                        <span class="text-blue-600">ğŸ“‹ é¢è«‡: 12ç¤¾äºˆå®š</span>
                    </div>
                </div>
            </div>
        </div>
        <div class="mt-4 text-center">
            <a href="/schedule" class="text-sm text-accent-teal hover:text-accent-teal/80">IRã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ã‚’è¡¨ç¤º â†’</a>
        </div>
    </div>
</div>

<!-- åˆ†æãƒãƒ£ãƒ¼ãƒˆ -->
<div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8">
    <!-- æŠ•è³‡å®¶ã‚¨ãƒ³ã‚²ãƒ¼ã‚¸ãƒ¡ãƒ³ãƒˆæ¨ç§» -->
    <div class="executive-card">
        <h2 class="text-lg font-semibold text-gray-900 mb-4">æŠ•è³‡å®¶ã‚¨ãƒ³ã‚²ãƒ¼ã‚¸ãƒ¡ãƒ³ãƒˆæ¨ç§»</h2>
        <div class="chart-container">
            <canvas id="engagementChart"></canvas>
        </div>
    </div>
    
    <!-- åœ°åŸŸåˆ¥æŠ•è³‡å®¶åˆ†å¸ƒ -->
    <div class="executive-card">
        <h2 class="text-lg font-semibold text-gray-900 mb-4">åœ°åŸŸåˆ¥æŠ•è³‡å®¶åˆ†å¸ƒ</h2>
        <div class="chart-container">
            <canvas id="regionalChart"></canvas>
        </div>
    </div>
</div>

<!-- æœ€æ–°ã®ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ -->
<div class="executive-card">
    <h2 class="text-lg font-semibold text-gray-900 mb-4 flex items-center justify-between">
        <span class="flex items-center">
            <span class="mr-2">ğŸ’¬</span>
            æœ€æ–°ã®æŠ•è³‡å®¶ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯
        </span>
        <a href="/feedback" class="text-sm text-accent-teal hover:text-accent-teal/80 font-normal">ã™ã¹ã¦è¡¨ç¤º â†’</a>
    </h2>
    <div class="space-y-4">
        <div class="border-l-4 border-green-500 pl-4 py-2">
            <div class="flex items-start justify-between mb-1">
                <h4 class="font-medium text-gray-900">é‡æ‘ã‚¢ã‚»ãƒƒãƒˆãƒãƒã‚¸ãƒ¡ãƒ³ãƒˆ</h4>
                <span class="text-sm text-gray-500">2024/01/22</span>
            </div>
            <p class="text-sm text-gray-600 mb-2">
                ã€Œä»Šå›ã®ä¸­æœŸçµŒå–¶è¨ˆç”»ã¯éå¸¸ã«æ˜ç¢ºã§ã€ç‰¹ã«DXæˆ¦ç•¥ã®å…·ä½“æ€§ãŒè©•ä¾¡ã§ãã‚‹ã€‚å®Ÿè¡Œãƒ•ã‚§ãƒ¼ã‚ºã§ã®é€²æ—é–‹ç¤ºã«æœŸå¾…ã€‚ã€
            </p>
            <div class="flex items-center gap-4 text-sm">
                <span class="text-green-600">ãƒã‚¸ãƒ†ã‚£ãƒ–</span>
                <span class="text-gray-500">é¢è«‡: CFOå¯¾å¿œ</span>
            </div>
        </div>
        
        <div class="border-l-4 border-yellow-500 pl-4 py-2">
            <div class="flex items-start justify-between mb-1">
                <h4 class="font-medium text-gray-900">BlackRock</h4>
                <span class="text-sm text-gray-500">2024/01/20</span>
            </div>
            <p class="text-sm text-gray-600 mb-2">
                ã€ŒESGé–¢é€£ã®å®šé‡ç›®æ¨™ã‚’ã‚ˆã‚Šæ˜ç¢ºã«ã—ã¦ã»ã—ã„ã€‚ç‰¹ã«Scope3ã®å‰Šæ¸›è¨ˆç”»ã«ã¤ã„ã¦è©³ç´°ãªèª¬æ˜ãŒå¿…è¦ã€‚ã€
            </p>
            <div class="flex items-center gap-4 text-sm">
                <span class="text-yellow-600">è¦æ”¹å–„</span>
                <span class="text-gray-500">é›»è©±ä¼šè­°: IRéƒ¨å¯¾å¿œ</span>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block extra_js %}
<script>
    // ãƒãƒ£ãƒ¼ãƒˆåˆæœŸåŒ–
    document.addEventListener('DOMContentLoaded', function() {
        // ã‚¨ãƒ³ã‚²ãƒ¼ã‚¸ãƒ¡ãƒ³ãƒˆãƒãƒ£ãƒ¼ãƒˆ
        const engagementCtx = document.getElementById('engagementChart').getContext('2d');
        new Chart(engagementCtx, {
            type: 'line',
            data: {
                labels: ['1æœˆ', '2æœˆ', '3æœˆ', '4æœˆ', '5æœˆ', '6æœˆ', '7æœˆ', '8æœˆ', '9æœˆ', '10æœˆ', '11æœˆ', '12æœˆ'],
                datasets: [{
                    label: 'é¢è«‡æ•°',
                    data: [45, 52, 48, 58, 62, 55, 68, 72, 65, 78, 82, 86],
                    borderColor: '#14b8a6',
                    backgroundColor: 'rgba(20, 184, 166, 0.1)',
                    tension: 0.4
                }, {
                    label: 'ã‚¤ãƒ™ãƒ³ãƒˆå‚åŠ è€…æ•°',
                    data: [120, 135, 125, 145, 155, 140, 165, 175, 160, 185, 195, 210],
                    borderColor: '#1a365d',
                    backgroundColor: 'rgba(26, 54, 93, 0.1)',
                    tension: 0.4
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: {
                        position: 'bottom'
                    }
                },
                scales: {
                    y: {
                        beginAtZero: true
                    }
                }
            }
        });
        
        // åœ°åŸŸåˆ¥æŠ•è³‡å®¶åˆ†å¸ƒãƒãƒ£ãƒ¼ãƒˆ
        const regionalCtx = document.getElementById('regionalChart').getContext('2d');
        new Chart(regionalCtx, {
            type: 'doughnut',
            data: {
                labels: ['æ—¥æœ¬', 'åŒ—ç±³', 'æ¬§å·', 'ã‚¢ã‚¸ã‚¢ï¼ˆæ—¥æœ¬é™¤ãï¼‰', 'ãã®ä»–'],
                datasets: [{
                    data: [45, 25, 18, 8, 4],
                    backgroundColor: [
                        '#1a365d',
                        '#14b8a6',
                        '#f59e0b',
                        '#8b5cf6',
                        '#e5e7eb'
                    ]
                }]
            },
            options: {
                responsive: true,
                maintainAspectRatio: false,
                plugins: {
                    legend: {
                        position: 'right'
                    }
                }
            }
        });
    });
    
    // ãƒ¬ãƒãƒ¼ãƒˆå‡ºåŠ›
    function exportReport() {
        showNotification('ãƒ¬ãƒãƒ¼ãƒˆã‚’ç”Ÿæˆä¸­ã§ã™...', 'info');
        setTimeout(() => {
            showNotification('çµŒå–¶é™£å‘ã‘ãƒ¬ãƒãƒ¼ãƒˆã‚’ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰ã—ã¾ã—ãŸ', 'success');
        }, 2000);
    }
    
    // è¨­å®šç”»é¢
    function showSettings() {
        showModal({
            title: 'ãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ã®ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚º',
            content: `
                <div class="space-y-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">è¡¨ç¤ºã™ã‚‹æŒ‡æ¨™</label>
                        <div class="space-y-2">
                            <label class="flex items-center">
                                <input type="checkbox" checked class="mr-2"> æŠ•è³‡å®¶æº€è¶³åº¦
                            </label>
                            <label class="flex items-center">
                                <input type="checkbox" checked class="mr-2"> IRæ´»å‹•å›æ•°
                            </label>
                            <label class="flex items-center">
                                <input type="checkbox" checked class="mr-2"> æƒ…å ±é–‹ç¤ºã‚¹ã‚³ã‚¢
                            </label>
                            <label class="flex items-center">
                                <input type="checkbox" checked class="mr-2"> æ©Ÿé–¢æŠ•è³‡å®¶æ¯”ç‡
                            </label>
                        </div>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">æ›´æ–°é »åº¦</label>
                        <select class="w-full px-3 py-2 border border-gray-300 rounded-lg">
                            <option>ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ </option>
                            <option>1æ™‚é–“ã”ã¨</option>
                            <option>æ—¥æ¬¡</option>
                        </select>
                    </div>
                </div>
            `,
            confirmText: 'ä¿å­˜',
            onConfirm: () => {
                showNotification('è¨­å®šã‚’ä¿å­˜ã—ã¾ã—ãŸ', 'success');
            }
        });
    }
</script>
{% endblock %}