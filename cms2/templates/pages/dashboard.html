{% extends 'base.html' %}

{% block title %}ダッシュボード{% endblock %}
{% block page_icon %}📊{% endblock %}
{% block page_title %}ダッシュボード{% endblock %}
{% block breadcrumb_current %}ダッシュボード{% endblock %}

{% block content %}
<!-- KPIサマリー -->
<div class="kpi-grid">
    <div class="kpi-card">
        <div class="kpi-card-header">
            <span class="kpi-card-icon">📅</span>
            <span class="kpi-card-label">本日のミーティング</span>
        </div>
        <div class="kpi-card-value">5</div>
        <div class="kpi-card-footer">
            <span class="kpi-trend positive">
                <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M8 12V4M8 4L4 8M8 4L12 8" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
                25% 前日比
            </span>
        </div>
    </div>
    
    <div class="kpi-card">
        <div class="kpi-card-header">
            <span class="kpi-card-icon">⏱️</span>
            <span class="kpi-card-label">処理効率</span>
        </div>
        <div class="kpi-card-value">87%</div>
        <div class="kpi-card-footer">
            <span class="kpi-trend positive">
                <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M8 12V4M8 4L4 8M8 4L12 8" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
                5% 改善
            </span>
        </div>
    </div>
    
    <div class="kpi-card">
        <div class="kpi-card-header">
            <span class="kpi-card-icon">🤖</span>
            <span class="kpi-card-label">AI活用率</span>
        </div>
        <div class="kpi-card-value">92%</div>
        <div class="kpi-card-footer">
            <span class="kpi-trend neutral">
                <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M4 8H12" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                </svg>
                変化なし
            </span>
        </div>
    </div>
    
    <div class="kpi-card">
        <div class="kpi-card-header">
            <span class="kpi-card-icon">😊</span>
            <span class="kpi-card-label">投資家満足度</span>
        </div>
        <div class="kpi-card-value">4.8<span class="kpi-unit">/5</span></div>
        <div class="kpi-card-footer">
            <span class="kpi-trend positive">
                <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M8 12V4M8 4L4 8M8 4L12 8" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                </svg>
                0.2 向上
            </span>
        </div>
    </div>
</div>

<!-- メインコンテンツグリッド -->
<div class="dashboard-grid">
    <!-- 処理中のミーティング -->
    <div class="dashboard-card span-2">
        <div class="dashboard-card-header">
            <h2 class="dashboard-card-title">
                <span class="dashboard-card-icon">🔄</span>
                処理中のミーティング
            </h2>
            <button class="btn btn-sm btn-primary">
                新規登録
            </button>
        </div>
        <div class="dashboard-card-content">
            <div class="meeting-pipeline">
                <!-- ミーティングパイプライン -->
                <div class="pipeline-header">
                    <div class="pipeline-stage">📹 アップロード</div>
                    <div class="pipeline-stage">📝 文字起こし</div>
                    <div class="pipeline-stage">🤖 AI要約</div>
                    <div class="pipeline-stage">❓ FAQ作成</div>
                    <div class="pipeline-stage">✅ レビュー</div>
                    <div class="pipeline-stage">🌐 公開</div>
                </div>
                
                <!-- 処理中のアイテム -->
                <div class="pipeline-item">
                    <div class="pipeline-item-info">
                        <h4>野村アセットマネジメント様 - Q3決算説明</h4>
                        <span class="text-sm text-muted">2024/03/15 14:00</span>
                    </div>
                    <div class="pipeline-progress">
                        <div class="progress-bar">
                            <div class="progress-fill" style="width: 66%;"></div>
                        </div>
                        <span class="progress-label">AI要約中...</span>
                    </div>
                </div>
                
                <div class="pipeline-item">
                    <div class="pipeline-item-info">
                        <h4>三菱UFJ信託銀行様 - ESG戦略面談</h4>
                        <span class="text-sm text-muted">2024/03/15 10:00</span>
                    </div>
                    <div class="pipeline-progress">
                        <div class="progress-bar">
                            <div class="progress-fill" style="width: 33%;"></div>
                        </div>
                        <span class="progress-label">文字起こし中...</span>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- 本日のスケジュール -->
    <div class="dashboard-card">
        <div class="dashboard-card-header">
            <h2 class="dashboard-card-title">
                <span class="dashboard-card-icon">📅</span>
                本日のスケジュール
            </h2>
            <a href="/schedule" class="link-sm">すべて見る →</a>
        </div>
        <div class="dashboard-card-content">
            <div class="schedule-list">
                <div class="schedule-item">
                    <div class="schedule-time">10:00</div>
                    <div class="schedule-content">
                        <h4>ゴールドマン・サックス様</h4>
                        <p class="text-sm text-muted">中期経営計画に関する個別面談</p>
                    </div>
                </div>
                <div class="schedule-item current">
                    <div class="schedule-time">14:00</div>
                    <div class="schedule-content">
                        <h4>フィデリティ投信様</h4>
                        <p class="text-sm text-muted">Q3決算フォローアップ</p>
                    </div>
                </div>
                <div class="schedule-item">
                    <div class="schedule-time">16:00</div>
                    <div class="schedule-content">
                        <h4>日興アセットマネジメント様</h4>
                        <p class="text-sm text-muted">ESG戦略説明会</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- 最近のアクティビティ -->
    <div class="dashboard-card span-2">
        <div class="dashboard-card-header">
            <h2 class="dashboard-card-title">
                <span class="dashboard-card-icon">🔔</span>
                最近のアクティビティ
            </h2>
        </div>
        <div class="dashboard-card-content">
            <div class="activity-list">
                <div class="activity-item">
                    <div class="activity-icon success">
                        <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M13.3333 4L6 11.3333L2.66667 8" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                    </div>
                    <div class="activity-content">
                        <p><strong>大和証券様との面談議事録</strong>が公開されました</p>
                        <span class="activity-time">5分前</span>
                    </div>
                </div>
                
                <div class="activity-item">
                    <div class="activity-icon info">
                        <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M8 7.33333V11.3333M8 4.66667H8.00667M14 8C14 11.3137 11.3137 14 8 14C4.68629 14 2 11.3137 2 8C2 4.68629 4.68629 2 8 2C11.3137 2 14 4.68629 14 8Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                    </div>
                    <div class="activity-content">
                        <p><strong>AI-FAQ</strong>に新しい質問が10件追加されました</p>
                        <span class="activity-time">1時間前</span>
                    </div>
                </div>
                
                <div class="activity-item">
                    <div class="activity-icon warning">
                        <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M8 5.33333V8M8 10.6667H8.00667M7.05333 2.38667L1.64 11.4133C1.49854 11.6493 1.42327 11.9182 1.42212 12.1925C1.42097 12.4668 1.49397 12.7363 1.63368 12.9736C1.77339 13.2109 1.97472 13.4073 2.21653 13.5424C2.45834 13.6776 2.73169 13.7465 3.00933 13.7427H12.9907C13.2683 13.7465 13.5417 13.6776 13.7835 13.5424C14.0253 13.4073 14.2266 13.2109 14.3663 12.9736C14.506 12.7363 14.579 12.4668 14.5779 12.1925C14.5767 11.9182 14.5015 11.6493 14.36 11.4133L8.94667 2.38667C8.80183 2.15735 8.59804 1.96898 8.35478 1.84061C8.11152 1.71225 7.83718 1.64844 7.56 1.65534C7.28282 1.66223 7.01216 1.73957 6.77179 1.88013C6.53142 2.02069 6.32909 2.21988 6.18346 2.45897L7.05333 2.38667Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                    </div>
                    <div class="activity-content">
                        <p><strong>みずほ証券様との面談</strong>が72時間以上処理待ちです</p>
                        <span class="activity-time">3時間前</span>
                    </div>
                </div>
            </div>
        </div>
    </div>
    
    <!-- クイックアクション -->
    <div class="dashboard-card">
        <div class="dashboard-card-header">
            <h2 class="dashboard-card-title">
                <span class="dashboard-card-icon">⚡</span>
                クイックアクション
            </h2>
        </div>
        <div class="dashboard-card-content">
            <div class="quick-actions">
                <button class="quick-action-btn">
                    <span class="quick-action-icon">📹</span>
                    <span>ファイルアップロード</span>
                </button>
                <button class="quick-action-btn">
                    <span class="quick-action-icon">📄</span>
                    <span>レポート作成</span>
                </button>
                <button class="quick-action-btn">
                    <span class="quick-action-icon">✉️</span>
                    <span>メール配信</span>
                </button>
                <button class="quick-action-btn">
                    <span class="quick-action-icon">🤖</span>
                    <span>AI分析実行</span>
                </button>
            </div>
        </div>
    </div>
</div>

<style>
/* KPIグリッド */
.kpi-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    gap: var(--space-lg);
    margin-bottom: var(--space-xl);
}

/* KPIカード */
.kpi-card {
    background: white;
    border-radius: var(--border-radius-lg);
    padding: var(--space-lg);
    border: 1px solid var(--gray-200);
    transition: all var(--transition-normal);
    position: relative;
    overflow: hidden;
}

.kpi-card::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 4px;
    background: linear-gradient(90deg, var(--accent-teal), var(--info));
    transform: translateX(-100%);
    transition: transform var(--transition-slow);
}

.kpi-card:hover {
    transform: translateY(-2px);
    box-shadow: var(--shadow-lg);
}

.kpi-card:hover::before {
    transform: translateX(0);
}

.kpi-card-header {
    display: flex;
    align-items: center;
    gap: var(--space-sm);
    margin-bottom: var(--space-md);
}

.kpi-card-icon {
    font-size: 1.5rem;
    opacity: 0.8;
}

.kpi-card-label {
    font-size: var(--text-sm);
    color: var(--gray-600);
    font-weight: var(--font-medium);
}

.kpi-card-value {
    font-size: var(--text-3xl);
    font-weight: var(--font-bold);
    color: var(--gray-900);
    margin-bottom: var(--space-sm);
}

.kpi-unit {
    font-size: var(--text-lg);
    font-weight: var(--font-normal);
    color: var(--gray-600);
}

.kpi-card-footer {
    display: flex;
    align-items: center;
    gap: var(--space-sm);
}

.kpi-trend {
    display: flex;
    align-items: center;
    gap: var(--space-xs);
    font-size: var(--text-sm);
    font-weight: var(--font-medium);
}

.kpi-trend.positive {
    color: var(--success);
}

.kpi-trend.negative {
    color: var(--error);
}

.kpi-trend.neutral {
    color: var(--gray-600);
}

/* ダッシュボードグリッド */
.dashboard-grid {
    display: grid;
    grid-template-columns: repeat(3, 1fr);
    gap: var(--space-lg);
}

.dashboard-card {
    background: white;
    border-radius: var(--border-radius-lg);
    border: 1px solid var(--gray-200);
    overflow: hidden;
}

.dashboard-card.span-2 {
    grid-column: span 2;
}

.dashboard-card-header {
    padding: var(--space-lg);
    border-bottom: 1px solid var(--gray-200);
    display: flex;
    align-items: center;
    justify-content: space-between;
}

.dashboard-card-title {
    font-size: var(--text-lg);
    font-weight: var(--font-semibold);
    color: var(--gray-900);
    display: flex;
    align-items: center;
    gap: var(--space-sm);
    margin: 0;
}

.dashboard-card-icon {
    font-size: 1.25rem;
}

.dashboard-card-content {
    padding: var(--space-lg);
}

/* ボタンスタイル */
.btn {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    padding: var(--space-sm) var(--space-md);
    border-radius: var(--border-radius-md);
    font-weight: var(--font-medium);
    font-size: var(--text-sm);
    transition: all var(--transition-fast);
    cursor: pointer;
    border: 1px solid transparent;
    text-decoration: none;
}

.btn-sm {
    padding: var(--space-xs) var(--space-sm);
    font-size: var(--text-xs);
}

.btn-primary {
    background: var(--accent-teal);
    color: white;
}

.btn-primary:hover {
    background: var(--accent-teal-dark);
    transform: translateY(-1px);
    box-shadow: var(--shadow-sm);
}

/* リンクスタイル */
.link-sm {
    font-size: var(--text-sm);
    color: var(--info);
    text-decoration: none;
    transition: color var(--transition-fast);
}

.link-sm:hover {
    color: var(--info-dark);
    text-decoration: underline;
}

/* パイプライン */
.meeting-pipeline {
    display: flex;
    flex-direction: column;
    gap: var(--space-md);
}

.pipeline-header {
    display: grid;
    grid-template-columns: repeat(6, 1fr);
    gap: var(--space-sm);
    padding-bottom: var(--space-md);
    border-bottom: 1px solid var(--gray-200);
}

.pipeline-stage {
    font-size: var(--text-sm);
    font-weight: var(--font-medium);
    color: var(--gray-700);
    text-align: center;
}

.pipeline-item {
    padding: var(--space-md);
    background: var(--gray-50);
    border-radius: var(--border-radius-md);
    transition: all var(--transition-fast);
}

.pipeline-item:hover {
    background: var(--gray-100);
}

.pipeline-item-info h4 {
    font-size: var(--text-sm);
    font-weight: var(--font-semibold);
    color: var(--gray-900);
    margin-bottom: var(--space-xs);
}

.pipeline-progress {
    margin-top: var(--space-sm);
}

.progress-bar {
    height: 6px;
    background: var(--gray-200);
    border-radius: var(--border-radius-full);
    overflow: hidden;
    margin-bottom: var(--space-xs);
}

.progress-fill {
    height: 100%;
    background: linear-gradient(90deg, var(--accent-teal), var(--info));
    transition: width var(--transition-normal);
}

.progress-label {
    font-size: var(--text-xs);
    color: var(--gray-600);
}

/* スケジュール */
.schedule-list {
    display: flex;
    flex-direction: column;
    gap: var(--space-md);
}

.schedule-item {
    display: flex;
    gap: var(--space-md);
    padding: var(--space-sm);
    border-radius: var(--border-radius-md);
    transition: all var(--transition-fast);
    position: relative;
}

.schedule-item::before {
    content: '';
    position: absolute;
    left: 0;
    top: 0;
    bottom: 0;
    width: 3px;
    background: var(--gray-300);
    border-radius: var(--border-radius-full);
}

.schedule-item.current::before {
    background: var(--accent-teal);
}

.schedule-item:hover {
    background: var(--gray-50);
}

.schedule-time {
    font-weight: var(--font-semibold);
    color: var(--gray-700);
    min-width: 60px;
}

.schedule-content h4 {
    font-size: var(--text-sm);
    font-weight: var(--font-semibold);
    color: var(--gray-900);
    margin-bottom: var(--space-xs);
}

/* アクティビティ */
.activity-list {
    display: flex;
    flex-direction: column;
    gap: var(--space-md);
}

.activity-item {
    display: flex;
    gap: var(--space-md);
    padding: var(--space-sm);
    border-radius: var(--border-radius-md);
    transition: all var(--transition-fast);
}

.activity-item:hover {
    background: var(--gray-50);
}

.activity-icon {
    width: 32px;
    height: 32px;
    border-radius: var(--border-radius-full);
    display: flex;
    align-items: center;
    justify-content: center;
    flex-shrink: 0;
}

.activity-icon.success {
    background: rgba(16, 185, 129, 0.1);
    color: var(--success);
}

.activity-icon.info {
    background: rgba(59, 130, 246, 0.1);
    color: var(--info);
}

.activity-icon.warning {
    background: rgba(245, 158, 11, 0.1);
    color: var(--warning);
}

.activity-content p {
    font-size: var(--text-sm);
    color: var(--gray-900);
    margin-bottom: var(--space-xs);
}

.activity-time {
    font-size: var(--text-xs);
    color: var(--gray-600);
}

/* クイックアクション */
.quick-actions {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: var(--space-sm);
}

.quick-action-btn {
    display: flex;
    flex-direction: column;
    align-items: center;
    gap: var(--space-sm);
    padding: var(--space-md);
    background: var(--gray-50);
    border: 1px solid var(--gray-200);
    border-radius: var(--border-radius-md);
    font-size: var(--text-sm);
    color: var(--gray-700);
    cursor: pointer;
    transition: all var(--transition-fast);
}

.quick-action-btn:hover {
    background: var(--gray-100);
    border-color: var(--gray-300);
    transform: translateY(-2px);
    box-shadow: var(--shadow-sm);
}

.quick-action-icon {
    font-size: 1.5rem;
}

/* レスポンシブ */
@media (max-width: 1280px) {
    .dashboard-grid {
        grid-template-columns: repeat(2, 1fr);
    }
}

@media (max-width: 768px) {
    .kpi-grid {
        grid-template-columns: 1fr;
    }
    
    .dashboard-grid {
        grid-template-columns: 1fr;
    }
    
    .dashboard-card.span-2 {
        grid-column: span 1;
    }
    
    .pipeline-header {
        overflow-x: auto;
        display: flex;
        gap: var(--space-md);
        padding-bottom: var(--space-sm);
    }
    
    .pipeline-stage {
        white-space: nowrap;
    }
}
</style>
{% endblock %}
