{% extends "base.html" %}

{% block title %}ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«ç®¡ç†{% endblock %}

{% block content %}
<!-- ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«çµ±è¨ˆ -->
<div class="mb-lg">
    <div class="faq-stats">
        <div class="stat-card">
            <div class="stat-value">{{ upcoming_events }}</div>
            <div class="stat-label">ä»Šå¾Œã®ã‚¤ãƒ™ãƒ³ãƒˆ</div>
        </div>
        <div class="stat-card">
            <div class="stat-value">{{ this_month_events }}</div>
            <div class="stat-label">ä»Šæœˆã®ã‚¤ãƒ™ãƒ³ãƒˆ</div>
        </div>
        <div class="stat-card">
            <div class="stat-value">{{ pending_tasks }}</div>
            <div class="stat-label">æœªå®Œäº†ã‚¿ã‚¹ã‚¯</div>
        </div>
    </div>
</div>

<!-- ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ãƒãƒ¼ -->
<div class="flex justify-between items-center mb-lg">
    <div class="flex gap-md">
        <button class="btn btn-primary" onclick="showEventModal()">
            <span>â•</span>
            <span>ã‚¤ãƒ™ãƒ³ãƒˆè¿½åŠ </span>
        </button>
        <button class="btn btn-secondary">
            <span>ğŸ“…</span>
            <span>ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼è¡¨ç¤º</span>
        </button>
    </div>
    <div class="flex gap-md">
        <input type="text" class="form-control" placeholder="ã‚¤ãƒ™ãƒ³ãƒˆã‚’æ¤œç´¢..." style="width: 300px;">
        <select class="form-control" style="width: 150px;">
            <option>ã™ã¹ã¦ã®ç¨®é¡</option>
            <option>æ±ºç®—ç™ºè¡¨</option>
            <option>èª¬æ˜ä¼š</option>
            <option>æ ªä¸»ç·ä¼š</option>
            <option>ãã®ä»–</option>
        </select>
    </div>
</div>

<!-- ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ -->
<div class="card mb-lg">
    <div class="card-header">
        <h3 class="text-lg font-semibold">2024å¹´1æœˆã®ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«</h3>
    </div>
    <div class="card-body">
        <div class="calendar-grid">
            <!-- ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ã®ãƒ˜ãƒƒãƒ€ãƒ¼ -->
            <div class="calendar-header">
                <div class="calendar-day-header">æ—¥</div>
                <div class="calendar-day-header">æœˆ</div>
                <div class="calendar-day-header">ç«</div>
                <div class="calendar-day-header">æ°´</div>
                <div class="calendar-day-header">æœ¨</div>
                <div class="calendar-day-header">é‡‘</div>
                <div class="calendar-day-header">åœŸ</div>
            </div>
            <!-- ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ã®æ—¥ä»˜ï¼ˆç°¡ç•¥ç‰ˆï¼‰ -->
            <div class="calendar-body">
                {% for day in range(1, 32) %}
                <div class="calendar-day {% if day == 15 %}has-event{% endif %}">
                    <div class="calendar-day-number">{{ day }}</div>
                    {% if day == 15 %}
                    <div class="calendar-event">
                        <span class="event-dot"></span>
                        <span class="event-title">æ±ºç®—ç™ºè¡¨</span>
                    </div>
                    {% endif %}
                </div>
                {% endfor %}
            </div>
        </div>
    </div>
</div>

<!-- ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒˆ -->
<div class="card">
    <div class="card-header">
        <h3 class="text-lg font-semibold">ä»Šå¾Œã®ã‚¤ãƒ™ãƒ³ãƒˆ</h3>
    </div>
    <div class="card-body">
        <div class="table-responsive">
            <table class="table">
                <thead>
                    <tr>
                        <th>æ—¥æ™‚</th>
                        <th>ã‚¤ãƒ™ãƒ³ãƒˆå</th>
                        <th>ç¨®é¡</th>
                        <th>å ´æ‰€</th>
                        <th>ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹</th>
                        <th>æ‹…å½“è€…</th>
                        <th>ã‚¢ã‚¯ã‚·ãƒ§ãƒ³</th>
                    </tr>
                </thead>
                <tbody>
                    {% for event in events %}
                    <tr>
                        <td>{{ event.date }} {{ event.time }}</td>
                        <td>
                            <div class="font-medium">{{ event.title }}</div>
                            {% if event.description %}
                            <div class="text-sm text-muted">{{ event.description }}</div>
                            {% endif %}
                        </td>
                        <td>
                            <span class="badge badge-primary">{{ event.type }}</span>
                        </td>
                        <td>{{ event.location }}</td>
                        <td>
                            {% if event.status == "äºˆå®š" %}
                            <span class="badge badge-warning">äºˆå®š</span>
                            {% elif event.status == "æº–å‚™ä¸­" %}
                            <span class="badge badge-primary">æº–å‚™ä¸­</span>
                            {% else %}
                            <span class="badge badge-success">å®Œäº†</span>
                            {% endif %}
                        </td>
                        <td>{{ event.assignee }}</td>
                        <td>
                            <div class="flex gap-sm">
                                <button class="btn btn-sm btn-secondary">ç·¨é›†</button>
                                <button class="btn btn-sm btn-danger">å‰Šé™¤</button>
                            </div>
                        </td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
</div>

<!-- ã‚¤ãƒ™ãƒ³ãƒˆè¿½åŠ ãƒ¢ãƒ¼ãƒ€ãƒ« -->
<div class="modal" id="eventModal">
    <div class="modal-content">
        <div class="modal-header">
            <h3 class="modal-title">æ–°è¦ã‚¤ãƒ™ãƒ³ãƒˆç™»éŒ²</h3>
            <button class="modal-close" onclick="closeEventModal()">&times;</button>
        </div>
        <form>
            <div class="form-group">
                <label class="form-label">ã‚¤ãƒ™ãƒ³ãƒˆå</label>
                <input type="text" class="form-control" placeholder="ä¾‹ï¼š2024å¹´åº¦ç¬¬3å››åŠæœŸæ±ºç®—ç™ºè¡¨">
            </div>
            <div class="form-group">
                <label class="form-label">ç¨®é¡</label>
                <select class="form-control">
                    <option>æ±ºç®—ç™ºè¡¨</option>
                    <option>æ±ºç®—èª¬æ˜ä¼š</option>
                    <option>æ ªä¸»ç·ä¼š</option>
                    <option>IRèª¬æ˜ä¼š</option>
                    <option>ãã®ä»–</option>
                </select>
            </div>
            <div class="form-group">
                <label class="form-label">æ—¥æ™‚</label>
                <div class="flex gap-md">
                    <input type="date" class="form-control">
                    <input type="time" class="form-control">
                </div>
            </div>
            <div class="form-group">
                <label class="form-label">å ´æ‰€</label>
                <input type="text" class="form-control" placeholder="ä¾‹ï¼šæœ¬ç¤¾ä¼šè­°å®¤ã€ã‚ªãƒ³ãƒ©ã‚¤ãƒ³">
            </div>
            <div class="form-group">
                <label class="form-label">è©³ç´°</label>
                <textarea class="form-control" rows="3" placeholder="ã‚¤ãƒ™ãƒ³ãƒˆã®è©³ç´°æƒ…å ±ã‚’å…¥åŠ›"></textarea>
            </div>
            <div class="form-group">
                <label class="form-label">æ‹…å½“è€…</label>
                <select class="form-control">
                    <option>IRéƒ¨é–€è²¬ä»»è€…</option>
                    <option>åºƒå ±æ‹…å½“è€…A</option>
                    <option>çµŒç†éƒ¨é–€</option>
                </select>
            </div>
            <div class="flex justify-between">
                <button type="button" class="btn btn-secondary" onclick="closeEventModal()">ã‚­ãƒ£ãƒ³ã‚»ãƒ«</button>
                <button type="submit" class="btn btn-primary">ç™»éŒ²</button>
            </div>
        </form>
    </div>
</div>

<style>
/* ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ã‚¹ã‚¿ã‚¤ãƒ« */
.calendar-grid {
    border: 1px solid var(--border-color);
    border-radius: var(--border-radius-md);
    overflow: hidden;
}

.calendar-header {
    display: grid;
    grid-template-columns: repeat(7, 1fr);
    background-color: var(--bg-secondary);
    border-bottom: 1px solid var(--border-color);
}

.calendar-day-header {
    padding: var(--space-sm);
    text-align: center;
    font-weight: var(--font-semibold);
    font-size: var(--text-sm);
    color: var(--gray-700);
}

.calendar-body {
    display: grid;
    grid-template-columns: repeat(7, 1fr);
}

.calendar-day {
    min-height: 80px;
    padding: var(--space-sm);
    border-right: 1px solid var(--border-color);
    border-bottom: 1px solid var(--border-color);
    position: relative;
}

.calendar-day:nth-child(7n) {
    border-right: none;
}

.calendar-day-number {
    font-size: var(--text-sm);
    color: var(--gray-600);
    margin-bottom: var(--space-xs);
}

.calendar-day.has-event {
    background-color: var(--bg-secondary);
}

.calendar-event {
    font-size: var(--text-xs);
    display: flex;
    align-items: center;
    gap: var(--space-xs);
}

.event-dot {
    width: 6px;
    height: 6px;
    border-radius: 50%;
    background-color: var(--kagami-blue);
}

.event-title {
    color: var(--kagami-blue);
    font-weight: var(--font-medium);
}

.table-responsive {
    overflow-x: auto;
}
</style>

<script>
function showEventModal() {
    document.getElementById('eventModal').classList.add('active');
}

function closeEventModal() {
    document.getElementById('eventModal').classList.remove('active');
}

// ãƒ¢ãƒ¼ãƒ€ãƒ«å¤–ã‚¯ãƒªãƒƒã‚¯ã§é–‰ã˜ã‚‹
document.getElementById('eventModal').addEventListener('click', function(e) {
    if (e.target === this) {
        closeEventModal();
    }
});
</script>
{% endblock %}
