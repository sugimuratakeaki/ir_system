{% extends "base.html" %}

{% block title %}{{ title }}{% endblock %}

{% block content %}
<!-- ã‚¿ãƒ–ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ -->
<div class="flex gap-md mb-lg" style="border-bottom: 2px solid var(--gray-200);">
    <button class="btn btn-secondary" onclick="showSection('voice')" id="tab-voice" style="border-radius: 0; border-bottom: 2px solid transparent;">
        ğŸ™ï¸ éŸ³å£°ãƒ»å‹•ç”»
    </button>
    <button class="btn btn-secondary" onclick="showSection('meeting')" id="tab-meeting" style="border-radius: 0; border-bottom: 2px solid transparent;">
        ğŸ’» Webä¼šè­°
    </button>
    <button class="btn btn-secondary" onclick="showSection('email')" id="tab-email" style="border-radius: 0; border-bottom: 2px solid transparent;">
        ğŸ“§ ãƒ¡ãƒ¼ãƒ«
    </button>
    <button class="btn btn-secondary" onclick="showSection('document')" id="tab-document" style="border-radius: 0; border-bottom: 2px solid transparent;">
        ğŸ“„ æ–‡æ›¸
    </button>
</div>

<!-- éŸ³å£°ãƒ»å‹•ç”»ã‚»ã‚¯ã‚·ãƒ§ãƒ³ -->
<div id="section-voice" class="upload-section">
    <div class="card">
        <div class="card-header">
            <h3 class="text-lg font-semibold">éŸ³å£°ãƒ»å‹•ç”»ãƒ•ã‚¡ã‚¤ãƒ«ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰</h3>
        </div>
        <div class="card-body">
            <div class="upload-area" ondrop="handleDrop(event)" ondragover="handleDragOver(event)" onclick="selectFile()">
                <div class="upload-icon">ğŸ™ï¸</div>
                <h3 class="text-xl mb-sm">éŸ³å£°ãƒ»å‹•ç”»ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ãƒ‰ãƒ­ãƒƒãƒ—</h3>
                <p class="upload-text">ã¾ãŸã¯ ã‚¯ãƒªãƒƒã‚¯ã—ã¦é¸æŠ</p>
                <p class="text-sm text-muted">å¯¾å¿œå½¢å¼: MP3, WAV, MP4, MOV (æœ€å¤§500MB)</p>
                <input type="file" id="fileInput" style="display: none;" accept="audio/*,video/*" multiple onchange="handleFileSelect(event)">
            </div>
            
            <!-- å‡¦ç†çŠ¶æ³ -->
            <div class="mt-lg">
                <div class="flex justify-between items-center mb-md">
                    <h4 class="text-lg font-semibold">å‡¦ç†çŠ¶æ³</h4>
                    <a href="/dialogue" class="btn btn-sm btn-secondary">å¯¾è©±è¨˜éŒ²ä¸€è¦§ã¸ â†’</a>
                </div>
                <div class="flex flex-col gap-md">
                    <div class="card">
                        <div class="card-body">
                            <div class="flex justify-between items-center">
                                <div>
                                    <div class="flex items-center gap-md mb-sm">
                                        <span class="text-2xl">ğŸ™ï¸</span>
                                        <div>
                                            <div class="font-semibold">æ±ºç®—èª¬æ˜ä¼š_2024Q3.mp3</div>
                                            <div class="text-sm text-muted">45.2MB â€¢ ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰: 5åˆ†å‰</div>
                                        </div>
                                    </div>
                                    <div class="progress mb-sm">
                                        <div class="progress-bar" style="width: 75%;"></div>
                                    </div>
                                    <div class="text-sm">æ–‡å­—èµ·ã“ã—å‡¦ç†ä¸­... 75%</div>
                                </div>
                                <button class="btn btn-sm btn-danger">ã‚­ãƒ£ãƒ³ã‚»ãƒ«</button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- Webä¼šè­°ã‚»ã‚¯ã‚·ãƒ§ãƒ³ -->
<div id="section-meeting" class="upload-section" style="display: none;">
    <div class="card">
        <div class="card-header">
            <h3 class="text-lg font-semibold">Webä¼šè­°é€£æºè¨­å®š</h3>
        </div>
        <div class="card-body">
            <!-- Zoomè¨­å®š -->
            <div class="card mb-lg">
                <div class="card-header bg-blue-50">
                    <div class="flex justify-between items-center">
                        <h4 class="font-semibold flex items-center gap-sm">
                            <span class="text-2xl">ğŸ”·</span>
                            Zoomé€£æºè¨­å®š
                        </h4>
                        <span class="badge badge-success">é€£æºä¸­</span>
                    </div>
                </div>
                <div class="card-body">
                    <div class="grid grid-cols-2 gap-md mb-md">
                        <div class="form-group">
                            <label class="form-label">API Key</label>
                            <input type="password" class="form-control" value="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢">
                        </div>
                        <div class="form-group">
                            <label class="form-label">API Secret</label>
                            <input type="password" class="form-control" value="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢">
                        </div>
                    </div>
                    
                    <div class="form-group mb-md">
                        <label class="form-label">è‡ªå‹•å–ã‚Šè¾¼ã¿è¨­å®š</label>
                        <div class="space-y-sm">
                            <label class="flex items-center gap-sm">
                                <input type="checkbox" checked>
                                <span>éŒ²ç”»å®Œäº†å¾Œã€è‡ªå‹•çš„ã«æ–‡å­—èµ·ã“ã—ã‚’é–‹å§‹</span>
                            </label>
                            <label class="flex items-center gap-sm">
                                <input type="checkbox" checked>
                                <span>è­°äº‹éŒ²ã‚’è‡ªå‹•ç”Ÿæˆ</span>
                            </label>
                            <label class="flex items-center gap-sm">
                                <input type="checkbox">
                                <span>å‚åŠ è€…ã«è­°äº‹éŒ²ã‚’è‡ªå‹•é€ä¿¡</span>
                            </label>
                        </div>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">å–ã‚Šè¾¼ã¿å¯¾è±¡</label>
                        <select class="form-control">
                            <option>ã™ã¹ã¦ã®éŒ²ç”»</option>
                            <option selected>ç‰¹å®šã®ã‚¿ã‚°ãŒä»˜ã„ãŸéŒ²ç”»ã®ã¿</option>
                            <option>ç‰¹å®šã®å‚åŠ è€…ã‚’å«ã‚€éŒ²ç”»ã®ã¿</option>
                        </select>
                        <input type="text" class="form-control mt-sm" placeholder="ã‚¿ã‚°: IR, æŠ•è³‡å®¶, æ±ºç®—" value="IR, æŠ•è³‡å®¶">
                    </div>
                    
                    <div class="flex gap-md mt-md">
                        <button class="btn btn-primary">è¨­å®šã‚’ä¿å­˜</button>
                        <button class="btn btn-secondary">æ¥ç¶šãƒ†ã‚¹ãƒˆ</button>
                        <button class="btn btn-danger">é€£æºè§£é™¤</button>
                    </div>
                </div>
            </div>
            
            <!-- Teamsè¨­å®š -->
            <div class="card mb-lg">
                <div class="card-header bg-gray-50">
                    <div class="flex justify-between items-center">
                        <h4 class="font-semibold flex items-center gap-sm">
                            <span class="text-2xl">ğŸ“¹</span>
                            Microsoft Teamsé€£æºè¨­å®š
                        </h4>
                        <span class="badge badge-secondary">æœªé€£æº</span>
                    </div>
                </div>
                <div class="card-body">
                    <p class="text-muted mb-md">Microsoft 365ã‚¢ã‚«ã‚¦ãƒ³ãƒˆã¨é€£æºã—ã¦ã€Teamsä¼šè­°ã®éŒ²ç”»ã‚’è‡ªå‹•å–ã‚Šè¾¼ã¿ã—ã¾ã™ã€‚</p>
                    <button class="btn btn-primary">Microsoft 365ã§ã‚µã‚¤ãƒ³ã‚¤ãƒ³</button>
                </div>
            </div>
            
            <!-- å–ã‚Šè¾¼ã¿å±¥æ­´ -->
            <div class="mt-lg">
                <div class="flex justify-between items-center mb-md">
                    <h4 class="font-semibold">æœ€è¿‘ã®å–ã‚Šè¾¼ã¿</h4>
                    <a href="/dialogue?source=meeting" class="text-sm text-primary">ã™ã¹ã¦è¡¨ç¤º â†’</a>
                </div>
                <div class="table-container">
                    <table class="table">
                        <thead>
                            <tr>
                                <th>ä¼šè­°å</th>
                                <th>æ—¥æ™‚</th>
                                <th>å‚åŠ è€…æ•°</th>
                                <th>ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹</th>
                            </tr>
                        </thead>
                        <tbody>
                            <tr>
                                <td>é€±æ¬¡IRå®šä¾‹ä¼š</td>
                                <td>2024/01/15 10:00</td>
                                <td>5å</td>
                                <td><span class="badge badge-success">å‡¦ç†å®Œäº†</span></td>
                            </tr>
                            <tr>
                                <td>æŠ•è³‡å®¶Aç¤¾ã¨ã®é¢è«‡</td>
                                <td>2024/01/14 14:00</td>
                                <td>3å</td>
                                <td><span class="badge badge-warning">å‡¦ç†ä¸­</span></td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- ãƒ¡ãƒ¼ãƒ«ã‚»ã‚¯ã‚·ãƒ§ãƒ³ -->
<div id="section-email" class="upload-section" style="display: none;">
    <div class="card">
        <div class="card-header">
            <h3 class="text-lg font-semibold">ãƒ¡ãƒ¼ãƒ«é€£æºè¨­å®š</h3>
        </div>
        <div class="card-body">
            <!-- ãƒ¡ãƒ¼ãƒ«ã‚µãƒ¼ãƒãƒ¼è¨­å®š -->
            <div class="card mb-lg">
                <div class="card-header">
                    <h4 class="font-semibold">ğŸ“§ ãƒ¡ãƒ¼ãƒ«ã‚µãƒ¼ãƒãƒ¼è¨­å®š</h4>
                </div>
                <div class="card-body">
                    <div class="grid grid-cols-2 gap-md mb-md">
                        <div class="form-group">
                            <label class="form-label">ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹</label>
                            <input type="email" class="form-control" value="ir@example.com">
                        </div>
                        <div class="form-group">
                            <label class="form-label">ãƒ¡ãƒ¼ãƒ«ã‚µãƒ¼ãƒãƒ¼</label>
                            <select class="form-control">
                                <option>Gmail (Google Workspace)</option>
                                <option selected>Exchange (Office 365)</option>
                                <option>IMAP/SMTP</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="alert alert-info mb-md">
                        <span>ğŸ’¡</span>
                        <span>Exchangeé€£æºã®å ´åˆã€ç®¡ç†è€…ã®æ‰¿èªãŒå¿…è¦ã§ã™ã€‚</span>
                    </div>
                    
                    <button class="btn btn-primary">Exchangeã‚¢ã‚«ã‚¦ãƒ³ãƒˆã§èªè¨¼</button>
                </div>
            </div>
            
            <!-- å–ã‚Šè¾¼ã¿ãƒ«ãƒ¼ãƒ« -->
            <div class="card mb-lg">
                <div class="card-header">
                    <h4 class="font-semibold">ğŸ”§ å–ã‚Šè¾¼ã¿ãƒ«ãƒ¼ãƒ«è¨­å®š</h4>
                </div>
                <div class="card-body">
                    <div class="form-group mb-md">
                        <label class="form-label">å–ã‚Šè¾¼ã¿å¯¾è±¡ãƒ•ã‚©ãƒ«ãƒ€</label>
                        <div class="flex gap-md">
                            <select class="form-control flex-1">
                                <option>å—ä¿¡ãƒˆãƒ¬ã‚¤</option>
                                <option selected>IRå•ã„åˆã‚ã›ãƒ•ã‚©ãƒ«ãƒ€</option>
                                <option>ç‰¹å®šã®ãƒ©ãƒ™ãƒ«/ã‚¿ã‚°</option>
                            </select>
                            <button class="btn btn-secondary">ãƒ•ã‚©ãƒ«ãƒ€é¸æŠ</button>
                        </div>
                    </div>
                    
                    <div class="form-group mb-md">
                        <label class="form-label">ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°æ¡ä»¶</label>
                        <div class="space-y-sm">
                            <div class="flex items-center gap-md">
                                <select class="form-control" style="width: 150px;">
                                    <option>é€ä¿¡è€…</option>
                                    <option>ä»¶å</option>
                                    <option>æœ¬æ–‡</option>
                                </select>
                                <select class="form-control" style="width: 100px;">
                                    <option>ã‚’å«ã‚€</option>
                                    <option>ã‚’å«ã¾ãªã„</option>
                                    <option>ã¨ä¸€è‡´</option>
                                </select>
                                <input type="text" class="form-control flex-1" placeholder="æ¡ä»¶ã‚’å…¥åŠ›">
                                <button class="btn btn-sm btn-danger">å‰Šé™¤</button>
                            </div>
                        </div>
                        <button class="btn btn-sm btn-secondary mt-sm">+ æ¡ä»¶ã‚’è¿½åŠ </button>
                    </div>
                    
                    <div class="form-group">
                        <label class="form-label">å‡¦ç†è¨­å®š</label>
                        <div class="space-y-sm">
                            <label class="flex items-center gap-sm">
                                <input type="checkbox" checked>
                                <span>æŠ•è³‡å®¶ã‹ã‚‰ã®è³ªå•ã‚’è‡ªå‹•æŠ½å‡º</span>
                            </label>
                            <label class="flex items-center gap-sm">
                                <input type="checkbox" checked>
                                <span>FAQå€™è£œã¨ã—ã¦è‡ªå‹•ç™»éŒ²</span>
                            </label>
                            <label class="flex items-center gap-sm">
                                <input type="checkbox">
                                <span>é‡è¦åº¦ã‚’è‡ªå‹•åˆ¤å®šï¼ˆAIåˆ†æï¼‰</span>
                            </label>
                            <label class="flex items-center gap-sm">
                                <input type="checkbox">
                                <span>è¿”ä¿¡æœŸé™ã‚’ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼ã«è‡ªå‹•ç™»éŒ²</span>
                            </label>
                        </div>
                    </div>
                    
                    <div class="flex gap-md mt-md">
                        <button class="btn btn-primary">ãƒ«ãƒ¼ãƒ«ã‚’ä¿å­˜</button>
                        <button class="btn btn-secondary">ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ</button>
                    </div>
                </div>
            </div>
            
            <!-- å–ã‚Šè¾¼ã¿çµ±è¨ˆ -->
            <div class="grid grid-cols-3 gap-md">
                <div class="stat-card">
                    <div class="stat-value">156</div>
                    <div class="stat-label">ä»Šæœˆã®å–ã‚Šè¾¼ã¿æ•°</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value">42</div>
                    <div class="stat-label">FAQå€™è£œç”Ÿæˆæ•°</div>
                </div>
                <div class="stat-card">
                    <div class="stat-value">3.2æ™‚é–“</div>
                    <div class="stat-label">å¹³å‡è¿”ä¿¡æ™‚é–“</div>
                </div>
            </div>
        </div>
    </div>
</div>

<!-- æ–‡æ›¸ã‚»ã‚¯ã‚·ãƒ§ãƒ³ -->
<div id="section-document" class="upload-section" style="display: none;">
    <div class="card">
        <div class="card-header">
            <h3 class="text-lg font-semibold">æ–‡æ›¸ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰</h3>
        </div>
        <div class="card-body">
            <div class="upload-area" ondrop="handleDropDocument(event)" ondragover="handleDragOver(event)" onclick="selectDocumentFile()">
                <div class="upload-icon">ğŸ“„</div>
                <h3 class="text-xl mb-sm">æ–‡æ›¸ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ãƒ‰ãƒ­ãƒƒãƒ—</h3>
                <p class="upload-text">ã¾ãŸã¯ ã‚¯ãƒªãƒƒã‚¯ã—ã¦é¸æŠ</p>
                <p class="text-sm text-muted">å¯¾å¿œå½¢å¼: PDF, Word, Excel, PowerPoint (æœ€å¤§50MB)</p>
                <input type="file" id="documentInput" style="display: none;" accept=".pdf,.doc,.docx,.xls,.xlsx,.ppt,.pptx" multiple onchange="handleDocumentSelect(event)">
            </div>
            
            <div class="mt-lg">
                <h4 class="font-semibold mb-md">ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰æ™‚ã®åˆæœŸè¨­å®š</h4>
                <div class="grid grid-cols-2 gap-md">
                    <div class="form-group">
                        <label class="form-label">ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã‚«ãƒ†ã‚´ãƒª</label>
                        <select class="form-control">
                            <option>æ±ºç®—è³‡æ–™</option>
                            <option>èª¬æ˜ä¼šè³‡æ–™</option>
                            <option>é©æ™‚é–‹ç¤º</option>
                            <option>è­°äº‹éŒ²</option>
                            <option selected>ãã®ä»–ï¼ˆéƒ½åº¦é¸æŠï¼‰</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label class="form-label">ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå…¬é–‹ç¯„å›²</label>
                        <select class="form-control">
                            <option>éå…¬é–‹ï¼ˆIRéƒ¨é–€ã®ã¿ï¼‰</option>
                            <option selected>ç¤¾å†…å…¬é–‹</option>
                            <option>æŠ•è³‡å®¶é™å®š</option>
                            <option>ä¸€èˆ¬å…¬é–‹</option>
                        </select>
                    </div>
                </div>
                
                <div class="form-group">
                    <label class="form-label">å‡¦ç†ã‚ªãƒ—ã‚·ãƒ§ãƒ³</label>
                    <div class="space-y-sm">
                        <label class="flex items-center gap-sm">
                            <input type="checkbox" checked>
                            <span>OCRã§æ–‡å­—ã‚’æŠ½å‡ºï¼ˆç”»åƒPDFå¯¾å¿œï¼‰</span>
                        </label>
                        <label class="flex items-center gap-sm">
                            <input type="checkbox" checked>
                            <span>é‡è¦æƒ…å ±ã‚’è‡ªå‹•æŠ½å‡ºï¼ˆæ•°å€¤ã€æ—¥ä»˜ã€äººåãªã©ï¼‰</span>
                        </label>
                        <label class="flex items-center gap-sm">
                            <input type="checkbox">
                            <span>é¡ä¼¼æ–‡æ›¸ã‚’è‡ªå‹•æ¤œç´¢ã—ã¦é–¢é€£ä»˜ã‘</span>
                        </label>
                    </div>
                </div>
            </div>
            
            <!-- æœ€è¿‘ã®ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ -->
            <div class="mt-lg">
                <div class="flex justify-between items-center mb-md">
                    <h4 class="font-semibold">æœ€è¿‘ã®ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰</h4>
                    <a href="/dialogue?source=document" class="text-sm text-primary">ã™ã¹ã¦è¡¨ç¤º â†’</a>
                </div>
                <div class="grid grid-cols-2 gap-md">
                    <div class="card">
                        <div class="card-body">
                            <div class="flex items-start gap-md">
                                <span class="text-2xl">ğŸ“Š</span>
                                <div class="flex-1">
                                    <div class="font-semibold">2024å¹´ç¬¬3å››åŠæœŸæ±ºç®—çŸ­ä¿¡</div>
                                    <div class="text-sm text-muted">PDF â€¢ 2.3MB â€¢ 10åˆ†å‰</div>
                                    <div class="flex gap-sm mt-sm">
                                        <span class="badge badge-success">å‡¦ç†å®Œäº†</span>
                                        <span class="badge badge-info">é‡è¦æ•°å€¤: 15ä»¶</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="card">
                        <div class="card-body">
                            <div class="flex items-start gap-md">
                                <span class="text-2xl">ğŸ“‘</span>
                                <div class="flex-1">
                                    <div class="font-semibold">å–ç· å½¹ä¼šè­°äº‹éŒ²_20240110</div>
                                    <div class="text-sm text-muted">Word â€¢ 856KB â€¢ 1æ™‚é–“å‰</div>
                                    <div class="flex gap-sm mt-sm">
                                        <span class="badge badge-warning">OCRå‡¦ç†ä¸­</span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<style>
/* ã‚°ãƒªãƒƒãƒ‰ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ */
.grid {
    display: grid;
}

.grid-cols-2 {
    grid-template-columns: repeat(2, 1fr);
}

.grid-cols-3 {
    grid-template-columns: repeat(3, 1fr);
}

.gap-md {
    gap: var(--space-md);
}

.space-y-sm > * + * {
    margin-top: var(--space-sm);
}

/* èƒŒæ™¯è‰² */
.bg-blue-50 {
    background-color: rgba(59, 130, 246, 0.05);
}

.bg-gray-50 {
    background-color: var(--gray-50);
}

/* ãƒ†ãƒ¼ãƒ–ãƒ«ã‚³ãƒ³ãƒ†ãƒŠ */
.table-container {
    overflow-x: auto;
}

.table {
    width: 100%;
    border-collapse: collapse;
}

.table th,
.table td {
    padding: var(--space-sm) var(--space-md);
    text-align: left;
    border-bottom: 1px solid var(--gray-200);
}

.table th {
    font-weight: var(--font-semibold);
    background-color: var(--gray-50);
}

.table tr:hover {
    background-color: var(--gray-50);
}
</style>

{% endblock %}

{% block extra_js %}
<script>
// ã‚»ã‚¯ã‚·ãƒ§ãƒ³åˆ‡ã‚Šæ›¿ãˆ
function showSection(section) {
    // ã™ã¹ã¦ã®ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã‚’éè¡¨ç¤º
    document.querySelectorAll('.upload-section').forEach(s => {
        s.style.display = 'none';
    });
    
    // ã™ã¹ã¦ã®ã‚¿ãƒ–ã®ã‚¹ã‚¿ã‚¤ãƒ«ã‚’ãƒªã‚»ãƒƒãƒˆ
    document.querySelectorAll('[id^="tab-"]').forEach(t => {
        t.style.borderBottomColor = 'transparent';
        t.style.color = 'var(--gray-700)';
    });
    
    // é¸æŠã•ã‚ŒãŸã‚»ã‚¯ã‚·ãƒ§ãƒ³ã‚’è¡¨ç¤º
    document.getElementById(`section-${section}`).style.display = 'block';
    
    // é¸æŠã•ã‚ŒãŸã‚¿ãƒ–ã‚’ã‚¢ã‚¯ãƒ†ã‚£ãƒ–ã«
    const activeTab = document.getElementById(`tab-${section}`);
    activeTab.style.borderBottomColor = 'var(--kagami-blue)';
    activeTab.style.color = 'var(--kagami-blue)';
}

// ãƒ‰ãƒ©ãƒƒã‚°&ãƒ‰ãƒ­ãƒƒãƒ—å‡¦ç†
function handleDragOver(e) {
    e.preventDefault();
    e.currentTarget.classList.add('active');
}

function handleDrop(e) {
    e.preventDefault();
    e.currentTarget.classList.remove('active');
    
    const files = e.dataTransfer.files;
    handleFiles(files);
}

function handleDropDocument(e) {
    e.preventDefault();
    e.currentTarget.classList.remove('active');
    
    const files = e.dataTransfer.files;
    handleDocumentFiles(files);
}

// ãƒ•ã‚¡ã‚¤ãƒ«é¸æŠ
function selectFile() {
    document.getElementById('fileInput').click();
}

function selectDocumentFile() {
    document.getElementById('documentInput').click();
}

function handleFileSelect(e) {
    const files = e.target.files;
    handleFiles(files);
}

function handleDocumentSelect(e) {
    const files = e.target.files;
    handleDocumentFiles(files);
}

// ãƒ•ã‚¡ã‚¤ãƒ«å‡¦ç†ï¼ˆéŸ³å£°ãƒ»å‹•ç”»ï¼‰
function handleFiles(files) {
    console.log(`${files.length}å€‹ã®éŸ³å£°ãƒ»å‹•ç”»ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰`);
    // å®Ÿéš›ã®å®Ÿè£…ã§ã¯ã€ã“ã“ã§ãƒ•ã‚¡ã‚¤ãƒ«ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰å‡¦ç†ã‚’è¡Œã†
    
    // ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰é€²æ—ã‚’è¡¨ç¤º
    showUploadProgress(files[0]);
    
    // 2ç§’å¾Œã«ç¢ºèªç”»é¢ã¸é·ç§»ï¼ˆãƒ‡ãƒ¢ç”¨ï¼‰
    setTimeout(() => {
        window.location.href = '/upload-confirm?file=' + encodeURIComponent(files[0].name);
    }, 2000);
}

// ãƒ•ã‚¡ã‚¤ãƒ«å‡¦ç†ï¼ˆæ–‡æ›¸ï¼‰
function handleDocumentFiles(files) {
    console.log(`${files.length}å€‹ã®æ–‡æ›¸ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰`);
    // å®Ÿéš›ã®å®Ÿè£…ã§ã¯ã€ã“ã“ã§ãƒ•ã‚¡ã‚¤ãƒ«ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰å‡¦ç†ã‚’è¡Œã†
    
    // ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰é€²æ—ã‚’è¡¨ç¤º
    showUploadProgress(files[0]);
    
    // 2ç§’å¾Œã«ç¢ºèªç”»é¢ã¸é·ç§»ï¼ˆãƒ‡ãƒ¢ç”¨ï¼‰
    setTimeout(() => {
        window.location.href = '/upload-confirm?file=' + encodeURIComponent(files[0].name) + '&type=document';
    }, 2000);
}

// ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰é€²æ—è¡¨ç¤º
function showUploadProgress(file) {
    const progressModal = document.createElement('div');
    progressModal.className = 'upload-progress-modal';
    progressModal.innerHTML = `
        <div class="upload-progress-content">
            <h3>ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ä¸­...</h3>
            <div class="file-info">
                <span class="file-icon">ğŸ™ï¸</span>
                <span class="file-name">${file.name}</span>
            </div>
            <div class="progress">
                <div class="progress-bar progress-animated" style="width: 0%;"></div>
            </div>
            <div class="progress-text">0%</div>
        </div>
    `;
    document.body.appendChild(progressModal);
    
    // ãƒ—ãƒ­ã‚°ãƒ¬ã‚¹ãƒãƒ¼ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³
    const progressBar = progressModal.querySelector('.progress-bar');
    const progressText = progressModal.querySelector('.progress-text');
    let progress = 0;
    
    const interval = setInterval(() => {
        progress += Math.random() * 30;
        if (progress > 100) progress = 100;
        
        progressBar.style.width = progress + '%';
        progressText.textContent = Math.round(progress) + '%';
        
        if (progress >= 100) {
            clearInterval(interval);
            progressText.textContent = 'ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰å®Œäº†ï¼';
        }
    }, 200);
}

// åˆæœŸè¡¨ç¤º
showSection('voice');

// ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ãƒ¢ãƒ¼ãƒ€ãƒ«ç”¨ã‚¹ã‚¿ã‚¤ãƒ«
const uploadModalStyle = document.createElement('style');
uploadModalStyle.textContent = `
.upload-progress-modal {
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background-color: rgba(0, 0, 0, 0.7);
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 9999;
}

.upload-progress-content {
    background: white;
    padding: var(--space-xl);
    border-radius: var(--border-radius-lg);
    box-shadow: var(--shadow-xl);
    text-align: center;
    min-width: 400px;
}

.upload-progress-content h3 {
    margin-bottom: var(--space-md);
}

.file-info {
    display: flex;
    align-items: center;
    justify-content: center;
    gap: var(--space-sm);
    margin-bottom: var(--space-lg);
}

.file-icon {
    font-size: 2rem;
}

.file-name {
    font-weight: var(--font-medium);
}

.progress {
    height: 8px;
    background-color: var(--gray-200);
    border-radius: var(--border-radius-full);
    overflow: hidden;
    margin-bottom: var(--space-sm);
}

.progress-animated {
    background-color: var(--kagami-blue);
    transition: width 0.3s ease;
}

.progress-text {
    font-size: var(--text-sm);
    color: var(--gray-600);
}
`;
document.head.appendChild(uploadModalStyle);
</script>
{% endblock %}
