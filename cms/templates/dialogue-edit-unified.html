{% extends "base.html" %}

{% block title %}{{ meeting_data.title }} - è­°äº‹éŒ²ç·¨é›†{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="/static/css/ir-management.css">
<style>
/* çµ±åˆè­°äº‹éŒ²ç·¨é›†ã‚·ã‚¹ãƒ†ãƒ å°‚ç”¨ã‚¹ã‚¿ã‚¤ãƒ« */
.unified-editor {
    display: grid;
    grid-template-columns: 300px 1fr 320px;
    grid-template-rows: min-content 1fr;
    height: calc(100vh - 140px);
    gap: 1rem;
    grid-template-areas: 
        "pipeline-header pipeline-header pipeline-header"
        "context-sidebar work-area ai-assistant";
}

/* ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³é€²æ—ãƒãƒ¼ï¼ˆã‚³ãƒ³ãƒ‘ã‚¯ãƒˆç‰ˆï¼‰*/
.pipeline-progress {
    background: linear-gradient(135deg, #1e3a8a 0%, #3b82f6 100%);
    color: white;
    border-radius: 8px;
    padding: 1rem 1.5rem;
    margin-bottom: 0.75rem;
    box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    position: sticky;
    top: 0;
    z-index: 10;
}

.pipeline-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 1rem;
}

.meeting-info h1 {
    font-size: 1.25rem;
    font-weight: bold;
    margin-bottom: 0.25rem;
    line-height: 1.2;
}

.meeting-meta {
    display: flex;
    gap: 0.75rem;
    align-items: center;
    opacity: 0.9;
    font-size: 0.75rem;
}

.meeting-actions {
    display: flex;
    gap: 0.75rem;
    align-items: center;
}

.action-badge {
    padding: 0.375rem 0.75rem;
    border-radius: 9999px;
    font-size: 0.75rem;
    font-weight: 500;
    white-space: nowrap;
}

.action-badge.priority-high {
    background: rgba(239, 68, 68, 0.2);
    color: #fef2f2;
    border: 1px solid rgba(239, 68, 68, 0.3);
}

.action-badge.days-elapsed {
    background: rgba(245, 158, 11, 0.2);
    color: #fef3c7;
    border: 1px solid rgba(245, 158, 11, 0.3);
}

/* æ®µéšã‚¤ãƒ³ã‚¸ã‚±ãƒ¼ã‚¿ãƒ¼ï¼ˆæ‹¡å¼µç‰ˆï¼‰ */
.stage-pipeline {
    position: relative;
}

.stage-pipeline::before {
    content: '';
    position: absolute;
    top: 1.25rem;
    left: 0;
    right: 0;
    height: 1px;
    background: rgba(255, 255, 255, 0.3);
    border-radius: 1px;
}

.stages-container {
    display: flex;
    justify-content: space-between;
    position: relative;
    z-index: 1;
}

.stage-item {
    display: flex;
    flex-direction: column;
    align-items: center;
    cursor: pointer;
    transition: all 0.3s ease;
    padding: 0.5rem;
    border-radius: 8px;
}

.stage-item:hover {
    background: rgba(255, 255, 255, 0.1);
}

.stage-indicator {
    width: 2.5rem;
    height: 2.5rem;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 1rem;
    font-weight: bold;
    margin-bottom: 0.25rem;
    position: relative;
    transition: all 0.3s ease;
}

.stage-indicator.completed {
    background: #10b981;
    color: white;
    box-shadow: 0 0 0 4px rgba(16, 185, 129, 0.2);
}

.stage-indicator.active {
    background: #f59e0b;
    color: white;
    animation: pulse-ring 2s infinite;
    box-shadow: 0 0 0 4px rgba(245, 158, 11, 0.3);
}

.stage-indicator.processing {
    background: #3b82f6;
    color: white;
    animation: processing-spin 2s linear infinite;
    box-shadow: 0 0 0 4px rgba(59, 130, 246, 0.3);
}

.stage-indicator.inactive {
    background: rgba(255, 255, 255, 0.2);
    color: rgba(255, 255, 255, 0.6);
    border: 2px solid rgba(255, 255, 255, 0.3);
}

.stage-label {
    font-size: 0.625rem;
    font-weight: 600;
    text-align: center;
    opacity: 0.9;
    min-height: 1.5rem;
    display: flex;
    align-items: center;
    line-height: 1.1;
}

.stage-item.current .stage-label {
    opacity: 1;
    font-weight: 700;
}

.stage-progress {
    width: 3rem;
    height: 3px;
    background: rgba(255, 255, 255, 0.3);
    border-radius: 2px;
    margin-top: 0.25rem;
    overflow: hidden;
}

.stage-progress-fill {
    height: 100%;
    background: #10b981;
    border-radius: 2px;
    transition: width 0.3s ease;
}

/* ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³é€²æ—ãƒãƒ¼ */
.pipeline-progress {
    grid-area: pipeline-header;
}

/* ã‚µã‚¤ãƒ‰ãƒãƒ¼ï¼ˆæŠ•è³‡å®¶æƒ…å ±ï¼‰ */
.context-sidebar {
    grid-area: context-sidebar;
    background: white;
    border-radius: 12px;
    box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
    overflow: hidden;
    display: flex;
    flex-direction: column;
}

.sidebar-section {
    padding: 1.5rem;
    border-bottom: 1px solid #f3f4f6;
}

.sidebar-section:last-child {
    border-bottom: none;
    flex: 1;
}

.sidebar-section h3 {
    font-size: 0.875rem;
    font-weight: 600;
    color: #374151;
    margin-bottom: 1rem;
    display: flex;
    align-items: center;
    gap: 0.5rem;
}

.investor-profile {
    display: flex;
    align-items: center;
    gap: 1rem;
    margin-bottom: 1.5rem;
}

.investor-avatar {
    width: 56px;
    height: 56px;
    border-radius: 50%;
    background: linear-gradient(135deg, #3b82f6, #1e40af);
    display: flex;
    align-items: center;
    justify-content: center;
    color: white;
    font-weight: bold;
    font-size: 1.5rem;
}

.investor-info h4 {
    font-weight: 600;
    color: #111827;
    margin-bottom: 0.25rem;
}

.investor-info p {
    font-size: 0.875rem;
    color: #6b7280;
}

.investor-stats {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 1rem;
}

.stat-item {
    text-align: center;
    padding: 0.75rem;
    background: #f9fafb;
    border-radius: 8px;
}

.stat-value {
    font-size: 1.25rem;
    font-weight: bold;
    color: #111827;
}

.stat-label {
    font-size: 0.75rem;
    color: #6b7280;
    margin-top: 0.25rem;
}

/* ãƒ¡ã‚¤ãƒ³ãƒ¯ãƒ¼ã‚¯ã‚¨ãƒªã‚¢ */
.work-area {
    background: white;
    border-radius: 12px;
    box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
    display: flex;
    flex-direction: column;
    overflow: hidden;
}

.work-area-header {
    background: #f8fafc;
    padding: 1.5rem;
    border-bottom: 2px solid #e5e7eb;
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.current-stage-info {
    display: flex;
    align-items: center;
    gap: 1rem;
}

.stage-icon {
    width: 48px;
    height: 48px;
    border-radius: 50%;
    background: #3b82f6;
    color: white;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 1.25rem;
}

.stage-details h3 {
    font-weight: 600;
    color: #111827;
    margin-bottom: 0.25rem;
}

.stage-details p {
    font-size: 0.875rem;
    color: #6b7280;
}

.stage-actions {
    display: flex;
    gap: 0.75rem;
}

.work-area {
    grid-area: work-area;
    background: white;
    border-radius: 12px;
    box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
    padding: 1.5rem;
    overflow-y: auto;
}

/* AIã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆãƒ‘ãƒãƒ« */
.ai-assistant {
    grid-area: ai-assistant;
    background: white;
    border-radius: 12px;
    box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);
    display: flex;
    flex-direction: column;
    overflow: hidden;
}

.ai-header {
    background: linear-gradient(135deg, #8b5cf6 0%, #a855f7 100%);
    color: white;
    padding: 1.5rem;
    display: flex;
    align-items: center;
    gap: 0.75rem;
}

.ai-header h3 {
    font-weight: 600;
    font-size: 1rem;
}

.ai-content {
    flex: 1;
    padding: 1.5rem;
    overflow-y: auto;
}

.ai-suggestion {
    background: #f8fafc;
    border: 1px solid #e2e8f0;
    border-radius: 8px;
    padding: 1rem;
    margin-bottom: 1rem;
    position: relative;
}

.suggestion-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 0.75rem;
}

.suggestion-title {
    font-weight: 600;
    font-size: 0.875rem;
    color: #111827;
}

.confidence-badge {
    font-size: 0.75rem;
    padding: 0.25rem 0.5rem;
    border-radius: 12px;
    background: #e0f2fe;
    color: #0c4a6e;
}

.suggestion-content {
    font-size: 0.875rem;
    color: #374151;
    line-height: 1.5;
    margin-bottom: 0.75rem;
}

.suggestion-actions {
    display: flex;
    gap: 0.5rem;
}

.suggestion-btn {
    padding: 0.375rem 0.75rem;
    border-radius: 6px;
    font-size: 0.75rem;
    font-weight: 500;
    cursor: pointer;
    transition: all 0.2s;
    border: 1px solid transparent;
}

.suggestion-btn.primary {
    background: #3b82f6;
    color: white;
}

.suggestion-btn.primary:hover {
    background: #2563eb;
}

.suggestion-btn.secondary {
    background: #f3f4f6;
    color: #374151;
    border-color: #d1d5db;
}

.suggestion-btn.secondary:hover {
    background: #e5e7eb;
}

/* æ®µéšåˆ¥ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚¹ã‚¿ã‚¤ãƒ« */
.stage-content {
    display: none;
}

.stage-content.active {
    display: block;
}

/* Upload Stage */
.upload-area {
    border: 2px dashed #d1d5db;
    border-radius: 12px;
    padding: 3rem;
    text-align: center;
    transition: all 0.3s ease;
    cursor: pointer;
}

.upload-area:hover {
    border-color: #3b82f6;
    background: #f8fafc;
}

.upload-area.drag-over {
    border-color: #10b981;
    background: #f0fdf4;
}

.file-list {
    margin-top: 2rem;
}

.file-item {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 1rem;
    background: #f9fafb;
    border-radius: 8px;
    margin-bottom: 0.75rem;
}

.file-info {
    display: flex;
    align-items: center;
    gap: 1rem;
}

.file-icon {
    width: 40px;
    height: 40px;
    border-radius: 8px;
    background: #3b82f6;
    color: white;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 1.25rem;
}

.file-details h4 {
    font-weight: 600;
    color: #111827;
    margin-bottom: 0.25rem;
}

.file-meta {
    font-size: 0.75rem;
    color: #6b7280;
}

/* Transcription Stage */
.transcript-player {
    background: #f8fafc;
    border-radius: 12px;
    padding: 1.5rem;
    margin-bottom: 2rem;
}

.player-controls {
    display: flex;
    align-items: center;
    gap: 1rem;
    margin-bottom: 1.5rem;
}

.play-button {
    width: 56px;
    height: 56px;
    border-radius: 50%;
    background: #3b82f6;
    color: white;
    border: none;
    display: flex;
    align-items: center;
    justify-content: center;
    cursor: pointer;
    font-size: 1.25rem;
    transition: background-color 0.2s;
}

.play-button:hover {
    background: #2563eb;
}

.progress-control {
    flex: 1;
    position: relative;
}

.progress-bar {
    width: 100%;
    height: 8px;
    background: #e5e7eb;
    border-radius: 4px;
    cursor: pointer;
    position: relative;
}

.progress-fill {
    height: 100%;
    background: #3b82f6;
    border-radius: 4px;
    width: 25%;
    transition: width 0.1s;
}

.time-display {
    font-family: monospace;
    font-size: 0.875rem;
    color: #6b7280;
    min-width: 100px;
    text-align: right;
}

.transcript-editor {
    border: 1px solid #e5e7eb;
    border-radius: 8px;
    overflow: hidden;
}

.transcript-toolbar {
    background: #f9fafb;
    padding: 0.75rem;
    border-bottom: 1px solid #e5e7eb;
    display: flex;
    gap: 0.5rem;
    align-items: center;
}

.toolbar-btn {
    padding: 0.375rem 0.75rem;
    border: 1px solid #d1d5db;
    background: white;
    border-radius: 6px;
    font-size: 0.75rem;
    cursor: pointer;
    transition: all 0.2s;
}

.toolbar-btn:hover {
    background: #f3f4f6;
}

.toolbar-btn.active {
    background: #3b82f6;
    color: white;
    border-color: #3b82f6;
}

.transcript-content {
    max-height: 500px;
    overflow-y: auto;
    padding: 1rem;
}

.transcript-segment {
    margin-bottom: 1.5rem;
    padding: 1rem;
    border-radius: 8px;
    border-left: 3px solid transparent;
    transition: all 0.2s;
    position: relative;
}

.transcript-segment:hover {
    background: #f8fafc;
}

.transcript-segment.highlighted {
    background: #fef3c7;
    border-left-color: #f59e0b;
}

.transcript-segment.important {
    background: #fee2e2;
    border-left-color: #ef4444;
}

.segment-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 0.5rem;
}

.speaker-name {
    font-weight: 600;
    color: #374151;
    font-size: 0.875rem;
}

.timestamp {
    font-family: monospace;
    font-size: 0.75rem;
    color: #6b7280;
    cursor: pointer;
    padding: 0.25rem 0.5rem;
    border-radius: 4px;
    transition: background-color 0.2s;
}

.timestamp:hover {
    background: #e5e7eb;
    color: #3b82f6;
}

.segment-text {
    font-size: 0.875rem;
    line-height: 1.6;
    color: #1f2937;
    margin-bottom: 0.75rem;
}

.segment-actions {
    display: flex;
    gap: 0.5rem;
    opacity: 0;
    transition: opacity 0.2s;
}

.transcript-segment:hover .segment-actions {
    opacity: 1;
}

.segment-btn {
    padding: 0.25rem 0.5rem;
    border: none;
    background: #f3f4f6;
    border-radius: 4px;
    font-size: 0.75rem;
    cursor: pointer;
    transition: background-color 0.2s;
}

.segment-btn:hover {
    background: #e5e7eb;
}

/* AI Summary Stage */
.summary-section {
    margin-bottom: 2rem;
}

.summary-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 1rem;
}

.summary-title {
    font-weight: 600;
    font-size: 1.125rem;
    color: #111827;
}

.regenerate-btn {
    padding: 0.5rem 1rem;
    background: #3b82f6;
    color: white;
    border: none;
    border-radius: 6px;
    font-size: 0.875rem;
    cursor: pointer;
    transition: background-color 0.2s;
}

.regenerate-btn:hover {
    background: #2563eb;
}

.summary-content {
    background: #f9fafb;
    border: 1px solid #e5e7eb;
    border-radius: 8px;
    padding: 1.5rem;
}

.summary-textarea {
    width: 100%;
    border: none;
    background: transparent;
    resize: vertical;
    min-height: 120px;
    font-size: 0.875rem;
    line-height: 1.6;
    color: #374151;
}

.summary-textarea:focus {
    outline: none;
}

.key-points {
    margin-top: 2rem;
}

.key-point-item {
    display: flex;
    align-items: flex-start;
    gap: 0.75rem;
    padding: 0.75rem;
    background: white;
    border: 1px solid #e5e7eb;
    border-radius: 8px;
    margin-bottom: 0.75rem;
}

.key-point-checkbox {
    margin-top: 0.125rem;
}

.key-point-text {
    flex: 1;
    font-size: 0.875rem;
    color: #374151;
    line-height: 1.5;
}

/* ãƒ•ãƒƒã‚¿ãƒ¼ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ãƒãƒ¼ */
.footer-actions {
    background: white;
    border-top: 1px solid #e5e7eb;
    padding: 1rem 1.5rem;
    display: flex;
    justify-content: space-between;
    align-items: center;
    border-radius: 0 0 12px 12px;
}

.save-status {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    font-size: 0.875rem;
    color: #6b7280;
}

.save-indicator {
    width: 8px;
    height: 8px;
    border-radius: 50%;
    background: #10b981;
}

.save-indicator.saving {
    background: #f59e0b;
    animation: pulse 2s infinite;
}

.action-buttons {
    display: flex;
    gap: 0.75rem;
}

.btn {
    padding: 0.75rem 1.5rem;
    border-radius: 8px;
    font-weight: 500;
    font-size: 0.875rem;
    cursor: pointer;
    transition: all 0.2s;
    border: none;
    display: flex;
    align-items: center;
    gap: 0.5rem;
}

.btn-secondary {
    background: #f3f4f6;
    color: #374151;
    border: 1px solid #d1d5db;
}

.btn-secondary:hover {
    background: #e5e7eb;
}

.btn-primary {
    background: #3b82f6;
    color: white;
}

.btn-primary:hover {
    background: #2563eb;
}

.btn-success {
    background: #10b981;
    color: white;
}

.btn-success:hover {
    background: #059669;
}

/* ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ */
@keyframes pulse-ring {
    0% {
        box-shadow: 0 0 0 4px rgba(245, 158, 11, 0.3);
    }
    50% {
        box-shadow: 0 0 0 8px rgba(245, 158, 11, 0.1);
    }
    100% {
        box-shadow: 0 0 0 4px rgba(245, 158, 11, 0.3);
    }
}

@keyframes processing-spin {
    from {
        transform: rotate(0deg);
    }
    to {
        transform: rotate(360deg);
    }
}

@keyframes pulse {
    0%, 100% {
        opacity: 1;
    }
    50% {
        opacity: 0.5;
    }
}

/* ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–å¯¾å¿œ */
@media (max-width: 1200px) {
    .main-content {
        grid-template-columns: 250px 1fr 280px;
        gap: 1rem;
    }
}

@media (max-width: 1024px) {
    .main-content {
        grid-template-columns: 1fr;
        gap: 1rem;
    }
    
    .context-sidebar,
    .ai-assistant {
        display: none;
    }
}

@media (max-width: 768px) {
    .pipeline-header {
        flex-direction: column;
        gap: 1rem;
    }
    
    .meeting-actions {
        justify-content: flex-start;
    }
    
    .stages-container {
        overflow-x: auto;
        padding-bottom: 1rem;
    }
    
    .stage-item {
        min-width: 80px;
    }
}
</style>
{% endblock %}

{% block content %}
<div class="unified-editor">
    <!-- ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³é€²æ—ãƒãƒ¼ -->
    <div class="pipeline-progress">
        <div class="pipeline-header">
            <div class="meeting-info">
                <h1>{{ meeting_data.title }}</h1>
                <div class="meeting-meta">
                    <span>{{ meeting_data.investor_name }}</span>
                    <span>â€¢</span>
                    <span>{{ meeting_data.formatted_date }}</span>
                    <span>â€¢</span>
                    <span>{{ meeting_data.type }}</span>
                </div>
            </div>
            <div class="meeting-actions">
                {% if meeting_data.priority == 'high' %}
                <div class="action-badge priority-high">
                    ğŸ”¥ å„ªå…ˆåº¦é«˜
                </div>
                {% endif %}
                {% if meeting_data.days_elapsed > 3 %}
                <div class="action-badge days-elapsed">
                    âš ï¸ {{ meeting_data.days_elapsed }}æ—¥çµŒé
                </div>
                {% endif %}
                <button class="btn btn-secondary" onclick="exportData()">
                    ğŸ“¤ æ›¸ãå‡ºã—
                </button>
            </div>
        </div>
        
        <!-- æ®µéšã‚¤ãƒ³ã‚¸ã‚±ãƒ¼ã‚¿ãƒ¼ -->
        <div class="stage-pipeline">
            <div class="stages-container">
                {% set stages = [
                    {'id': 'upload', 'icon': 'ğŸ“¹', 'label': 'ãƒ•ã‚¡ã‚¤ãƒ«\nã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰', 'desc': 'éŸ³å£°ãƒ»è³‡æ–™ã®å–ã‚Šè¾¼ã¿'},
                    {'id': 'transcription', 'icon': 'ğŸ“', 'label': 'æ–‡å­—èµ·ã“ã—\nãƒ»ç·¨é›†', 'desc': 'éŸ³å£°ã®ãƒ†ã‚­ã‚¹ãƒˆåŒ–ã¨ç·¨é›†'},
                    {'id': 'ai_summary', 'icon': 'ğŸ¤–', 'label': 'AIè¦ç´„\nãƒ»åˆ†æ', 'desc': 'è‡ªå‹•è¦ç´„ã¨æ´å¯ŸæŠ½å‡º'},
                    {'id': 'faq', 'icon': 'â“', 'label': 'FAQ\nä½œæˆ', 'desc': 'è³ªç–‘å¿œç­”ã®æ•´ç†'},
                    {'id': 'review', 'icon': 'âœ…', 'label': 'ãƒ¬ãƒ“ãƒ¥ãƒ¼\nãƒ»æ‰¿èª', 'desc': 'å†…å®¹ç¢ºèªã¨æ‰¿èª'},
                    {'id': 'publish', 'icon': 'ğŸŒ', 'label': 'å…¬é–‹\nãƒ»é…ä¿¡', 'desc': 'æœ€çµ‚å…¬é–‹ã¨å…±æœ‰'}
                ] %}
                
                {% for stage in stages %}
                <div class="stage-item {{ 'current' if meeting_data.current_stage == stage.id else '' }}" 
                     onclick="switchToStage('{{ stage.id }}')">
                    <div class="stage-indicator 
                        {% if meeting_data.stages[stage.id].status in ['completed', 'approved', 'published'] %}completed
                        {% elif meeting_data.stages[stage.id].status in ['processing', 'in_progress'] %}processing
                        {% elif meeting_data.current_stage == stage.id %}active
                        {% else %}inactive{% endif %}">
                        {% if meeting_data.stages[stage.id].status == 'completed' %}âœ“
                        {% elif meeting_data.stages[stage.id].status in ['processing', 'in_progress'] %}âŸ³
                        {% else %}{{ stage.icon }}{% endif %}
                    </div>
                    <div class="stage-label">{{ stage.label }}</div>
                    {% if meeting_data.stages[stage.id].status == 'processing' %}
                    <div class="stage-progress">
                        <div class="stage-progress-fill" style="width: {{ meeting_data.stages[stage.id].progress }}%"></div>
                    </div>
                    {% endif %}
                </div>
                {% endfor %}
            </div>
        </div>
    </div>

    <!-- å·¦ã‚µã‚¤ãƒ‰ãƒãƒ¼: æŠ•è³‡å®¶æƒ…å ±ãƒ»å±¥æ­´ -->
    <div class="context-sidebar">
            <!-- æŠ•è³‡å®¶ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ« -->
            <div class="sidebar-section">
                <div class="investor-profile">
                    <div class="investor-avatar">
                        {{ meeting_data.investor_name[0] }}
                    </div>
                    <div class="investor-info">
                        <h4>{{ meeting_data.investor_name }}</h4>
                        <p>{{ meeting_data.investor_type }}</p>
                    </div>
                </div>
                <div class="investor-stats">
                    <div class="stat-item">
                        <div class="stat-value">12</div>
                        <div class="stat-label">ç·é¢è«‡å›æ•°</div>
                    </div>
                    <div class="stat-item">
                        <div class="stat-value">8.5</div>
                        <div class="stat-label">æº€è¶³åº¦</div>
                    </div>
                </div>
            </div>

            <!-- éå»é¢è«‡å±¥æ­´ -->
            <div class="sidebar-section">
                <h3>ğŸ“‹ éå»é¢è«‡å±¥æ­´</h3>
                <div class="past-meetings">
                    <div class="past-meeting" onclick="compareWithPast('2023-10-15')">
                        <div class="meeting-date">2023-10-15</div>
                        <div class="meeting-topic">Q2æ±ºç®—èª¬æ˜ã€ESGæˆ¦ç•¥</div>
                        <div class="meeting-score">æº€è¶³åº¦: 8.2</div>
                    </div>
                    <div class="past-meeting" onclick="compareWithPast('2023-07-15')">
                        <div class="meeting-date">2023-07-15</div>
                        <div class="meeting-topic">ä¸­æœŸçµŒå–¶è¨ˆç”»ã€M&Aæˆ¦ç•¥</div>
                        <div class="meeting-score">æº€è¶³åº¦: 7.8</div>
                    </div>
                </div>
            </div>

            <!-- é–¢é€£è³‡æ–™ -->
            <div class="sidebar-section">
                <h3>ğŸ“„ é–¢é€£è³‡æ–™</h3>
                <div class="related-docs">
                    <div class="doc-item" onclick="openDocument('q3-earnings')">
                        <span class="doc-icon">ğŸ“Š</span>
                        <span class="doc-name">Q3æ±ºç®—è³‡æ–™</span>
                    </div>
                    <div class="doc-item" onclick="openDocument('mid-term-plan')">
                        <span class="doc-icon">ğŸ“ˆ</span>
                        <span class="doc-name">ä¸­æœŸçµŒå–¶è¨ˆç”»</span>
                    </div>
                    <div class="doc-item" onclick="openDocument('esg-report')">
                        <span class="doc-icon">ğŸŒ±</span>
                        <span class="doc-name">ESGãƒ¬ãƒãƒ¼ãƒˆ</span>
                    </div>
                </div>
            </div>
        </div>

        <!-- ãƒ¡ã‚¤ãƒ³ãƒ¯ãƒ¼ã‚¯ã‚¨ãƒªã‚¢ -->
        <div class="work-area">
            <!-- ãƒ¯ãƒ¼ã‚¯ã‚¨ãƒªã‚¢ãƒ˜ãƒƒãƒ€ãƒ¼ -->
            <div class="work-area-header">
                <div class="current-stage-info">
                    <div class="stage-icon">
                        {% if meeting_data.current_stage == 'upload' %}ğŸ“¹
                        {% elif meeting_data.current_stage == 'transcription' %}ğŸ“
                        {% elif meeting_data.current_stage == 'ai_summary' %}ğŸ¤–
                        {% elif meeting_data.current_stage == 'faq' %}â“
                        {% elif meeting_data.current_stage == 'review' %}âœ…
                        {% elif meeting_data.current_stage == 'publish' %}ğŸŒ
                        {% endif %}
                    </div>
                    <div class="stage-details">
                        <h3>
                            {% if meeting_data.current_stage == 'upload' %}ãƒ•ã‚¡ã‚¤ãƒ«ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ãƒ»åŸºæœ¬æƒ…å ±
                            {% elif meeting_data.current_stage == 'transcription' %}æ–‡å­—èµ·ã“ã—ãƒ»éŸ³å£°ç·¨é›†
                            {% elif meeting_data.current_stage == 'ai_summary' %}AIè¦ç´„ãƒ»åˆ†æ
                            {% elif meeting_data.current_stage == 'faq' %}FAQä½œæˆãƒ»ç·¨é›†
                            {% elif meeting_data.current_stage == 'review' %}ãƒ¬ãƒ“ãƒ¥ãƒ¼ãƒ»æ‰¿èª
                            {% elif meeting_data.current_stage == 'publish' %}å…¬é–‹ãƒ»é…ä¿¡
                            {% endif %}
                        </h3>
                        <p>
                            {% if meeting_data.current_stage_info.message %}
                                {{ meeting_data.current_stage_info.message }}
                            {% else %}
                                ç¾åœ¨ã®ã‚¹ãƒ†ãƒƒãƒ—ã®ä½œæ¥­ã‚’é€²ã‚ã¦ãã ã•ã„
                            {% endif %}
                        </p>
                    </div>
                </div>
                <div class="stage-actions">
                    {% if meeting_data.current_stage == 'upload' %}
                    <button class="btn btn-primary" onclick="startUpload()">
                        ğŸ“ ãƒ•ã‚¡ã‚¤ãƒ«é¸æŠ
                    </button>
                    {% elif meeting_data.current_stage == 'transcription' %}
                    <button class="btn btn-secondary" onclick="togglePlayback()">
                        â–¶ï¸ å†ç”Ÿ/åœæ­¢
                    </button>
                    <button class="btn btn-primary" onclick="saveTranscript()">
                        ğŸ’¾ ä¿å­˜
                    </button>
                    {% elif meeting_data.current_stage == 'ai_summary' %}
                    <button class="btn btn-secondary" onclick="regenerateSummary()">
                        ğŸ”„ å†ç”Ÿæˆ
                    </button>
                    <button class="btn btn-primary" onclick="approveSummary()">
                        âœ… æ‰¿èª
                    </button>
                    {% elif meeting_data.current_stage == 'faq' %}
                    <button class="btn btn-secondary" onclick="generateMoreFAQs()">
                        â• FAQè¿½åŠ 
                    </button>
                    <button class="btn btn-primary" onclick="completeFAQs()">
                        âœ… å®Œäº†
                    </button>
                    {% elif meeting_data.current_stage == 'review' %}
                    <button class="btn btn-secondary" onclick="requestChanges()">
                        ğŸ“ ä¿®æ­£ä¾é ¼
                    </button>
                    <button class="btn btn-primary" onclick="approveReview()">
                        âœ… æ‰¿èª
                    </button>
                    {% elif meeting_data.current_stage == 'publish' %}
                    <button class="btn btn-secondary" onclick="schedulePublish()">
                        ğŸ“… äºˆç´„å…¬é–‹
                    </button>
                    <button class="btn btn-success" onclick="publishNow()">
                        ğŸŒ å³åº§ã«å…¬é–‹
                    </button>
                    {% endif %}
                </div>
            </div>

            <!-- å‹•çš„ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚¨ãƒªã‚¢ -->
        <!-- ãƒ¯ãƒ¼ã‚¯ã‚¨ãƒªã‚¢: æ®µéšåˆ¥ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ -->
    <div class="work-area">
                <!-- Upload Stage Content -->
                <div id="upload-content" class="stage-content {{ 'active' if meeting_data.current_stage == 'upload' else '' }}">
                    <div class="upload-area" onclick="selectFiles()" ondrop="handleDrop(event)" ondragover="handleDragOver(event)">
                        <div style="font-size: 3rem; margin-bottom: 1rem;">ğŸ“</div>
                        <h3>ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰</h3>
                        <p>éŸ³å£°ãƒ»å‹•ç”»ãƒ•ã‚¡ã‚¤ãƒ«ã‚„é–¢é€£è³‡æ–™ã‚’ãƒ‰ãƒ©ãƒƒã‚°&ãƒ‰ãƒ­ãƒƒãƒ—ã¾ãŸã¯ã‚¯ãƒªãƒƒã‚¯ã—ã¦é¸æŠ</p>
                        <p style="margin-top: 1rem; color: #6b7280; font-size: 0.875rem;">
                            å¯¾å¿œå½¢å¼: MP4, MP3, WAV, PDF (æœ€å¤§500MB)
                        </p>
                    </div>
                    
                    {% if meeting_data.files %}
                    <div class="file-list">
                        <h4 style="margin-bottom: 1rem;">ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰æ¸ˆã¿ãƒ•ã‚¡ã‚¤ãƒ«</h4>
                        {% for file in meeting_data.files %}
                        <div class="file-item">
                            <div class="file-info">
                                <div class="file-icon">
                                    {% if file.type == 'video' %}ğŸ¥
                                    {% elif file.type == 'audio' %}ğŸµ
                                    {% else %}ğŸ“„{% endif %}
                                </div>
                                <div class="file-details">
                                    <h4>{{ file.name }}</h4>
                                    <div class="file-meta">
                                        {{ file.size }}
                                        {% if file.duration %} â€¢ {{ file.duration }}{% endif %}
                                        {% if file.transcription_accuracy %} â€¢ èªè­˜ç²¾åº¦: {{ file.transcription_accuracy }}%{% endif %}
                                    </div>
                                </div>
                            </div>
                            <div class="file-actions">
                                <button class="btn btn-secondary" onclick="downloadFile('{{ file.id }}')">
                                    ğŸ“¥ ãƒ€ã‚¦ãƒ³ãƒ­ãƒ¼ãƒ‰
                                </button>
                                <button class="btn btn-secondary" onclick="deleteFile('{{ file.id }}')">
                                    ğŸ—‘ï¸ å‰Šé™¤
                                </button>
                            </div>
                        </div>
                        {% endfor %}
                    </div>
                    {% endif %}
                    
                    <!-- åŸºæœ¬æƒ…å ±å…¥åŠ›ãƒ•ã‚©ãƒ¼ãƒ  -->
                    <div style="margin-top: 2rem;">
                        <h4 style="margin-bottom: 1rem;">åŸºæœ¬æƒ…å ±</h4>
                        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem;">
                            <div>
                                <label style="display: block; margin-bottom: 0.5rem; font-weight: 600;">ä¼šè­°ç¨®åˆ¥</label>
                                <select class="form-control">
                                    <option>å€‹åˆ¥é¢è«‡</option>
                                    <option>æ±ºç®—èª¬æ˜ä¼š</option>
                                    <option>ã‚¹ãƒ¢ãƒ¼ãƒ«ãƒŸãƒ¼ãƒ†ã‚£ãƒ³ã‚°</option>
                                    <option>ã‚«ãƒ³ãƒ•ã‚¡ãƒ¬ãƒ³ã‚¹</option>
                                </select>
                            </div>
                            <div>
                                <label style="display: block; margin-bottom: 0.5rem; font-weight: 600;">å„ªå…ˆåº¦</label>
                                <select class="form-control">
                                    <option value="high">é«˜</option>
                                    <option value="medium">ä¸­</option>
                                    <option value="low">ä½</option>
                                </select>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Transcription Stage Content -->
                <div id="transcription-content" class="stage-content {{ 'active' if meeting_data.current_stage == 'transcription' else '' }}">
                    <!-- éŸ³å£°ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ -->
                    <div class="transcript-player">
                        <div class="player-controls">
                            <button class="play-button" onclick="togglePlayback()">
                                <span id="play-icon">â–¶ï¸</span>
                            </button>
                            <div class="progress-control">
                                <div class="progress-bar" onclick="seekAudio(event)">
                                    <div class="progress-fill" id="progress-fill"></div>
                                </div>
                            </div>
                            <div class="time-display">
                                <span id="current-time">12:34</span> / <span id="total-time">1:30:45</span>
                            </div>
                        </div>
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-top: 1rem;">
                            <div style="font-size: 0.875rem; color: #6b7280;">
                                ğŸ¤ é«˜éŸ³è³ªéŒ²éŸ³ | èªè­˜ç²¾åº¦: 96%
                            </div>
                            <div style="display: flex; gap: 0.5rem;">
                                <button class="btn btn-secondary" onclick="setPlaybackSpeed(0.75)">0.75x</button>
                                <button class="btn btn-secondary active" onclick="setPlaybackSpeed(1.0)">1.0x</button>
                                <button class="btn btn-secondary" onclick="setPlaybackSpeed(1.25)">1.25x</button>
                                <button class="btn btn-secondary" onclick="setPlaybackSpeed(1.5)">1.5x</button>
                            </div>
                        </div>
                    </div>

                    <!-- æ–‡å­—èµ·ã“ã—ã‚¨ãƒ‡ã‚£ã‚¿ -->
                    <div class="transcript-editor">
                        <div class="transcript-toolbar">
                            <button class="toolbar-btn" onclick="highlightMode()">ğŸ–ï¸ ãƒã‚¤ãƒ©ã‚¤ãƒˆ</button>
                            <button class="toolbar-btn" onclick="importantMode()">â­ é‡è¦</button>
                            <button class="toolbar-btn" onclick="speakerMode()">ğŸ‘¤ è©±è€…</button>
                            <button class="toolbar-btn" onclick="searchMode()">ğŸ” æ¤œç´¢</button>
                            <div style="margin-left: auto; font-size: 0.75rem; color: #6b7280;">
                                ç·æ–‡å­—æ•°: 15,680æ–‡å­— | èª­äº†æ™‚é–“: ç´„12åˆ†
                            </div>
                        </div>
                        
                        <div class="transcript-content">
                            {% if meeting_data.transcript_preview %}
                            {% set segments = meeting_data.transcript_preview.split('\n\n') %}
                            {% for segment in segments %}
                            {% if segment.strip() %}
                            <div class="transcript-segment" data-timestamp="00:{{ loop.index }}:{{ loop.index * 5 }}">
                                <div class="segment-header">
                                    <span class="speaker-name">
                                        {% if 'ç”°ä¸­ï¼ˆCEOï¼‰' in segment %}ç”°ä¸­ï¼ˆCEOï¼‰
                                        {% elif 'ä½è—¤ï¼ˆCFOï¼‰' in segment %}ä½è—¤ï¼ˆCFOï¼‰
                                        {% elif 'æŠ•è³‡å®¶' in segment %}æŠ•è³‡å®¶ï¼ˆ{{ meeting_data.investor_name }}ï¼‰
                                        {% else %}ç™ºè¨€è€…{% endif %}
                                    </span>
                                    <span class="timestamp" onclick="jumpToTime('00:{{ loop.index }}:{{ loop.index * 5 }}')">
                                        {{ loop.index }}:{{ '%02d'|format(loop.index * 5) }}
                                    </span>
                                </div>
                                <div class="segment-text" contenteditable="true">
                                    {{ segment.replace('ã€ç”°ä¸­ï¼ˆCEOï¼‰ã€‘', '').replace('ã€ä½è—¤ï¼ˆCFOï¼‰ã€‘', '').replace('ã€æŠ•è³‡å®¶ã€‘', '').strip() }}
                                </div>
                                <div class="segment-actions">
                                    <button class="segment-btn" onclick="highlightSegment(this)">ãƒã‚¤ãƒ©ã‚¤ãƒˆ</button>
                                    <button class="segment-btn" onclick="markImportant(this)">é‡è¦</button>
                                    <button class="segment-btn" onclick="addNote(this)">ãƒ¡ãƒ¢</button>
                                </div>
                            </div>
                            {% endif %}
                            {% endfor %}
                            {% else %}
                            <div style="text-align: center; padding: 3rem; color: #6b7280;">
                                <div style="font-size: 3rem; margin-bottom: 1rem;">ğŸ“</div>
                                <h3>æ–‡å­—èµ·ã“ã—ã‚’é–‹å§‹ã—ã¦ãã ã•ã„</h3>
                                <p>éŸ³å£°ãƒ•ã‚¡ã‚¤ãƒ«ãŒã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã•ã‚ŒãŸã‚‰ã€AIæ–‡å­—èµ·ã“ã—ã‚’é–‹å§‹ã§ãã¾ã™ã€‚</p>
                            </div>
                            {% endif %}
                        </div>
                    </div>
                </div>

                <!-- AI Summary Stage Content -->
                <div id="ai-summary-content" class="stage-content {{ 'active' if meeting_data.current_stage == 'ai_summary' else '' }}">
                    <!-- ã‚¨ã‚°ã‚¼ã‚¯ãƒ†ã‚£ãƒ–ã‚µãƒãƒªãƒ¼ -->
                    <div class="summary-section">
                        <div class="summary-header">
                            <h3 class="summary-title">ğŸ“Š ã‚¨ã‚°ã‚¼ã‚¯ãƒ†ã‚£ãƒ–ã‚µãƒãƒªãƒ¼</h3>
                            <button class="regenerate-btn" onclick="regenerateSummary('executive')">
                                ğŸ¤– AIå†ç”Ÿæˆ
                            </button>
                        </div>
                        <div class="summary-content">
                            <textarea class="summary-textarea" placeholder="AIãŒã‚¨ã‚°ã‚¼ã‚¯ãƒ†ã‚£ãƒ–ã‚µãƒãƒªãƒ¼ã‚’ç”Ÿæˆä¸­...">ç¬¬3å››åŠæœŸã®æ¥­ç¸¾ã¯å…¨ä½“çš„ã«å¥½èª¿ã§ã€ç‰¹ã«AIäº‹æ¥­ãŒäºˆæƒ³ã‚’ä¸Šå›ã‚‹æˆé•·ã‚’ç¤ºã—ã¾ã—ãŸã€‚æŠ•è³‡å®¶ã‹ã‚‰ã¯ç«¶äº‰å„ªä½æ€§ã¨ESGç›®æ¨™ã«ã¤ã„ã¦é«˜ã„é–¢å¿ƒãŒå¯„ã›ã‚‰ã‚Œã€å…·ä½“çš„ãªãƒ­ãƒ¼ãƒ‰ãƒãƒƒãƒ—ã®æç¤ºãŒæ±‚ã‚ã‚‰ã‚Œã¾ã—ãŸã€‚</textarea>
                        </div>
                    </div>

                    <!-- é‡è¦ãƒã‚¤ãƒ³ãƒˆ -->
                    <div class="summary-section">
                        <div class="summary-header">
                            <h3 class="summary-title">ğŸ”‘ é‡è¦ãƒã‚¤ãƒ³ãƒˆ</h3>
                            <button class="regenerate-btn" onclick="regenerateKeyPoints()">
                                ğŸ¯ è‡ªå‹•æŠ½å‡º
                            </button>
                        </div>
                        <div class="key-points">
                            <div class="key-point-item">
                                <input type="checkbox" class="key-point-checkbox" checked>
                                <span class="key-point-text">AIäº‹æ¥­ã®å£²ä¸ŠãŒå‰å¹´åŒæœŸæ¯”150%æˆé•·</span>
                            </div>
                            <div class="key-point-item">
                                <input type="checkbox" class="key-point-checkbox" checked>
                                <span class="key-point-text">ç‰¹è¨±æŠ€è¡“47ä»¶å–å¾—ã€æ¥­ç•Œãƒªãƒ¼ãƒ‡ã‚¤ãƒ³ã‚°ãƒã‚¸ã‚·ãƒ§ãƒ³</span>
                            </div>
                            <div class="key-point-item">
                                <input type="checkbox" class="key-point-checkbox">
                                <span class="key-point-text">ESGãƒ­ãƒ¼ãƒ‰ãƒãƒƒãƒ—ã‚’2æœˆæœ«ã«å…¬è¡¨äºˆå®š</span>
                            </div>
                            <div class="key-point-item">
                                <input type="checkbox" class="key-point-checkbox">
                                <span class="key-point-text">ç«¶åˆå„ªä½æ€§: ç‰¹è¨±æŠ€è¡“ã€ãƒ‡ãƒ¼ã‚¿è³‡ç”£ã€ãƒ‘ãƒ¼ãƒˆãƒŠãƒ¼ã‚·ãƒƒãƒ—</span>
                            </div>
                        </div>
                    </div>

                    <!-- æŠ•è³‡å®¶ã®é–¢å¿ƒãƒ»æ‡¸å¿µäº‹é … -->
                    <div class="summary-section">
                        <div class="summary-header">
                            <h3 class="summary-title">ğŸ’­ æŠ•è³‡å®¶ã®é–¢å¿ƒãƒ»æ‡¸å¿µäº‹é …</h3>
                            <div style="display: flex; align-items: center; gap: 0.5rem;">
                                <span style="font-size: 0.875rem; color: #ef4444;">æ‡¸å¿µåº¦: é«˜</span>
                            </div>
                        </div>
                        <div class="concerns-list">
                            <div class="concern-item" style="border: 1px solid #e5e7eb; border-radius: 8px; padding: 1rem; margin-bottom: 1rem; background: white;">
                                <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 0.5rem;">
                                    <span style="font-weight: 600; color: #111827;">AIäº‹æ¥­ã®ç«¶äº‰å„ªä½æ€§</span>
                                    <span style="padding: 0.25rem 0.5rem; border-radius: 12px; font-size: 0.75rem; background: #fef2f2; color: #dc2626;">é«˜</span>
                                </div>
                                <div style="font-size: 0.875rem; color: #374151; margin-bottom: 0.75rem;">
                                    ç«¶åˆä»–ç¤¾ã¨ã®å·®åˆ¥åŒ–è¦å› ã€æŠ€è¡“çš„å„ªä½æ€§ã®æŒç¶šå¯èƒ½æ€§ã«ã¤ã„ã¦è©³ç´°ãªèª¬æ˜ã‚’æ±‚ã‚ã‚‰ã‚Œã¾ã—ãŸã€‚
                                </div>
                                <div style="font-size: 0.875rem; color: #1f2937; background: #f8fafc; padding: 0.75rem; border-radius: 6px; border-left: 3px solid #3b82f6;">
                                    <strong>å›ç­”è¦ç‚¹:</strong> 47ä»¶ã®ç‰¹è¨±æŠ€è¡“ã€ç‹¬è‡ªã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ ã€æ¥­ç•Œãƒªãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ãƒã‚¸ã‚·ãƒ§ãƒ³
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- FAQ Stage Content -->
                <div id="faq-content" class="stage-content {{ 'active' if meeting_data.current_stage == 'faq' else '' }}">
                    <div style="text-align: center; padding: 3rem; color: #6b7280;">
                        <div style="font-size: 3rem; margin-bottom: 1rem;">â“</div>
                        <h3>FAQä½œæˆãƒ»ç·¨é›†</h3>
                        <p>AIåˆ†æçµæœã‹ã‚‰FAQã‚’è‡ªå‹•ç”Ÿæˆã—ã€ç·¨é›†ãƒ»æ‰¿èªã‚’è¡Œã„ã¾ã™ã€‚</p>
                        <button class="btn btn-primary" style="margin-top: 1rem;" onclick="openFAQEditor()">
                            ğŸ“ FAQç·¨é›†ç”»é¢ã‚’é–‹ã
                        </button>
                    </div>
                </div>

                <!-- Review Stage Content -->
                <div id="review-content" class="stage-content {{ 'active' if meeting_data.current_stage == 'review' else '' }}">
                    <div style="text-align: center; padding: 3rem; color: #6b7280;">
                        <div style="font-size: 3rem; margin-bottom: 1rem;">âœ…</div>
                        <h3>æœ€çµ‚ãƒ¬ãƒ“ãƒ¥ãƒ¼ãƒ»æ‰¿èª</h3>
                        <p>ä½œæˆã•ã‚ŒãŸè­°äº‹éŒ²ã€è¦ç´„ã€FAQã®æœ€çµ‚ç¢ºèªã‚’è¡Œã„ã¾ã™ã€‚</p>
                        <button class="btn btn-primary" style="margin-top: 1rem;" onclick="startReview()">
                            ğŸ“‹ ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚’é–‹å§‹
                        </button>
                    </div>
                </div>

                <!-- Publish Stage Content -->
                <div id="publish-content" class="stage-content {{ 'active' if meeting_data.current_stage == 'publish' else '' }}">
                    <div style="text-align: center; padding: 3rem; color: #6b7280;">
                        <div style="font-size: 3rem; margin-bottom: 1rem;">ğŸŒ</div>
                        <h3>å…¬é–‹ãƒ»é…ä¿¡è¨­å®š</h3>
                        <p>æ‰¿èªã•ã‚ŒãŸå†…å®¹ã‚’é©åˆ‡ãªãƒãƒ£ãƒãƒ«ã«å…¬é–‹ãƒ»é…ä¿¡ã—ã¾ã™ã€‚</p>
                        <button class="btn btn-success" style="margin-top: 1rem;" onclick="openPublishSettings()">
                            ğŸ“¤ å…¬é–‹è¨­å®šã‚’é–‹ã
                        </button>
                    </div>
                </div>
            </div>

            <!-- ãƒ•ãƒƒã‚¿ãƒ¼ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ãƒãƒ¼ -->
            <div class="footer-actions">
                <div class="save-status">
                    <div class="save-indicator"></div>
                    <span>æœ€çµ‚ä¿å­˜: {{ current_time }}</span>
                </div>
                <div class="action-buttons">
                    <button class="btn btn-secondary" onclick="saveDraft()">
                        ğŸ’¾ ä¸‹æ›¸ãä¿å­˜
                    </button>
                    <button class="btn btn-secondary" onclick="shareWithTeam()">
                        ğŸ‘¥ ãƒãƒ¼ãƒ å…±æœ‰
                    </button>
                    <button class="btn btn-primary" onclick="proceedToNext()">
                        â¡ï¸ æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- å³ã‚µã‚¤ãƒ‰ãƒãƒ¼: AIã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆ -->
    <div class="ai-assistant">
            <div class="ai-header">
                <span style="font-size: 1.5rem;">ğŸ¤–</span>
                <h3>AIã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆ</h3>
            </div>
            <div class="ai-content">
                <!-- ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ AIææ¡ˆ -->
                <div class="ai-suggestion">
                    <div class="suggestion-header">
                        <span class="suggestion-title">ğŸ“ FAQå€™è£œã‚’æ¤œå‡º</span>
                        <span class="confidence-badge">ä¿¡é ¼åº¦: 94%</span>
                    </div>
                    <div class="suggestion-content">
                        ã€ŒAIäº‹æ¥­ã®ç«¶äº‰å„ªä½æ€§ã«ã¤ã„ã¦ã€ã®FAQã‚’ä½œæˆã™ã‚‹ã“ã¨ã‚’æ¨å¥¨ã—ã¾ã™ã€‚ã“ã®è³ªå•ã¯éå»3å›ã®é¢è«‡ã§ã‚‚è¨€åŠã•ã‚Œã¦ã„ã¾ã™ã€‚
                    </div>
                    <div class="suggestion-actions">
                        <button class="suggestion-btn primary" onclick="createFAQ('ai_competition')">FAQã‚’ä½œæˆ</button>
                        <button class="suggestion-btn secondary" onclick="dismissSuggestion(1)">å¾Œã§</button>
                    </div>
                </div>

                <div class="ai-suggestion">
                    <div class="suggestion-header">
                        <span class="suggestion-title">âš ï¸ é‡è¦ãªå¤‰åŒ–ã‚’æ¤œå‡º</span>
                        <span class="confidence-badge">ä¿¡é ¼åº¦: 87%</span>
                    </div>
                    <div class="suggestion-content">
                        å‰å›é¢è«‡ã¨æ¯”è¼ƒã—ã¦ã€æŠ€è¡“å„ªä½æ€§ã¸ã®é–¢å¿ƒãŒ45%å¢—åŠ ã—ã¦ã„ã¾ã™ã€‚è¿½åŠ è³‡æ–™ã®æº–å‚™ã‚’æ¨å¥¨ã—ã¾ã™ã€‚
                    </div>
                    <div class="suggestion-actions">
                        <button class="suggestion-btn primary" onclick="prepareDocument('tech_advantage')">è³‡æ–™æº–å‚™</button>
                        <button class="suggestion-btn secondary" onclick="dismissSuggestion(2)">ç„¡è¦–</button>
                    </div>
                </div>

                <!-- AIåˆ†æçµæœ -->
                <div style="margin-top: 2rem;">
                    <h4 style="font-size: 0.875rem; font-weight: 600; margin-bottom: 1rem; color: #111827;">ğŸ“Š ä»Šå›é¢è«‡ã®åˆ†æ</h4>
                    <div style="padding: 1rem; background: #f8fafc; border-radius: 8px; border: 1px solid #e2e8f0;">
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 0.5rem;">
                            <span style="font-size: 0.75rem; color: #6b7280;">æ„Ÿæƒ…åˆ†æ</span>
                            <span style="font-size: 0.75rem; font-weight: 600; color: #10b981;">ãƒã‚¸ãƒ†ã‚£ãƒ– 78%</span>
                        </div>
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 0.5rem;">
                            <span style="font-size: 0.75rem; color: #6b7280;">é–¢å¿ƒåº¦</span>
                            <span style="font-size: 0.75rem; font-weight: 600; color: #3b82f6;">é«˜ (8.2/10)</span>
                        </div>
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 0.5rem;">
                            <span style="font-size: 0.75rem; color: #6b7280;">ç†è§£åº¦</span>
                            <span style="font-size: 0.75rem; font-weight: 600; color: #f59e0b;">ä¸­ (6.5/10)</span>
                        </div>
                        <div style="display: flex; justify-content: space-between; align-items: center;">
                            <span style="font-size: 0.75rem; color: #6b7280;">æº€è¶³åº¦</span>
                            <span style="font-size: 0.75rem; font-weight: 600; color: #10b981;">é«˜ (7.8/10)</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>
</div>
{% endblock %}

{% block extra_js %}
<script>
// ã‚°ãƒ­ãƒ¼ãƒãƒ«å¤‰æ•°
const meetingId = '{{ meeting_id }}';
let currentStage = '{{ meeting_data.current_stage }}';
let isPlaying = false;
let currentTime = 0;
let totalDuration = 5445; // 1:30:45 in seconds
let autoSaveInterval;

// åˆæœŸåŒ–
document.addEventListener('DOMContentLoaded', function() {
    initializeEditor();
    startAutoSave();
});

function initializeEditor() {
    // ç¾åœ¨ã®ã‚¹ãƒ†ãƒ¼ã‚¸ã«å¿œã˜ãŸã‚³ãƒ³ãƒ†ãƒ³ãƒ„è¡¨ç¤º
    showStageContent(currentStage);
    
    // ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰ã‚·ãƒ§ãƒ¼ãƒˆã‚«ãƒƒãƒˆ
    document.addEventListener('keydown', function(e) {
        if (e.ctrlKey || e.metaKey) {
            switch(e.key) {
                case 's':
                    e.preventDefault();
                    saveDraft();
                    break;
                case 'f':
                    e.preventDefault();
                    openSearch();
                    break;
                case ' ':
                    if (e.target.tagName !== 'INPUT' && e.target.tagName !== 'TEXTAREA') {
                        e.preventDefault();
                        togglePlayback();
                    }
                    break;
            }
        }
    });
}

function startAutoSave() {
    autoSaveInterval = setInterval(function() {
        saveDraft(true); // silent save
    }, 30000); // 30ç§’ã”ã¨
}

// ã‚¹ãƒ†ãƒ¼ã‚¸åˆ‡ã‚Šæ›¿ãˆ
function switchToStage(stageId) {
    // æ¨©é™ãƒã‚§ãƒƒã‚¯ï¼ˆå®Ÿéš›ã®å®Ÿè£…ã§ã¯å¿…è¦ï¼‰
    if (!canAccessStage(stageId)) {
        showNotification('ã“ã®ã‚¹ãƒ†ãƒ¼ã‚¸ã«ã¯ã¾ã ã‚¢ã‚¯ã‚»ã‚¹ã§ãã¾ã›ã‚“', 'warning');
        return;
    }
    
    currentStage = stageId;
    showStageContent(stageId);
    updateStageUI(stageId);
    showNotification(`${getStageLabel(stageId)}ã«åˆ‡ã‚Šæ›¿ãˆã¾ã—ãŸ`, 'info');
}

function showStageContent(stageId) {
    // ã™ã¹ã¦ã®ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚’éè¡¨ç¤º
    document.querySelectorAll('.stage-content').forEach(content => {
        content.classList.remove('active');
    });
    
    // æŒ‡å®šã•ã‚ŒãŸã‚¹ãƒ†ãƒ¼ã‚¸ã®ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚’è¡¨ç¤º
    const targetContent = document.getElementById(stageId + '-content');
    if (targetContent) {
        targetContent.classList.add('active');
    }
}

function updateStageUI(stageId) {
    // ã‚¹ãƒ†ãƒ¼ã‚¸ã‚¤ãƒ³ã‚¸ã‚±ãƒ¼ã‚¿ãƒ¼ã®æ›´æ–°
    document.querySelectorAll('.stage-item').forEach(item => {
        item.classList.remove('current');
    });
    
    const currentStageItem = document.querySelector(`[onclick="switchToStage('${stageId}')"]`);
    if (currentStageItem) {
        currentStageItem.classList.add('current');
    }
}

function canAccessStage(stageId) {
    // å®Ÿéš›ã®å®Ÿè£…ã§ã¯ã€å‰ã®ã‚¹ãƒ†ãƒ¼ã‚¸ãŒå®Œäº†ã—ã¦ã„ã‚‹ã‹ãƒã‚§ãƒƒã‚¯
    return true;
}

function getStageLabel(stageId) {
    const labels = {
        'upload': 'ãƒ•ã‚¡ã‚¤ãƒ«ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰',
        'transcription': 'æ–‡å­—èµ·ã“ã—ãƒ»ç·¨é›†',
        'ai_summary': 'AIè¦ç´„ãƒ»åˆ†æ',
        'faq': 'FAQä½œæˆ',
        'review': 'ãƒ¬ãƒ“ãƒ¥ãƒ¼ãƒ»æ‰¿èª',
        'publish': 'å…¬é–‹ãƒ»é…ä¿¡'
    };
    return labels[stageId] || stageId;
}

// ãƒ•ã‚¡ã‚¤ãƒ«æ“ä½œ
function selectFiles() {
    const input = document.createElement('input');
    input.type = 'file';
    input.multiple = true;
    input.accept = 'video/*,audio/*,.pdf';
    input.onchange = handleFileSelect;
    input.click();
}

function handleFileSelect(event) {
    const files = event.target.files;
    if (files.length > 0) {
        showNotification(`${files.length}å€‹ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ä¸­...`, 'info');
        // å®Ÿéš›ã®ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰å‡¦ç†
        uploadFiles(files);
    }
}

function handleDrop(event) {
    event.preventDefault();
    const files = event.dataTransfer.files;
    if (files.length > 0) {
        handleFileSelect({target: {files: files}});
    }
}

function handleDragOver(event) {
    event.preventDefault();
    event.currentTarget.classList.add('drag-over');
}

function uploadFiles(files) {
    // ãƒ•ã‚¡ã‚¤ãƒ«ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã®å®Ÿè£…
    Array.from(files).forEach(file => {
        const formData = new FormData();
        formData.append('file', file);
        formData.append('meeting_id', meetingId);
        
        // å®Ÿéš›ã®ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰å‡¦ç†ï¼ˆãƒ•ã‚§ãƒƒãƒAPIç­‰ï¼‰
        fetch('/api/upload', {
            method: 'POST',
            body: formData
        })
        .then(response => response.json())
        .then(data => {
            showNotification(`${file.name} ã®ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ãŒå®Œäº†ã—ã¾ã—ãŸ`, 'success');
        })
        .catch(error => {
            showNotification(`${file.name} ã®ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã«å¤±æ•—ã—ã¾ã—ãŸ`, 'error');
        });
    });
}

// éŸ³å£°ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼æ©Ÿèƒ½
function togglePlayback() {
    isPlaying = !isPlaying;
    const playIcon = document.getElementById('play-icon');
    if (playIcon) {
        playIcon.textContent = isPlaying ? 'â¸ï¸' : 'â–¶ï¸';
    }
    
    if (isPlaying) {
        startPlaybackTimer();
    } else {
        stopPlaybackTimer();
    }
    
    showNotification(isPlaying ? 'å†ç”Ÿé–‹å§‹' : 'å†ç”Ÿåœæ­¢', 'info');
}

function startPlaybackTimer() {
    window.playbackTimer = setInterval(function() {
        currentTime += 1;
        if (currentTime >= totalDuration) {
            currentTime = totalDuration;
            togglePlayback();
        }
        updateTimeDisplay();
        updateProgressBar();
    }, 1000);
}

function stopPlaybackTimer() {
    if (window.playbackTimer) {
        clearInterval(window.playbackTimer);
    }
}

function updateTimeDisplay() {
    const currentTimeElement = document.getElementById('current-time');
    const totalTimeElement = document.getElementById('total-time');
    
    if (currentTimeElement) {
        currentTimeElement.textContent = formatTime(currentTime);
    }
    if (totalTimeElement) {
        totalTimeElement.textContent = formatTime(totalDuration);
    }
}

function updateProgressBar() {
    const progressFill = document.getElementById('progress-fill');
    if (progressFill) {
        const percentage = (currentTime / totalDuration) * 100;
        progressFill.style.width = percentage + '%';
    }
}

function formatTime(seconds) {
    const hours = Math.floor(seconds / 3600);
    const minutes = Math.floor((seconds % 3600) / 60);
    const secs = Math.floor(seconds % 60);
    
    if (hours > 0) {
        return `${hours}:${minutes.toString().padStart(2, '0')}:${secs.toString().padStart(2, '0')}`;
    } else {
        return `${minutes}:${secs.toString().padStart(2, '0')}`;
    }
}

function seekAudio(event) {
    const progressBar = event.currentTarget;
    const rect = progressBar.getBoundingClientRect();
    const clickX = event.clientX - rect.left;
    const percentage = clickX / rect.width;
    
    currentTime = totalDuration * percentage;
    updateTimeDisplay();
    updateProgressBar();
}

function jumpToTime(timestamp) {
    // ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—è§£æ
    const parts = timestamp.split(':').map(Number);
    let seconds = 0;
    
    if (parts.length === 2) {
        seconds = parts[0] * 60 + parts[1];
    } else if (parts.length === 3) {
        seconds = parts[0] * 3600 + parts[1] * 60 + parts[2];
    }
    
    currentTime = seconds;
    updateTimeDisplay();
    updateProgressBar();
    showNotification(`â­ï¸ ${timestamp} ã«ã‚¸ãƒ£ãƒ³ãƒ—ã—ã¾ã—ãŸ`, 'info');
}

function setPlaybackSpeed(speed) {
    // å†ç”Ÿé€Ÿåº¦è¨­å®š
    document.querySelectorAll('.btn-secondary').forEach(btn => btn.classList.remove('active'));
    event.target.classList.add('active');
    showNotification(`å†ç”Ÿé€Ÿåº¦ã‚’ ${speed}x ã«å¤‰æ›´ã—ã¾ã—ãŸ`, 'info');
}

// æ–‡å­—èµ·ã“ã—ç·¨é›†æ©Ÿèƒ½
function highlightSegment(button) {
    const segment = button.closest('.transcript-segment');
    segment.classList.toggle('highlighted');
    showNotification(segment.classList.contains('highlighted') ? 'ãƒã‚¤ãƒ©ã‚¤ãƒˆã—ã¾ã—ãŸ' : 'ãƒã‚¤ãƒ©ã‚¤ãƒˆã‚’è§£é™¤ã—ã¾ã—ãŸ', 'success');
}

function markImportant(button) {
    const segment = button.closest('.transcript-segment');
    segment.classList.toggle('important');
    showNotification(segment.classList.contains('important') ? 'é‡è¦ç®‡æ‰€ã«ãƒãƒ¼ã‚¯ã—ã¾ã—ãŸ' : 'é‡è¦ãƒãƒ¼ã‚¯ã‚’è§£é™¤ã—ã¾ã—ãŸ', 'success');
}

function addNote(button) {
    const segment = button.closest('.transcript-segment');
    const noteText = prompt('ãƒ¡ãƒ¢ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„:');
    if (noteText) {
        // ãƒ¡ãƒ¢è¦ç´ ã‚’è¿½åŠ 
        let noteElement = segment.querySelector('.segment-note');
        if (!noteElement) {
            noteElement = document.createElement('div');
            noteElement.className = 'segment-note';
            noteElement.style.cssText = 'margin-top: 0.5rem; padding: 0.5rem; background: #fef3c7; border-radius: 4px; border-left: 3px solid #f59e0b;';
            segment.appendChild(noteElement);
        }
        noteElement.innerHTML = `<span style="font-weight: 600; color: #92400e; font-size: 0.75rem;">ğŸ“ ãƒ¡ãƒ¢:</span> <span style="color: #451a03; font-size: 0.75rem;">${noteText}</span>`;
        showNotification('ãƒ¡ãƒ¢ã‚’è¿½åŠ ã—ã¾ã—ãŸ', 'success');
    }
}

// AIæ©Ÿèƒ½
function regenerateSummary(type) {
    showNotification('AIè¦ç´„ã‚’å†ç”Ÿæˆä¸­...', 'info');
    setTimeout(function() {
        showNotification('AIè¦ç´„ã‚’æ›´æ–°ã—ã¾ã—ãŸ', 'success');
    }, 3000);
}

function regenerateKeyPoints() {
    showNotification('é‡è¦ãƒã‚¤ãƒ³ãƒˆã‚’è‡ªå‹•æŠ½å‡ºä¸­...', 'info');
    setTimeout(function() {
        showNotification('é‡è¦ãƒã‚¤ãƒ³ãƒˆã‚’æ›´æ–°ã—ã¾ã—ãŸ', 'success');
    }, 2000);
}

// ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³æ©Ÿèƒ½
function proceedToNext() {
    const stages = ['upload', 'transcription', 'ai_summary', 'faq', 'review', 'publish'];
    const currentIndex = stages.indexOf(currentStage);
    if (currentIndex < stages.length - 1) {
        switchToStage(stages[currentIndex + 1]);
    } else {
        showNotification('æœ€å¾Œã®ã‚¹ãƒ†ãƒƒãƒ—ã§ã™', 'info');
    }
}

function saveDraft(silent = false) {
    const saveIndicator = document.querySelector('.save-indicator');
    if (saveIndicator) {
        saveIndicator.classList.add('saving');
    }
    
    // ä¿å­˜å‡¦ç†ã®ã‚·ãƒŸãƒ¥ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³
    setTimeout(function() {
        if (saveIndicator) {
            saveIndicator.classList.remove('saving');
        }
        if (!silent) {
            showNotification('ä¸‹æ›¸ãã‚’ä¿å­˜ã—ã¾ã—ãŸ', 'success');
        }
    }, 1000);
}

function shareWithTeam() {
    showNotification('ãƒãƒ¼ãƒ å…±æœ‰æ©Ÿèƒ½ã‚’é–‹ç™ºä¸­...', 'info');
}

function exportData() {
    showNotification('ãƒ‡ãƒ¼ã‚¿ã‚’æ›¸ãå‡ºã—ä¸­...', 'info');
    setTimeout(function() {
        showNotification('æ›¸ãå‡ºã—ãŒå®Œäº†ã—ã¾ã—ãŸ', 'success');
    }, 2000);
}

// FAQé–¢é€£æ©Ÿèƒ½
function openFAQEditor() {
    window.location.href = `/dialogue/faq/${meetingId}`;
}

function createFAQ(topic) {
    showNotification('FAQä½œæˆç”»é¢ã‚’é–‹ã„ã¦ã„ã¾ã™...', 'info');
    setTimeout(function() {
        window.location.href = `/dialogue/faq/${meetingId}?topic=${topic}`;
    }, 1000);
}

// AIææ¡ˆæ©Ÿèƒ½
function dismissSuggestion(id) {
    const suggestions = document.querySelectorAll('.ai-suggestion');
    if (suggestions[id - 1]) {
        suggestions[id - 1].style.display = 'none';
        showNotification('ææ¡ˆã‚’ç„¡è¦–ã—ã¾ã—ãŸ', 'info');
    }
}

function prepareDocument(type) {
    showNotification('è³‡æ–™æº–å‚™ã‚’é–‹å§‹ã—ã¾ã—ãŸ', 'success');
}

// æ¯”è¼ƒãƒ»å±¥æ­´æ©Ÿèƒ½
function compareWithPast(date) {
    showNotification(`${date}ã®é¢è«‡ãƒ‡ãƒ¼ã‚¿ã¨æ¯”è¼ƒä¸­...`, 'info');
    setTimeout(function() {
        // æ¯”è¼ƒçµæœã‚’è¡¨ç¤ºï¼ˆå®Ÿè£…ä¾‹ï¼‰
        showNotification('æ¯”è¼ƒçµæœã‚’AIãƒ‘ãƒãƒ«ã«è¡¨ç¤ºã—ã¾ã—ãŸ', 'success');
    }, 1500);
}

function openDocument(docId) {
    window.open(`/documents/${docId}`, '_blank');
}

// é€šçŸ¥æ©Ÿèƒ½
function showNotification(message, type = 'info') {
    const notification = document.createElement('div');
    notification.className = 'fixed top-4 right-4 px-6 py-4 rounded-lg shadow-lg z-50 transform transition-all duration-300';
    
    const colors = {
        success: 'bg-green-500 text-white',
        error: 'bg-red-500 text-white',
        warning: 'bg-yellow-500 text-white',
        info: 'bg-blue-500 text-white'
    };
    
    notification.className += ' ' + (colors[type] || colors.info);
    notification.textContent = message;
    
    document.body.appendChild(notification);
    
    // ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³
    setTimeout(() => {
        notification.style.transform = 'translateX(0)';
    }, 10);
    
    // 3ç§’å¾Œã«å‰Šé™¤
    setTimeout(() => {
        notification.style.transform = 'translateX(400px)';
        setTimeout(() => notification.remove(), 300);
    }, 3000);
}

// ã‚¹ãƒ†ãƒ¼ã‚¸ç‰¹åŒ–ã‚¢ã‚¯ã‚·ãƒ§ãƒ³
function startUpload() {
    selectFiles();
}

function saveTranscript() {
    showNotification('æ–‡å­—èµ·ã“ã—ã‚’ä¿å­˜ã—ã¾ã—ãŸ', 'success');
}

function approveSummary() {
    showNotification('AIè¦ç´„ã‚’æ‰¿èªã—ã¾ã—ãŸ', 'success');
    switchToStage('faq');
}

function completeFAQs() {
    showNotification('FAQä½œæˆã‚’å®Œäº†ã—ã¾ã—ãŸ', 'success');
    switchToStage('review');
}

function approveReview() {
    showNotification('ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚’æ‰¿èªã—ã¾ã—ãŸ', 'success');
    switchToStage('publish');
}

function publishNow() {
    if (confirm('è­°äº‹éŒ²ã‚’å…¬é–‹ã—ã¾ã™ã‹ï¼Ÿ')) {
        showNotification('è­°äº‹éŒ²ã‚’å…¬é–‹ã—ã¾ã—ãŸ', 'success');
    }
}

function openPublishSettings() {
    window.location.href = `/dialogue/publish?id=${meetingId}`;
}

function schedulePublish() {
    openPublishSettings();
}

// å‡¦ç†ä¸­ã‚¹ãƒ†ãƒ¼ã‚¸ã®è‡ªå‹•æ›´æ–°
if (document.querySelector('.processing')) {
    setInterval(function() {
        // å®Ÿéš›ã®å®Ÿè£…ã§ã¯é€²æ—APIã‚’ãƒã‚§ãƒƒã‚¯
        location.reload();
    }, 30000);
}
</script>
{% endblock %} 