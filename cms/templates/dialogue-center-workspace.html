{% extends 'base-three-column.html' %}

{% block title %}Â§ñÈÉ®MTGË≠∞‰∫ãÈå≤{% endblock %}

{% block left_sidebar_title %}ÂØæË©±Ë®òÈå≤„Çπ„Éà„É™„Éº„É†{% endblock %}
{% block right_panel_title %}üß† „Ç§„É≥„ÉÜ„É™„Ç∏„Çß„É≥„Çπ{% endblock %}
{% block right_panel_toggle_text %}Áü•ËÉΩÂàÜÊûê{% endblock %}

{% block main_title %}Â§ñÈÉ®MTGË≠∞‰∫ãÈå≤{% endblock %}
{% block main_subtitle %}Áµ±Âêà„Åï„Çå„Åü„Ç¢„ÇØ„ÉÜ„Ç£„Éì„ÉÜ„Ç£„Çπ„Éà„É™„Éº„É†ÁÆ°ÁêÜ{% endblock %}

{% block three_column_extra_css %}
<style>
/* Â§ñÈÉ®MTGË≠∞‰∫ãÈå≤Â∞ÇÁî®„Çπ„Çø„Ç§„É´ */

/* „Ç¢„ÇØ„ÉÜ„Ç£„Éì„ÉÜ„Ç£„Ç´„Éº„ÉâÂ∞ÇÁî® */
.activity-card {
    /* cardÂü∫Êú¨„Çπ„Çø„Ç§„É´„Åã„ÇâÁ∂ôÊâø */
}

.activity-card:hover::after {
    content: "„ÉÄ„Éñ„É´„ÇØ„É™„ÉÉ„ÇØ„ÅßÁ∑®ÈõÜ";
    position: absolute;
    top: -10px;
    right: 8px;
    background: rgba(0, 0, 0, 0.8);
    color: white;
    padding: 2px 6px;
    border-radius: 4px;
    font-size: 10px;
    pointer-events: none;
    opacity: 0.9;
    z-index: 10;
}

.activity-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 0.5rem;
}

.activity-title {
    font-weight: 600;
    color: #1f2937;
    font-size: 0.875rem;
    line-height: 1.25rem;
}

.activity-time {
    font-size: 0.75rem;
    color: #6b7280;
}

.activity-meta {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    margin-bottom: 0.5rem;
    font-size: 0.75rem;
    color: #6b7280;
}

.investor-badge {
    background: #f3f4f6;
    color: #374151;
    padding: 0.125rem 0.5rem;
    border-radius: 4px;
    font-size: 0.75rem;
}

.activity-progress {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    margin-top: 0.5rem;
}

.progress-label {
    font-size: 0.75rem;
    color: #6b7280;
}

/* Âá¶ÁêÜ„Éë„Ç§„Éó„É©„Ç§„É≥Ë°®Á§∫ */
.pipeline-viewer {
    background: #f8fafc;
    border-radius: 8px;
    padding: 1rem;
    margin-bottom: 1.5rem;
}

.pipeline-stages {
    display: flex;
    justify-content: space-between;
    position: relative;
    margin-bottom: 0.5rem;
}

.pipeline-stages::before {
    content: '';
    position: absolute;
    top: 12px;
    left: 0;
    right: 0;
    height: 2px;
    background: #e5e7eb;
    z-index: 1;
}

.pipeline-stage {
    display: flex;
    flex-direction: column;
    align-items: center;
    z-index: 2;
    background: white;
    padding: 0 0.5rem;
    position: relative;
}

.stage-circle {
    width: 24px;
    height: 24px;
    border-radius: 50%;
    background: #e5e7eb;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 0.75rem;
    font-weight: 600;
    margin-bottom: 0.25rem;
    transition: all 0.2s;
}

.stage-circle.completed {
    background: #10b981;
    color: white;
}

.stage-circle.active {
    background: #3b82f6;
    color: white;
    animation: pulse 2s infinite;
}

.stage-circle.processing {
    background: #f59e0b;
    color: white;
    position: relative;
}

.stage-label {
    font-size: 0.625rem;
    color: #6b7280;
    text-align: center;
    line-height: 1.2;
}

/* „Éì„É•„Éº„Ç∑„Çπ„ÉÜ„É† */
.view-content {
    flex: 1;
    padding: 1.5rem;
    overflow-y: auto;
    display: none;
}

.view-content.active {
    display: block;
}

/* „Çø„Éñ„Éì„É•„Éº„Ç∑„Çπ„ÉÜ„É† */
.workspace-tabs {
    display: flex;
    background: #f8fafc;
    border-bottom: 1px solid #e5e7eb;
}

.workspace-tab {
    padding: 0.75rem 1rem;
    font-size: 0.875rem;
    font-weight: 500;
    color: #6b7280;
    cursor: pointer;
    border-bottom: 2px solid transparent;
    transition: all 0.2s;
}

.workspace-tab.active {
    color: #3b82f6;
    border-bottom-color: #3b82f6;
    background: white;
}

.workspace-tab:hover:not(.active) {
    color: #374151;
    background: #f3f4f6;
}

.tab-content {
    flex: 1;
    padding: 1.5rem;
    overflow-y: auto;
    display: none;
}

.tab-content.active {
    display: block;
}

/* „Åã„Çì„Å∞„Çì„Éú„Éº„Éâ */
.kanban-board {
    display: flex;
    gap: 1rem;
    min-height: 600px;
    overflow-x: auto;
    padding-bottom: 1rem;
}

.kanban-column {
    min-width: 280px;
    background: #f8fafc;
    border-radius: 8px;
    display: flex;
    flex-direction: column;
}

.kanban-header {
    padding: 1rem;
    border-bottom: 1px solid #e5e7eb;
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.kanban-content {
    flex: 1;
    padding: 1rem;
    overflow-y: auto;
}

.kanban-card {
    background: white;
    border-radius: 6px;
    padding: 0.75rem;
    margin-bottom: 0.75rem;
    border: 1px solid #e5e7eb;
    cursor: pointer;
    transition: all 0.2s;
}

.kanban-card:hover {
    transform: translateY(-1px);
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
}

.kanban-card.urgent {
    border-left: 4px solid #ef4444;
    background: #fef2f2;
}

.kanban-card.processing {
    border-left: 4px solid #f59e0b;
}

.kanban-card.completed {
    border-left: 4px solid #10b981;
    background: #f0fdfa;
}

/* „Éá„Éº„Çø„ÉÜ„Éº„Éñ„É´ */
.table-container {
    background: white;
    border-radius: 8px;
}

.table-controls {
    padding: 1rem;
    border-bottom: 1px solid #e5e7eb;
}

.data-table-wrapper {
    overflow-x: auto;
}

.data-table {
    width: 100%;
    border-collapse: collapse;
    font-size: 0.875rem;
}

.data-table th {
    background: #f8fafc;
    padding: 0.75rem;
    text-align: left;
    font-weight: 600;
    color: #374151;
    border-bottom: 2px solid #e5e7eb;
    white-space: nowrap;
}

.data-table th.sortable {
    cursor: pointer;
    position: relative;
}

.data-table th.sortable:hover {
    background: #f1f5f9;
}

.sort-icon {
    margin-left: 0.25rem;
    color: #9ca3af;
    font-size: 0.75rem;
}

.data-table td {
    padding: 0.75rem;
    border-bottom: 1px solid #f3f4f6;
    vertical-align: middle;
}

.table-row {
    cursor: pointer;
    transition: background-color 0.2s;
}

.table-row:hover {
    background: #f8fafc;
}

.table-row.urgent {
    background: #fef2f2;
}

.table-row.processing {
    background: #fffbeb;
}

.table-row.completed {
    background: #f0fdfa;
}

.table-row.selected {
    background: #eff6ff;
    border-left: 4px solid #3b82f6;
}

/* „Éê„ÉÉ„Ç∏„Å®„Çπ„ÉÜ„Éº„Çø„Çπ */
.status-badge {
    padding: 0.25rem 0.5rem;
    border-radius: 4px;
    font-size: 0.75rem;
    font-weight: 500;
}

.status-badge.urgent {
    background: #fee2e2;
    color: #dc2626;
}

.status-badge.processing {
    background: #fef3c7;
    color: #d97706;
}

.status-badge.completed {
    background: #d1fae5;
    color: #059669;
}

.badge {
    padding: 0.125rem 0.5rem;
    border-radius: 9999px;
    font-size: 0.75rem;
    font-weight: 500;
}

.badge-blue {
    background: #dbeafe;
    color: #1d4ed8;
}

.badge-green {
    background: #d1fae5;
    color: #059669;
}

.badge-red {
    background: #fee2e2;
    color: #dc2626;
}

.badge-purple {
    background: #e9d5ff;
    color: #7c3aed;
}

.badge-gray {
    background: #f3f4f6;
    color: #374151;
}

/* AIÂàÜÊûêË°®Á§∫ */
.ai-insights {
    background: linear-gradient(135deg, #f0f9ff 0%, #e0f2fe 100%);
    border: 1px solid #0284c7;
    border-radius: 8px;
    padding: 1rem;
    margin-bottom: 1rem;
}

.insight-header {
    display: flex;
    align-items: center;
    gap: 0.5rem;
    font-weight: 600;
    color: #0c4a6e;
    margin-bottom: 0.5rem;
}

.insight-list {
    list-style: none;
    padding: 0;
    margin: 0;
}

.insight-item {
    display: flex;
    align-items: flex-start;
    gap: 0.5rem;
    margin-bottom: 0.5rem;
    font-size: 0.875rem;
    color: #0c4a6e;
}

.insight-icon {
    flex-shrink: 0;
    margin-top: 0.125rem;
}

/* „Ç¢„ÇØ„Ç∑„Éß„É≥„Éë„Éç„É´ */
.action-panel {
    background: #fefce8;
    border: 1px solid #eab308;
    border-radius: 8px;
    padding: 1rem;
    margin-bottom: 1rem;
}

.action-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-bottom: 0.75rem;
}

.action-title {
    font-weight: 600;
    color: #a16207;
}

.action-count {
    background: #eab308;
    color: white;
    font-size: 0.75rem;
    padding: 0.125rem 0.5rem;
    border-radius: 9999px;
}

.action-list {
    list-style: none;
    padding: 0;
    margin: 0;
}

.action-item {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 0.5rem;
    background: white;
    border-radius: 4px;
    margin-bottom: 0.5rem;
    font-size: 0.875rem;
}

.action-priority {
    width: 8px;
    height: 8px;
    border-radius: 50%;
    margin-right: 0.5rem;
}

.action-priority.high {
    background: #ef4444;
}

.action-priority.medium {
    background: #f59e0b;
}

.action-priority.low {
    background: #10b981;
}

/* Áµ±Ë®à„Ç¶„Ç£„Ç∏„Çß„ÉÉ„Éà */
.stats-widget {
    background: #f8fafc;
    border-radius: 8px;
    padding: 1rem;
    margin-bottom: 1rem;
}

.stats-grid {
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: 1rem;
}

.stat-item {
    text-align: center;
}

.stat-value {
    font-size: 1.5rem;
    font-weight: 700;
    color: #1f2937;
}

.stat-label {
    font-size: 0.75rem;
    color: #6b7280;
    margin-top: 0.25rem;
}

.stat-trend {
    font-size: 0.75rem;
    margin-top: 0.25rem;
}

.stat-trend.positive {
    color: #10b981;
}

.stat-trend.negative {
    color: #ef4444;
}

/* „Éï„Ç©„Éº„É†Èñ¢ÈÄ£ */
.form-control-sm {
    padding: 0.375rem 0.5rem;
    font-size: 0.875rem;
    border: 1px solid #d1d5db;
    border-radius: 4px;
    background: white;
    transition: border-color 0.2s;
}

.form-control-sm:focus {
    outline: none;
    border-color: #3b82f6;
    box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
}

.btn-sm {
    padding: 0.375rem 0.75rem;
    font-size: 0.875rem;
    font-weight: 500;
    border-radius: 4px;
    border: 1px solid transparent;
    cursor: pointer;
    transition: all 0.2s;
    display: inline-flex;
    align-items: center;
    gap: 0.25rem;
}

.btn-sm.btn-primary {
    background: #3b82f6;
    color: white;
    border-color: #3b82f6;
}

.btn-sm.btn-primary:hover {
    background: #2563eb;
    border-color: #2563eb;
}

.btn-sm.btn-secondary {
    background: #f3f4f6;
    color: #374151;
    border-color: #d1d5db;
}

.btn-sm.btn-secondary:hover {
    background: #e5e7eb;
    border-color: #9ca3af;
}

/* „Éó„É≠„Ç∞„É¨„Çπ„Éê„Éº */
.progress-bar-mini {
    height: 4px;
    background: #e5e7eb;
    border-radius: 2px;
    overflow: hidden;
}

.progress-fill {
    height: 100%;
    background: #3b82f6;
    transition: width 0.3s ease;
}

.progress-fill.stalled {
    background: #ef4444;
    animation: pulse 1s infinite;
}

.progress-fill.processing {
    background: #f59e0b;
}

.progress-fill.completed {
    background: #10b981;
}

.progress-bar-table {
    width: 60px;
    height: 6px;
    background: #e5e7eb;
    border-radius: 3px;
    overflow: hidden;
    margin: 0 auto;
}

.ai-score-container {
    text-align: center;
}

.ai-score {
    font-weight: 600;
    font-size: 0.875rem;
}

.ai-score.high {
    color: #059669;
}

.ai-score.medium {
    color: #d97706;
}

.ai-score.low {
    color: #dc2626;
}

.action-buttons {
    display: flex;
    gap: 0.25rem;
}

.btn-action {
    padding: 0.25rem 0.5rem;
    font-size: 0.75rem;
    border: 1px solid #d1d5db;
    background: white;
    color: #374151;
    border-radius: 4px;
    cursor: pointer;
    transition: all 0.2s;
}

.btn-action:hover {
    background: #f3f4f6;
    border-color: #9ca3af;
}

.bulk-action-bar {
    padding: 1rem;
    background: #f8fafc;
    border-top: 1px solid #e5e7eb;
    border-radius: 0 0 8px 8px;
}

.pagination-mini {
    display: flex;
    align-items: center;
    gap: 0.5rem;
}

.btn-pagination {
    padding: 0.25rem 0.5rem;
    border: 1px solid #d1d5db;
    background: white;
    color: #374151;
    border-radius: 4px;
    cursor: pointer;
    font-size: 0.875rem;
}

.btn-pagination:hover {
    background: #f3f4f6;
}

.pagination-info {
    font-size: 0.875rem;
    color: #6b7280;
}
</style>
{% endblock %}

{% block left_sidebar_header_actions %}
<span class="text-sm opacity-75">156‰ª∂</span>
{% endblock %}

{% block left_sidebar_filters %}
<div class="flex gap-0.5rem mt-4">
    <div class="filter-chip active" onclick="filterStream('all')">ÂÖ®„Å¶</div>
    <div class="filter-chip" onclick="filterStream('urgent')">Á∑äÊÄ• (3)</div>
    <div class="filter-chip" onclick="filterStream('processing')">Âá¶ÁêÜ‰∏≠ (12)</div>
    <div class="filter-chip" onclick="filterStream('today')">‰ªäÊó• (5)</div>
</div>
{% endblock %}

{% block left_sidebar_content %}
<!-- Á∑äÊÄ•ÂØæÂøú„ÅåÂøÖË¶Å„Å™Ë®òÈå≤ -->
<div class="activity-card urgent selected card" onclick="selectActivity('activity-001')" ondblclick="editRecord('activity-001')" title="„ÉÄ„Éñ„É´„ÇØ„É™„ÉÉ„ÇØ„ÅßÁ∑®ÈõÜ">
    <div class="activity-header">
        <div class="activity-title">ÈáéÊùëAMÊ±∫ÁÆóË™¨Êòé‰ºö</div>
        <div class="activity-time">2ÊôÇÈñìÂâç</div>
    </div>
    <div class="activity-meta">
        <span class="investor-badge">Ê©üÈñ¢ÊäïË≥áÂÆ∂</span>
        <span>‚Ä¢</span>
        <span>90ÂàÜ</span>
        <span>‚Ä¢</span>
        <span class="text-red-600 font-medium">Âá¶ÁêÜÂÅúÊªû</span>
    </div>
    <div class="activity-progress">
        <div class="progress-dots">
            <div class="progress-dot completed"></div>
            <div class="progress-dot completed"></div>
            <div class="progress-dot active"></div>
            <div class="progress-dot"></div>
            <div class="progress-dot"></div>
            <div class="progress-dot"></div>
        </div>
        <div class="progress-label">AIË¶ÅÁ¥Ñ‰∏≠</div>
    </div>
</div>

<!-- Âá¶ÁêÜ‰∏≠„ÅÆË®òÈå≤ -->
<div class="activity-card processing card" onclick="selectActivity('activity-002')" ondblclick="editRecord('activity-002')" title="„ÉÄ„Éñ„É´„ÇØ„É™„ÉÉ„ÇØ„ÅßÁ∑®ÈõÜ">
    <div class="activity-header">
        <div class="activity-title">BlackRockÂÄãÂà•Èù¢Ë´á</div>
        <div class="activity-time">5ÊôÇÈñìÂâç</div>
    </div>
    <div class="activity-meta">
        <span class="investor-badge">Êµ∑Â§ñÊäïË≥áÂÆ∂</span>
        <span>‚Ä¢</span>
        <span>45ÂàÜ</span>
        <span>‚Ä¢</span>
        <span class="text-yellow-600 font-medium">FAQ‰ΩúÊàê‰∏≠</span>
    </div>
    <div class="activity-progress">
        <div class="progress-dots">
            <div class="progress-dot completed"></div>
            <div class="progress-dot completed"></div>
            <div class="progress-dot completed"></div>
            <div class="progress-dot active"></div>
            <div class="progress-dot"></div>
            <div class="progress-dot"></div>
        </div>
        <div class="progress-label">FAQÁîüÊàê‰∏≠</div>
    </div>
</div>

<!-- ÂÆå‰∫ÜÊ∏à„Åø„ÅÆË®òÈå≤ -->
<div class="activity-card completed card" onclick="selectActivity('activity-003')" ondblclick="editRecord('activity-003')" title="„ÉÄ„Éñ„É´„ÇØ„É™„ÉÉ„ÇØ„ÅßÁ∑®ÈõÜ">
    <div class="activity-header">
        <div class="activity-title">ÂÄã‰∫∫ÊäïË≥áÂÆ∂Ë™¨Êòé‰ºö</div>
        <div class="activity-time">1Êó•Ââç</div>
    </div>
    <div class="activity-meta">
        <span class="investor-badge">ÂÄã‰∫∫ÊäïË≥áÂÆ∂</span>
        <span>‚Ä¢</span>
        <span>2ÊôÇÈñì</span>
        <span>‚Ä¢</span>
        <span class="text-green-600 font-medium">ÂÖ¨ÈñãÊ∏à„Åø</span>
    </div>
    <div class="activity-progress">
        <div class="progress-dots">
            <div class="progress-dot completed"></div>
            <div class="progress-dot completed"></div>
            <div class="progress-dot completed"></div>
            <div class="progress-dot completed"></div>
            <div class="progress-dot completed"></div>
            <div class="progress-dot completed"></div>
        </div>
        <div class="progress-label">ÂÆå‰∫Ü</div>
    </div>
</div>

<!-- ‰ªäÊó•‰∫àÂÆö„ÅÆË®òÈå≤ -->
<div class="activity-card card" onclick="selectActivity('activity-004')" ondblclick="editRecord('activity-004')" title="„ÉÄ„Éñ„É´„ÇØ„É™„ÉÉ„ÇØ„ÅßÁ∑®ÈõÜ">
    <div class="activity-header">
        <div class="activity-title">VanguardÂÆöÊúüÈù¢Ë´á</div>
        <div class="activity-time">14:00‰∫àÂÆö</div>
    </div>
    <div class="activity-meta">
        <span class="investor-badge">Êµ∑Â§ñÊäïË≥áÂÆ∂</span>
        <span>‚Ä¢</span>
        <span>60ÂàÜ</span>
        <span>‚Ä¢</span>
        <span class="text-blue-600 font-medium">Ê∫ñÂÇôÂÆå‰∫Ü</span>
    </div>
    <div class="activity-progress">
        <div class="progress-dots">
            <div class="progress-dot"></div>
            <div class="progress-dot"></div>
            <div class="progress-dot"></div>
            <div class="progress-dot"></div>
            <div class="progress-dot"></div>
            <div class="progress-dot"></div>
        </div>
        <div class="progress-label">ÂÆüÊñΩÂæÖ„Å°</div>
    </div>
</div>

<!-- ËøΩÂä†„ÅÆË®òÈå≤... -->
<div class="activity-card card" onclick="selectActivity('activity-005')" ondblclick="editRecord('activity-005')" title="„ÉÄ„Éñ„É´„ÇØ„É™„ÉÉ„ÇØ„ÅßÁ∑®ÈõÜ">
    <div class="activity-header">
        <div class="activity-title">„Ç¢„Éä„É™„Çπ„ÉàÂêë„ÅëË™¨Êòé‰ºö</div>
        <div class="activity-time">2Êó•Ââç</div>
    </div>
    <div class="activity-meta">
        <span class="investor-badge">„Ç¢„Éä„É™„Çπ„Éà</span>
        <span>‚Ä¢</span>
        <span>75ÂàÜ</span>
        <span>‚Ä¢</span>
        <span class="text-yellow-600 font-medium">„É¨„Éì„É•„ÉºÂæÖ„Å°</span>
    </div>
    <div class="activity-progress">
        <div class="progress-dots">
            <div class="progress-dot completed"></div>
            <div class="progress-dot completed"></div>
            <div class="progress-dot completed"></div>
            <div class="progress-dot completed"></div>
            <div class="progress-dot active"></div>
            <div class="progress-dot"></div>
        </div>
        <div class="progress-label">ÊâøË™çÂæÖ„Å°</div>
    </div>
</div>
{% endblock %}

{% block main_header_stats %}
<div class="text-right">
    <p class="text-sm text-blue-200">Âá¶ÁêÜ‰∏≠</p>
    <p class="text-2xl font-bold">12‰ª∂</p>
</div>
<div class="text-right">
    <p class="text-sm text-blue-200">Á∑äÊÄ•ÂØæÂøú</p>
    <p class="text-2xl font-bold text-yellow-300">3‰ª∂</p>
</div>
<div class="text-right">
    <p class="text-sm text-blue-200">‰ªäÊó•ÂÆå‰∫Ü</p>
    <p class="text-2xl font-bold text-green-300">8‰ª∂</p>
</div>
{% endblock %}

{% block main_content %}
<!-- „ÉÑ„Éº„É´„Éê„Éº -->
<div class="toolbar">
    <div class="toolbar-group">
        <button class="btn-toolbar" onclick="bulkProcess()">
            <span>‚ö°</span>
            <span>‰∏ÄÊã¨Âá¶ÁêÜ</span>
        </button>
        <button class="btn-toolbar" onclick="exportData()">
            <span>üì•</span>
            <span>„Ç®„ÇØ„Çπ„Éù„Éº„Éà</span>
        </button>
    </div>
    <div class="toolbar-separator"></div>
    <div class="toolbar-group">
        <button class="btn-toolbar active" onclick="setViewMode('stream')">
            <span>üìä</span>
            <span>„Çπ„Éà„É™„Éº„É†</span>
        </button>
        <button class="btn-toolbar" onclick="setViewMode('kanban')">
            <span>üìã</span>
            <span>„Åã„Çì„Å∞„Çì</span>
        </button>
        <button class="btn-toolbar" onclick="setViewMode('table')">
            <span>üìë</span>
            <span>„ÉÜ„Éº„Éñ„É´</span>
        </button>
    </div>
    <div class="toolbar-separator"></div>
    <div class="toolbar-group">
        <button class="btn-toolbar" onclick="showFilters()">
            <span>üîç</span>
            <span>Ë©≥Á¥∞„Éï„Ç£„É´„Çø</span>
        </button>
    </div>
</div>

<!-- „Çø„Éñ„Ç∑„Çπ„ÉÜ„É†Ôºà„Éì„É•„Éº„É¢„Éº„ÉâÊôÇ„ÅØÈùûË°®Á§∫„ÄÅÈÅ∏ÊäûË®òÈå≤„ÅÆË©≥Á¥∞ÊôÇ„Å´Ë°®Á§∫Ôºâ -->
<div class="workspace-tabs" id="detailTabs" style="display: none;">
    <div class="workspace-tab active" onclick="switchDetailTab('overview')">
        <span>üìä Ê¶ÇË¶Å</span>
    </div>
    <div class="workspace-tab" onclick="switchDetailTab('transcript')">
        <span>üìù ÊñáÂ≠óËµ∑„Åì„Åó</span>
    </div>
    <div class="workspace-tab" onclick="switchDetailTab('analysis')">
        <span>ü§ñ AIÂàÜÊûê</span>
    </div>
    <div class="workspace-tab" onclick="switchDetailTab('timeline')">
        <span>‚è∞ „Çø„Ç§„É†„É©„Ç§„É≥</span>
    </div>
</div>

<!-- „Çπ„Éà„É™„Éº„É†„Éì„É•„Éº -->
<div id="view-stream" class="view-content active">
    <!-- ÈÅ∏Êäû„Åï„Çå„ÅüË®òÈå≤„ÅÆÂá¶ÁêÜ„Éë„Ç§„Éó„É©„Ç§„É≥ -->
    <div class="pipeline-viewer">
        <h3 class="font-semibold text-gray-800 mb-3">Âá¶ÁêÜ„Éë„Ç§„Éó„É©„Ç§„É≥ - ÈáéÊùëAMÊ±∫ÁÆóË™¨Êòé‰ºö</h3>
        <div class="pipeline-stages">
            <div class="pipeline-stage">
                <div class="stage-circle completed">‚úì</div>
                <div class="stage-label">„Ç¢„ÉÉ„Éó„É≠„Éº„Éâ</div>
            </div>
            <div class="pipeline-stage">
                <div class="stage-circle completed">‚úì</div>
                <div class="stage-label">ÊñáÂ≠óËµ∑„Åì„Åó</div>
            </div>
            <div class="pipeline-stage">
                <div class="stage-circle processing">‚è≥</div>
                <div class="stage-label">AIË¶ÅÁ¥Ñ</div>
            </div>
            <div class="pipeline-stage">
                <div class="stage-circle">4</div>
                <div class="stage-label">FAQ‰ΩúÊàê</div>
            </div>
            <div class="pipeline-stage">
                <div class="stage-circle">5</div>
                <div class="stage-label">„É¨„Éì„É•„Éº</div>
            </div>
            <div class="pipeline-stage">
                <div class="stage-circle">6</div>
                <div class="stage-label">ÂÖ¨Èñã</div>
            </div>
        </div>
        <div class="bg-blue-50 rounded-lg p-3 mt-3">
            <div class="flex items-center gap-2">
                <div class="w-2 h-2 bg-blue-500 rounded-full animate-pulse"></div>
                <span class="text-sm text-blue-800 font-medium">AIË¶ÅÁ¥ÑÂá¶ÁêÜ‰∏≠...</span>
                <span class="text-sm text-blue-600">Êé®ÂÆöÊÆã„ÇäÊôÇÈñì: 3ÂàÜ</span>
            </div>
            <div class="w-full bg-blue-200 rounded-full h-2 mt-2">
                <div class="bg-blue-600 h-2 rounded-full animate-pulse" style="width: 65%"></div>
            </div>
        </div>
    </div>
    
    <!-- Âü∫Êú¨ÊÉÖÂ†±„Ç´„Éº„Éâ -->
    <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
        <div class="bg-gray-50 rounded-lg p-4">
            <h4 class="font-semibold text-gray-800 mb-3">üìã Âü∫Êú¨ÊÉÖÂ†±</h4>
            <div class="space-y-2 text-sm">
                <div class="flex justify-between">
                    <span class="text-gray-600">ÊäïË≥áÂÆ∂</span>
                    <span class="font-medium">ÈáéÊùë„Ç¢„Çª„ÉÉ„Éà„Éû„Éç„Ç∏„É°„É≥„Éà</span>
                </div>
                <div class="flex justify-between">
                    <span class="text-gray-600">Á®ÆÂà•</span>
                    <span class="font-medium">Ê±∫ÁÆóË™¨Êòé‰ºö</span>
                </div>
                <div class="flex justify-between">
                    <span class="text-gray-600">Êó•ÊôÇ</span>
                    <span class="font-medium">2024/12/26 15:00</span>
                </div>
                <div class="flex justify-between">
                    <span class="text-gray-600">ÊôÇÈñì</span>
                    <span class="font-medium">90ÂàÜ</span>
                </div>
                <div class="flex justify-between">
                    <span class="text-gray-600">ÂèÇÂä†ËÄÖ</span>
                    <span class="font-medium">CEO, CFO, IRÈÉ®Èï∑</span>
                </div>
            </div>
        </div>
        
        <div class="bg-gray-50 rounded-lg p-4">
            <h4 class="font-semibold text-gray-800 mb-3">üìä Âá¶ÁêÜÁµ±Ë®à</h4>
            <div class="space-y-2 text-sm">
                <div class="flex justify-between">
                    <span class="text-gray-600">ÊñáÂ≠óÊï∞</span>
                    <span class="font-medium">15,680ÊñáÂ≠ó</span>
                </div>
                <div class="flex justify-between">
                    <span class="text-gray-600">ÊñáÂ≠óËµ∑„Åì„ÅóÁ≤æÂ∫¶</span>
                    <span class="font-medium text-green-600">96%</span>
                </div>
                <div class="flex justify-between">
                    <span class="text-gray-600">Âá¶ÁêÜÈñãÂßã</span>
                    <span class="font-medium">2ÊôÇÈñìÂâç</span>
                </div>
                <div class="flex justify-between">
                    <span class="text-gray-600">ÈÄ≤Êçó</span>
                    <span class="font-medium text-blue-600">65%</span>
                </div>
                <div class="flex justify-between">
                    <span class="text-gray-600">ÊãÖÂΩìËÄÖ</span>
                    <span class="font-medium">IRÊãÖÂΩìËÄÖA</span>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Ê¨°„ÅÆ„Ç¢„ÇØ„Ç∑„Éß„É≥ -->
    <div class="bg-yellow-50 border border-yellow-200 rounded-lg p-4">
        <div class="flex items-center gap-2 mb-2">
            <span class="text-xl">‚ö°</span>
            <h4 class="font-semibold text-yellow-800">Ê¨°„ÅÆ„Ç¢„ÇØ„Ç∑„Éß„É≥</h4>
        </div>
        <p class="text-sm text-yellow-700 mb-3">AIË¶ÅÁ¥Ñ„ÅåÂÆå‰∫ÜÊ¨°Á¨¨„ÄÅFAQÁîüÊàê„Å´ÈÄ≤„Åø„Åæ„Åô„ÄÇÊâãÂãï„Åß‰ªãÂÖ•„Åô„ÇãÂ†¥Âêà„ÅØ‰∏ãË®ò„Éú„Çø„É≥„Çí„ÇØ„É™„ÉÉ„ÇØ„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ</p>
        <div class="flex gap-2">
            <button class="px-3 py-1.5 bg-yellow-500 text-white rounded text-sm font-medium hover:bg-yellow-600" onclick="forceNextStage()">
                Âº∑Âà∂ÁöÑ„Å´Ê¨°„Å∏ÈÄ≤„ÇÄ
            </button>
            <button class="px-3 py-1.5 bg-white text-yellow-700 border border-yellow-300 rounded text-sm font-medium hover:bg-yellow-50" onclick="cancelProcessing()">
                Âá¶ÁêÜ„Çí‰∏≠Êñ≠
            </button>
        </div>
    </div>
</div>

<!-- „Åã„Çì„Å∞„Çì„Éì„É•„Éº„Å®„ÉÜ„Éº„Éñ„É´„Éì„É•„Éº„ÅØÁúÅÁï•ÔºàÂêåÊßò„Å´ÁßªË°åÔºâ -->
{% endblock %}

{% block right_panel_content %}
<!-- Áµ±Ë®à„Ç¶„Ç£„Ç∏„Çß„ÉÉ„Éà -->
<div class="stats-widget">
    <h4 class="font-semibold text-gray-800 mb-3">üìä ‰ªäÊó•„ÅÆÁµ±Ë®à</h4>
    <div class="stats-grid">
        <div class="stat-item">
            <div class="stat-value">8</div>
            <div class="stat-label">Âá¶ÁêÜÂÆå‰∫Ü</div>
            <div class="stat-trend positive">+3</div>
        </div>
        <div class="stat-item">
            <div class="stat-value">12</div>
            <div class="stat-label">Âá¶ÁêÜ‰∏≠</div>
            <div class="stat-trend positive">-2</div>
        </div>
        <div class="stat-item">
            <div class="stat-value">96%</div>
            <div class="stat-label">AIÁ≤æÂ∫¶</div>
            <div class="stat-trend positive">+1%</div>
        </div>
        <div class="stat-item">
            <div class="stat-value">2.3h</div>
            <div class="stat-label">Âπ≥ÂùáÊôÇÈñì</div>
            <div class="stat-trend positive">-0.5h</div>
        </div>
    </div>
</div>

<!-- AIÊ¥ûÂØü -->
<div class="ai-insights">
    <div class="insight-header">
        <span class="text-xl">ü§ñ</span>
        <span>AIÊ¥ûÂØü</span>
    </div>
    <ul class="insight-list">
        <li class="insight-item">
            <span class="insight-icon">üí°</span>
            <span>‰ªäÊó•„ÅÆÂá¶ÁêÜÂäπÁéá„Åå20%Âêë‰∏ä„Åó„Å¶„ÅÑ„Åæ„Åô</span>
        </li>
        <li class="insight-item">
            <span class="insight-icon">‚ö†Ô∏è</span>
            <span>3‰ª∂„ÅÆË®òÈå≤„ÅßÂá¶ÁêÜÈÅÖÂª∂„ÅåÁô∫Áîü‰∏≠</span>
        </li>
        <li class="insight-item">
            <span class="insight-icon">üìà</span>
            <span>ESGÈñ¢ÈÄ£„ÅÆË≥™Âïè„ÅåÊÄ•Â¢ó„Åó„Å¶„ÅÑ„Åæ„Åô</span>
        </li>
    </ul>
</div>

<!-- „Ç¢„ÇØ„Ç∑„Éß„É≥„Éë„Éç„É´ -->
<div class="action-panel">
    <div class="action-header">
        <div class="action-title">üéØ Ë¶ÅÂØæÂøú„Ç¢„ÇØ„Ç∑„Éß„É≥</div>
        <div class="action-count">5</div>
    </div>
    <ul class="action-list">
        <li class="action-item">
            <div class="action-priority high"></div>
            <div class="flex-1">
                <div class="font-medium">BlackRock„Å∏„ÅÆÂõûÁ≠î</div>
                <div class="text-xs text-gray-500">ÊúüÈôê: ‰ªäÊó•</div>
            </div>
        </li>
        <li class="action-item">
            <div class="action-priority medium"></div>
            <div class="flex-1">
                <div class="font-medium">FAQÊâøË™ç</div>
                <div class="text-xs text-gray-500">ÊúüÈôê: ÊòéÊó•</div>
            </div>
        </li>
        <li class="action-item">
            <div class="action-priority low"></div>
            <div class="flex-1">
                <div class="font-medium">„É¨„Éù„Éº„Éà‰ΩúÊàê</div>
                <div class="text-xs text-gray-500">ÊúüÈôê: Êù•ÈÄ±</div>
            </div>
        </li>
    </ul>
</div>

<!-- ÊúÄËøë„ÅÆÊ¥ªÂãï -->
<div class="bg-gray-50 rounded-lg p-3">
    <h4 class="font-semibold text-gray-800 mb-2">üìù ÊúÄËøë„ÅÆÊ¥ªÂãï</h4>
    <div class="space-y-2 text-sm">
        <div class="flex items-center gap-2">
            <div class="w-2 h-2 bg-green-500 rounded-full"></div>
            <span>FAQ 3‰ª∂„ÅåÂÖ¨Èñã„Åï„Çå„Åæ„Åó„Åü</span>
        </div>
        <div class="flex items-center gap-2">
            <div class="w-2 h-2 bg-blue-500 rounded-full"></div>
            <span>Êñ∞„Åó„ÅÑÈü≥Â£∞„Éï„Ç°„Ç§„É´„Åå„Ç¢„ÉÉ„Éó„É≠„Éº„Éâ</span>
        </div>
        <div class="flex items-center gap-2">
            <div class="w-2 h-2 bg-yellow-500 rounded-full"></div>
            <span>„É¨„Éì„É•„ÉºÂæÖ„Å°„Åå2‰ª∂ËøΩÂä†</span>
        </div>
    </div>
</div>
{% endblock %}

{% block three_column_extra_js %}
<script>
// Â§ñÈÉ®MTGË≠∞‰∫ãÈå≤Â∞ÇÁî®JavaScript

// „Ç∞„É≠„Éº„Éê„É´Áä∂ÊÖãÁÆ°ÁêÜ
let selectedActivityId = 'activity-001';
let currentTab = 'overview';
let currentFilter = 'all';
let currentViewMode = 'stream';

// „Ç¢„ÇØ„ÉÜ„Ç£„Éì„ÉÜ„Ç£ÈÅ∏Êäû
function selectActivity(activityId) {
    // Ââç„ÅÆÈÅ∏Êäû„ÇíËß£Èô§
    document.querySelectorAll('.activity-card').forEach(card => {
        card.classList.remove('selected');
    });
    
    // Êñ∞„Åó„ÅÑÈÅ∏Êäû„ÇíË®≠ÂÆö
    event.target.closest('.activity-card').classList.add('selected');
    selectedActivityId = activityId;
    
    // „É°„Ç§„É≥„ÉØ„Éº„ÇØ„Çπ„Éö„Éº„Çπ„ÅÆÂÜÖÂÆπ„ÇíÊõ¥Êñ∞
    updateWorkspaceContent(activityId);
}

// „ÉØ„Éº„ÇØ„Çπ„Éö„Éº„ÇπÂÜÖÂÆπÊõ¥Êñ∞
function updateWorkspaceContent(activityId) {
    console.log('„ÉØ„Éº„ÇØ„Çπ„Éö„Éº„ÇπÊõ¥Êñ∞:', activityId);
    
    // „Éá„É¢Áî®: Áï∞„Å™„ÇãË®òÈå≤„ÅÆÂÜÖÂÆπ„ÇíË°®Á§∫
    const activityData = {
        'activity-002': {
            title: 'BlackRockÂÄãÂà•Èù¢Ë´á',
            investor: 'BlackRock Inc.',
            status: 'FAQÁîüÊàê‰∏≠',
            progress: 75
        },
        'activity-003': {
            title: 'ÂÄã‰∫∫ÊäïË≥áÂÆ∂Ë™¨Êòé‰ºö',
            investor: 'ÂÄã‰∫∫ÊäïË≥áÂÆ∂',
            status: 'ÂÖ¨ÈñãÊ∏à„Åø',
            progress: 100
        }
    };
    
    if (activityData[activityId]) {
        console.log('Ë®òÈå≤Ë©≥Á¥∞„ÇíÊõ¥Êñ∞:', activityData[activityId]);
    }
}

// „Éï„Ç£„É´„Çø„ÉºÈÅ©Áî®
function filterStream(filter) {
    document.querySelectorAll('.filter-chip').forEach(chip => {
        chip.classList.remove('active');
    });
    event.target.classList.add('active');
    
    currentFilter = filter;
    console.log('„Éï„Ç£„É´„Çø„ÉºÈÅ©Áî®:', filter);
}

// „Éì„É•„Éº„É¢„Éº„ÉâÂàá„ÇäÊõø„Åà
function setViewMode(mode) {
    console.log('„Éì„É•„Éº„É¢„Éº„ÉâÂ§âÊõ¥:', mode);
    
    // Ââç„ÅÆ„Éì„É•„Éº„ÇíÈùûË°®Á§∫
    const currentView = document.getElementById(`view-${currentViewMode}`);
    if (currentView) {
        currentView.classList.add('hidden');
        currentView.classList.remove('active');
    }
    
    // Êñ∞„Åó„ÅÑ„Éì„É•„Éº„ÇíË°®Á§∫
    const newView = document.getElementById(`view-${mode}`);
    if (newView) {
        newView.classList.remove('hidden');
        newView.classList.add('active');
    }
    
    // „Éú„Çø„É≥„ÅÆ„Ç¢„ÇØ„ÉÜ„Ç£„ÉñÁä∂ÊÖã„ÇíÊõ¥Êñ∞
    document.querySelectorAll('.btn-toolbar').forEach(btn => {
        btn.classList.remove('active');
    });
    event.target.classList.add('active');
    
    currentViewMode = mode;
}

// Ë®òÈå≤Á∑®ÈõÜ
function editRecord(activityId) {
    console.log(`Ë®òÈå≤Á∑®ÈõÜ: ${activityId}`);
    showNotification(`üìù Ë®òÈå≤„ÅÆÁ∑®ÈõÜÁîªÈù¢„ÇíÈñã„ÅÑ„Å¶„ÅÑ„Åæ„Åô...`, 'info');
    
    setTimeout(() => {
        window.location.href = `/dialogue/edit?id=${activityId}`;
    }, 500);
}

// „Éó„É≠„Çª„ÇπÂà∂Âæ°
function forceNextStage() {
    if (confirm('AIË¶ÅÁ¥Ñ„Çí„Çπ„Ç≠„ÉÉ„Éó„Åó„Å¶Ê¨°„ÅÆÊÆµÈöé„Å´ÈÄ≤„Åø„Åæ„Åô„ÅãÔºü')) {
        showNotification('FAQÁîüÊàêÊÆµÈöé„Å´ÁßªË°å„Åó„Åæ„Åó„Åü', 'success');
    }
}

function cancelProcessing() {
    if (confirm('Âá¶ÁêÜ„Çí‰∏≠Êñ≠„Åó„Åæ„Åô„ÅãÔºü')) {
        showNotification('Âá¶ÁêÜ„Çí‰∏≠Êñ≠„Åó„Åæ„Åó„Åü', 'warning');
    }
}

// ‰∏ÄÊã¨Âá¶ÁêÜ
function bulkProcess() {
    showNotification('‰∏ÄÊã¨Âá¶ÁêÜÊ©üËÉΩ„ÇíÈñãÂßã„Åó„Åæ„Åô', 'info');
}

function exportData() {
    showNotification('„Éá„Éº„Çø„ÇíÊõ∏„ÅçÂá∫„Åó‰∏≠...', 'info');
    setTimeout(function() {
        showNotification('Êõ∏„ÅçÂá∫„Åó„ÅåÂÆå‰∫Ü„Åó„Åæ„Åó„Åü', 'success');
    }, 2000);
}

function showFilters() {
    showNotification('Ë©≥Á¥∞„Éï„Ç£„É´„ÇøÊ©üËÉΩ„ÇíÈñãÁô∫‰∏≠...', 'info');
}

// Ë©≥Á¥∞„Çø„ÉñÊ©üËÉΩ
function switchDetailTab(tabName) {
    document.querySelectorAll('.workspace-tab').forEach(tab => {
        tab.classList.remove('active');
    });
    event.target.classList.add('active');
    
    document.querySelectorAll('.tab-content').forEach(content => {
        content.classList.remove('active');
    });
    
    const tabContent = document.getElementById(`tab-${tabName}`);
    if (tabContent) {
        tabContent.classList.add('active');
    }
    
    currentTab = tabName;
    console.log('Ë©≥Á¥∞„Çø„ÉñÂàá„ÇäÊõø„Åà:', tabName);
}

// ÂàùÊúüÂåñÂá¶ÁêÜËøΩÂä†
document.addEventListener('DOMContentLoaded', function() {
    selectActivity('activity-001');
    
    // „É™„Ç¢„É´„Çø„Ç§„É†Êõ¥Êñ∞„ÅÆ„Ç∑„Éü„É•„É¨„Éº„Ç∑„Éß„É≥
    setTimeout(() => {
        const processingCircle = document.querySelector('.stage-circle.processing');
        if (processingCircle) {
            processingCircle.classList.remove('processing');
            processingCircle.classList.add('completed');
            processingCircle.innerHTML = '‚úì';
        }
    }, 5000);
});
</script>
{% endblock %} 